var m3=t=>{throw TypeError(t)};var Vs=(t,e,n)=>e.has(t)?m3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function y3(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(t,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Py={exports:{}},Tl={},Dy={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),x3=Symbol.for("react.portal"),C3=Symbol.for("react.fragment"),v3=Symbol.for("react.strict_mode"),w3=Symbol.for("react.profiler"),_3=Symbol.for("react.provider"),E3=Symbol.for("react.context"),A3=Symbol.for("react.forward_ref"),S3=Symbol.for("react.suspense"),b3=Symbol.for("react.memo"),T3=Symbol.for("react.lazy"),W0=Symbol.iterator;function I3(t){return t===null||typeof t!="object"?null:(t=W0&&t[W0]||t["@@iterator"],typeof t=="function"?t:null)}var My={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,By={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=By,this.updater=n||My}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fy(){}Fy.prototype=Ns.prototype;function d1(t,e,n){this.props=t,this.context=e,this.refs=By,this.updater=n||My}var h1=d1.prototype=new Fy;h1.constructor=d1;Ly(h1,Ns.prototype);h1.isPureReactComponent=!0;var K0=Array.isArray,jy=Object.prototype.hasOwnProperty,p1={current:null},Uy={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var i,a={},u=null,d=null;if(e!=null)for(i in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(u=""+e.key),e)jy.call(e,i)&&!Uy.hasOwnProperty(i)&&(a[i]=e[i]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var y=Array(g),m=0;m<g;m++)y[m]=arguments[m+2];a.children=y}if(t&&t.defaultProps)for(i in g=t.defaultProps,g)a[i]===void 0&&(a[i]=g[i]);return{$$typeof:Uo,type:t,key:u,ref:d,props:a,_owner:p1.current}}function R3(t,e){return{$$typeof:Uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function g1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uo}function N3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X0=/\/+/g;function pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?N3(""+t.key):e.toString(36)}function Aa(t,e,n,i,a){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Uo:case x3:d=!0}}if(d)return d=t,a=a(d),t=i===""?"."+pc(d,0):i,K0(a)?(n="",t!=null&&(n=t.replace(X0,"$&/")+"/"),Aa(a,e,n,"",function(m){return m})):a!=null&&(g1(a)&&(a=R3(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(X0,"$&/")+"/")+t)),e.push(a)),1;if(d=0,i=i===""?".":i+":",K0(t))for(var g=0;g<t.length;g++){u=t[g];var y=i+pc(u,g);d+=Aa(u,e,n,y,a)}else if(y=I3(t),typeof y=="function")for(t=y.call(t),g=0;!(u=t.next()).done;)u=u.value,y=i+pc(u,g++),d+=Aa(u,e,n,y,a);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function ia(t,e,n){if(t==null)return t;var i=[],a=0;return Aa(t,i,"","",function(u){return e.call(n,u,a++)}),i}function O3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wn={current:null},Sa={transition:null},k3={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:Sa,ReactCurrentOwner:p1};function Hy(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:ia,forEach:function(t,e,n){ia(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ia(t,function(){e++}),e},toArray:function(t){return ia(t,function(e){return e})||[]},only:function(t){if(!g1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Ns;Xe.Fragment=C3;Xe.Profiler=w3;Xe.PureComponent=d1;Xe.StrictMode=v3;Xe.Suspense=S3;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k3;Xe.act=Hy;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ly({},t.props),a=t.key,u=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,d=p1.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var g=t.type.defaultProps;for(y in e)jy.call(e,y)&&!Uy.hasOwnProperty(y)&&(i[y]=e[y]===void 0&&g!==void 0?g[y]:e[y])}var y=arguments.length-2;if(y===1)i.children=n;else if(1<y){g=Array(y);for(var m=0;m<y;m++)g[m]=arguments[m+2];i.children=g}return{$$typeof:Uo,type:t.type,key:a,ref:u,props:i,_owner:d}};Xe.createContext=function(t){return t={$$typeof:E3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_3,_context:t},t.Consumer=t};Xe.createElement=zy;Xe.createFactory=function(t){var e=zy.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:A3,render:t}};Xe.isValidElement=g1;Xe.lazy=function(t){return{$$typeof:T3,_payload:{_status:-1,_result:t},_init:O3}};Xe.memo=function(t,e){return{$$typeof:b3,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=Sa.transition;Sa.transition={};try{t()}finally{Sa.transition=e}};Xe.unstable_act=Hy;Xe.useCallback=function(t,e){return wn.current.useCallback(t,e)};Xe.useContext=function(t){return wn.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return wn.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return wn.current.useEffect(t,e)};Xe.useId=function(){return wn.current.useId()};Xe.useImperativeHandle=function(t,e,n){return wn.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return wn.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return wn.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return wn.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return wn.current.useReducer(t,e,n)};Xe.useRef=function(t){return wn.current.useRef(t)};Xe.useState=function(t){return wn.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return wn.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return wn.current.useTransition()};Xe.version="18.3.1";Dy.exports=Xe;var re=Dy.exports;const eo=ky(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P3=re,D3=Symbol.for("react.element"),M3=Symbol.for("react.fragment"),L3=Object.prototype.hasOwnProperty,B3=P3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F3={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,n){var i,a={},u=null,d=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(d=e.ref);for(i in e)L3.call(e,i)&&!F3.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:D3,type:t,key:u,ref:d,props:a,_owner:B3.current}}Tl.Fragment=M3;Tl.jsx=Vy;Tl.jsxs=Vy;Py.exports=Tl;var _=Py.exports,Xd={},qy={exports:{}},Hn={},Gy={exports:{}},Wy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ge,Te){var Ee=ge.length;ge.push(Te);e:for(;0<Ee;){var Ke=Ee-1>>>1,Pe=ge[Ke];if(0<a(Pe,Te))ge[Ke]=Te,ge[Ee]=Pe,Ee=Ke;else break e}}function n(ge){return ge.length===0?null:ge[0]}function i(ge){if(ge.length===0)return null;var Te=ge[0],Ee=ge.pop();if(Ee!==Te){ge[0]=Ee;e:for(var Ke=0,Pe=ge.length,ft=Pe>>>1;Ke<ft;){var We=2*(Ke+1)-1,It=ge[We],ve=We+1,Ft=ge[ve];if(0>a(It,Ee))ve<Pe&&0>a(Ft,It)?(ge[Ke]=Ft,ge[ve]=Ee,Ke=ve):(ge[Ke]=It,ge[We]=Ee,Ke=We);else if(ve<Pe&&0>a(Ft,Ee))ge[Ke]=Ft,ge[ve]=Ee,Ke=ve;else break e}}return Te}function a(ge,Te){var Ee=ge.sortIndex-Te.sortIndex;return Ee!==0?Ee:ge.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,g=d.now();t.unstable_now=function(){return d.now()-g}}var y=[],m=[],C=1,v=null,S=3,N=!1,D=!1,M=!1,z=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ge){for(var Te=n(m);Te!==null;){if(Te.callback===null)i(m);else if(Te.startTime<=ge)i(m),Te.sortIndex=Te.expirationTime,e(y,Te);else break;Te=n(m)}}function P(ge){if(M=!1,R(ge),!D)if(n(y)!==null)D=!0,Ve(X);else{var Te=n(m);Te!==null&&Re(P,Te.startTime-ge)}}function X(ge,Te){D=!1,M&&(M=!1,I($),$=-1),N=!0;var Ee=S;try{for(R(Te),v=n(y);v!==null&&(!(v.expirationTime>Te)||ge&&!ye());){var Ke=v.callback;if(typeof Ke=="function"){v.callback=null,S=v.priorityLevel;var Pe=Ke(v.expirationTime<=Te);Te=t.unstable_now(),typeof Pe=="function"?v.callback=Pe:v===n(y)&&i(y),R(Te)}else i(y);v=n(y)}if(v!==null)var ft=!0;else{var We=n(m);We!==null&&Re(P,We.startTime-Te),ft=!1}return ft}finally{v=null,S=Ee,N=!1}}var V=!1,F=null,$=-1,H=5,se=-1;function ye(){return!(t.unstable_now()-se<H)}function ee(){if(F!==null){var ge=t.unstable_now();se=ge;var Te=!0;try{Te=F(!0,ge)}finally{Te?J():(V=!1,F=null)}}else V=!1}var J;if(typeof T=="function")J=function(){T(ee)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,q=Ce.port2;Ce.port1.onmessage=ee,J=function(){q.postMessage(null)}}else J=function(){z(ee,0)};function Ve(ge){F=ge,V||(V=!0,J())}function Re(ge,Te){$=z(function(){ge(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){D||N||(D=!0,Ve(X))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(y)},t.unstable_next=function(ge){switch(S){case 1:case 2:case 3:var Te=3;break;default:Te=S}var Ee=S;S=Te;try{return ge()}finally{S=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,Te){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Ee=S;S=ge;try{return Te()}finally{S=Ee}},t.unstable_scheduleCallback=function(ge,Te,Ee){var Ke=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ke+Ee:Ke):Ee=Ke,ge){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=Ee+Pe,ge={id:C++,callback:Te,priorityLevel:ge,startTime:Ee,expirationTime:Pe,sortIndex:-1},Ee>Ke?(ge.sortIndex=Ee,e(m,ge),n(y)===null&&ge===n(m)&&(M?(I($),$=-1):M=!0,Re(P,Ee-Ke))):(ge.sortIndex=Pe,e(y,ge),D||N||(D=!0,Ve(X))),ge},t.unstable_shouldYield=ye,t.unstable_wrapCallback=function(ge){var Te=S;return function(){var Ee=S;S=Te;try{return ge.apply(this,arguments)}finally{S=Ee}}}})(Wy);Gy.exports=Wy;var j3=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U3=re,zn=j3;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ky=new Set,_o={};function Fi(t,e){Es(t,e),Es(t+"Capture",e)}function Es(t,e){for(_o[t]=e,t=0;t<e.length;t++)Ky.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yd=Object.prototype.hasOwnProperty,z3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},Z0={};function H3(t){return Yd.call(Z0,t)?!0:Yd.call(Y0,t)?!1:z3.test(t)?Z0[t]=!0:(Y0[t]=!0,!1)}function V3(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q3(t,e,n,i){if(e===null||typeof e>"u"||V3(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,i,a,u,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=d}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];an[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var m1=/[\-:]([a-z])/g;function y1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(m1,y1);an[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(m1,y1);an[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(m1,y1);an[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function x1(t,e,n,i){var a=an.hasOwnProperty(e)?an[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q3(e,n,a,i)&&(n=null),i||a===null?H3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var jr=U3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=Symbol.for("react.element"),rs=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),Xy=Symbol.for("react.provider"),Yy=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),$d=Symbol.for("react.suspense_list"),w1=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),Zy=Symbol.for("react.offscreen"),Q0=Symbol.iterator;function qs(t){return t===null||typeof t!="object"?null:(t=Q0&&t[Q0]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,gc;function to(t){if(gc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gc=e&&e[1]||""}return`
`+gc+t}var mc=!1;function yc(t,e){if(!t||mc)return"";mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),u=i.stack.split(`
`),d=a.length-1,g=u.length-1;1<=d&&0<=g&&a[d]!==u[g];)g--;for(;1<=d&&0<=g;d--,g--)if(a[d]!==u[g]){if(d!==1||g!==1)do if(d--,g--,0>g||a[d]!==u[g]){var y=`
`+a[d].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=d&&0<=g);break}}}finally{mc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?to(t):""}function G3(t){switch(t.tag){case 5:return to(t.type);case 16:return to("Lazy");case 13:return to("Suspense");case 19:return to("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function Jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case is:return"Fragment";case rs:return"Portal";case Zd:return"Profiler";case C1:return"StrictMode";case Qd:return"Suspense";case $d:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yy:return(t.displayName||"Context")+".Consumer";case Xy:return(t._context.displayName||"Context")+".Provider";case v1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w1:return e=t.displayName||null,e!==null?e:Jd(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return Jd(t(e))}catch{}}return null}function W3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jd(e);case 8:return e===C1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K3(t){var e=Qy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){i=""+d,u.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oa(t){t._valueTracker||(t._valueTracker=K3(t))}function $y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Qy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Xa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eh(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function $0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jy(t,e){e=e.checked,e!=null&&x1(t,"checked",e,!1)}function th(t,e){Jy(t,e);var n=di(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&nh(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function J0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nh(t,e,n){(e!=="number"||Xa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var no=Array.isArray;function ms(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ep(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(no(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function ex(t,e){var n=di(e.value),i=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function tp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var aa,nx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(aa=aa||document.createElement("div"),aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X3=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(t){X3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uo[e]=uo[t]})});function rx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uo.hasOwnProperty(t)&&uo[t]?(""+e).trim():e+"px"}function ix(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=rx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var Y3=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sh(t,e){if(e){if(Y3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function _1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lh=null,ys=null,xs=null;function np(t){if(t=Vo(t)){if(typeof lh!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=kl(e),lh(t.stateNode,t.type,e))}}function sx(t){ys?xs?xs.push(t):xs=[t]:ys=t}function ox(){if(ys){var t=ys,e=xs;if(xs=ys=null,np(t),e)for(t=0;t<e.length;t++)np(e[t])}}function ax(t,e){return t(e)}function lx(){}var xc=!1;function cx(t,e,n){if(xc)return t(e,n);xc=!0;try{return ax(t,e,n)}finally{xc=!1,(ys!==null||xs!==null)&&(lx(),ox())}}function Ao(t,e){var n=t.stateNode;if(n===null)return null;var i=kl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var ch=!1;if(Mr)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){ch=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{ch=!1}function Z3(t,e,n,i,a,u,d,g,y){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(C){this.onError(C)}}var fo=!1,Ya=null,Za=!1,uh=null,Q3={onError:function(t){fo=!0,Ya=t}};function $3(t,e,n,i,a,u,d,g,y){fo=!1,Ya=null,Z3.apply(Q3,arguments)}function J3(t,e,n,i,a,u,d,g,y){if($3.apply(this,arguments),fo){if(fo){var m=Ya;fo=!1,Ya=null}else throw Error(ce(198));Za||(Za=!0,uh=m)}}function ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ux(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rp(t){if(ji(t)!==t)throw Error(ce(188))}function e_(t){var e=t.alternate;if(!e){if(e=ji(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===n)return rp(a),t;if(u===i)return rp(a),e;u=u.sibling}throw Error(ce(188))}if(n.return!==i.return)n=a,i=u;else{for(var d=!1,g=a.child;g;){if(g===n){d=!0,n=a,i=u;break}if(g===i){d=!0,i=a,n=u;break}g=g.sibling}if(!d){for(g=u.child;g;){if(g===n){d=!0,n=u,i=a;break}if(g===i){d=!0,i=u,n=a;break}g=g.sibling}if(!d)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function fx(t){return t=e_(t),t!==null?dx(t):null}function dx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dx(t);if(e!==null)return e;t=t.sibling}return null}var hx=zn.unstable_scheduleCallback,ip=zn.unstable_cancelCallback,t_=zn.unstable_shouldYield,n_=zn.unstable_requestPaint,Bt=zn.unstable_now,r_=zn.unstable_getCurrentPriorityLevel,E1=zn.unstable_ImmediatePriority,px=zn.unstable_UserBlockingPriority,Qa=zn.unstable_NormalPriority,i_=zn.unstable_LowPriority,gx=zn.unstable_IdlePriority,Il=null,_r=null;function s_(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Il,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:l_,o_=Math.log,a_=Math.LN2;function l_(t){return t>>>=0,t===0?32:31-(o_(t)/a_|0)|0}var la=64,ca=4194304;function ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $a(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,a=t.suspendedLanes,u=t.pingedLanes,d=n&268435455;if(d!==0){var g=d&~a;g!==0?i=ro(g):(u&=d,u!==0&&(i=ro(u)))}else d=n&~a,d!==0?i=ro(d):u!==0&&(i=ro(u));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,u=e&-e,a>=u||a===16&&(u&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-cr(e),a=1<<n,i|=t[n],e&=~a;return i}function c_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,u=t.pendingLanes;0<u;){var d=31-cr(u),g=1<<d,y=a[d];y===-1?(!(g&n)||g&i)&&(a[d]=c_(g,e)):y<=e&&(t.expiredLanes|=g),u&=~g}}function fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mx(){var t=la;return la<<=1,!(la&4194240)&&(la=64),t}function Cc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=n}function f_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-cr(n),u=1<<a;e[a]=0,i[a]=-1,t[a]=-1,n&=~u}}function A1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-cr(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}var ct=0;function yx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xx,S1,Cx,vx,wx,dh=!1,ua=[],ni=null,ri=null,ii=null,So=new Map,bo=new Map,Zr=[],d_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sp(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":So.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Ws(t,e,n,i,a,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},e!==null&&(e=Vo(e),e!==null&&S1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function h_(t,e,n,i,a){switch(e){case"focusin":return ni=Ws(ni,t,e,n,i,a),!0;case"dragenter":return ri=Ws(ri,t,e,n,i,a),!0;case"mouseover":return ii=Ws(ii,t,e,n,i,a),!0;case"pointerover":var u=a.pointerId;return So.set(u,Ws(So.get(u)||null,t,e,n,i,a)),!0;case"gotpointercapture":return u=a.pointerId,bo.set(u,Ws(bo.get(u)||null,t,e,n,i,a)),!0}return!1}function _x(t){var e=Ti(t.target);if(e!==null){var n=ji(e);if(n!==null){if(e=n.tag,e===13){if(e=ux(n),e!==null){t.blockedOn=e,wx(t.priority,function(){Cx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ba(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ah=i,n.target.dispatchEvent(i),ah=null}else return e=Vo(n),e!==null&&S1(e),t.blockedOn=n,!1;e.shift()}return!0}function op(t,e,n){ba(t)&&n.delete(e)}function p_(){dh=!1,ni!==null&&ba(ni)&&(ni=null),ri!==null&&ba(ri)&&(ri=null),ii!==null&&ba(ii)&&(ii=null),So.forEach(op),bo.forEach(op)}function Ks(t,e){t.blockedOn===e&&(t.blockedOn=null,dh||(dh=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,p_)))}function To(t){function e(a){return Ks(a,t)}if(0<ua.length){Ks(ua[0],t);for(var n=1;n<ua.length;n++){var i=ua[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ni!==null&&Ks(ni,t),ri!==null&&Ks(ri,t),ii!==null&&Ks(ii,t),So.forEach(e),bo.forEach(e),n=0;n<Zr.length;n++)i=Zr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)_x(n),n.blockedOn===null&&Zr.shift()}var Cs=jr.ReactCurrentBatchConfig,Ja=!0;function g_(t,e,n,i){var a=ct,u=Cs.transition;Cs.transition=null;try{ct=1,b1(t,e,n,i)}finally{ct=a,Cs.transition=u}}function m_(t,e,n,i){var a=ct,u=Cs.transition;Cs.transition=null;try{ct=4,b1(t,e,n,i)}finally{ct=a,Cs.transition=u}}function b1(t,e,n,i){if(Ja){var a=hh(t,e,n,i);if(a===null)Rc(t,e,i,el,n),sp(t,i);else if(h_(a,t,e,n,i))i.stopPropagation();else if(sp(t,i),e&4&&-1<d_.indexOf(t)){for(;a!==null;){var u=Vo(a);if(u!==null&&xx(u),u=hh(t,e,n,i),u===null&&Rc(t,e,i,el,n),u===a)break;a=u}a!==null&&i.stopPropagation()}else Rc(t,e,i,null,n)}}var el=null;function hh(t,e,n,i){if(el=null,t=_1(i),t=Ti(t),t!==null)if(e=ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ux(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return el=t,null}function Ex(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r_()){case E1:return 1;case px:return 4;case Qa:case i_:return 16;case gx:return 536870912;default:return 16}default:return 16}}var Jr=null,T1=null,Ta=null;function Ax(){if(Ta)return Ta;var t,e=T1,n=e.length,i,a="value"in Jr?Jr.value:Jr.textContent,u=a.length;for(t=0;t<n&&e[t]===a[t];t++);var d=n-t;for(i=1;i<=d&&e[n-i]===a[u-i];i++);return Ta=a.slice(t,1<i?1-i:void 0)}function Ia(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fa(){return!0}function ap(){return!1}function Vn(t){function e(n,i,a,u,d){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(n=t[g],this[g]=n?n(u):u[g]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?fa:ap,this.isPropagationStopped=ap,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),e}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I1=Vn(Os),Ho=Tt({},Os,{view:0,detail:0}),y_=Vn(Ho),vc,wc,Xs,Rl=Tt({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(vc=t.screenX-Xs.screenX,wc=t.screenY-Xs.screenY):wc=vc=0,Xs=t),vc)},movementY:function(t){return"movementY"in t?t.movementY:wc}}),lp=Vn(Rl),x_=Tt({},Rl,{dataTransfer:0}),C_=Vn(x_),v_=Tt({},Ho,{relatedTarget:0}),_c=Vn(v_),w_=Tt({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),__=Vn(w_),E_=Tt({},Os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A_=Vn(E_),S_=Tt({},Os,{data:0}),cp=Vn(S_),b_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I_[t])?!!e[t]:!1}function R1(){return R_}var N_=Tt({},Ho,{key:function(t){if(t.key){var e=b_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R1,charCode:function(t){return t.type==="keypress"?Ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O_=Vn(N_),k_=Tt({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),up=Vn(k_),P_=Tt({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R1}),D_=Vn(P_),M_=Tt({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),L_=Vn(M_),B_=Tt({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F_=Vn(B_),j_=[9,13,27,32],N1=Mr&&"CompositionEvent"in window,ho=null;Mr&&"documentMode"in document&&(ho=document.documentMode);var U_=Mr&&"TextEvent"in window&&!ho,Sx=Mr&&(!N1||ho&&8<ho&&11>=ho),fp=" ",dp=!1;function bx(t,e){switch(t){case"keyup":return j_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function z_(t,e){switch(t){case"compositionend":return Tx(e);case"keypress":return e.which!==32?null:(dp=!0,fp);case"textInput":return t=e.data,t===fp&&dp?null:t;default:return null}}function H_(t,e){if(ss)return t==="compositionend"||!N1&&bx(t,e)?(t=Ax(),Ta=T1=Jr=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sx&&e.locale!=="ko"?null:e.data;default:return null}}var V_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V_[t.type]:e==="textarea"}function Ix(t,e,n,i){sx(i),e=tl(e,"onChange"),0<e.length&&(n=new I1("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var po=null,Io=null;function q_(t){jx(t,0)}function Nl(t){var e=ls(t);if($y(e))return t}function G_(t,e){if(t==="change")return e}var Rx=!1;if(Mr){var Ec;if(Mr){var Ac="oninput"in document;if(!Ac){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),Ac=typeof pp.oninput=="function"}Ec=Ac}else Ec=!1;Rx=Ec&&(!document.documentMode||9<document.documentMode)}function gp(){po&&(po.detachEvent("onpropertychange",Nx),Io=po=null)}function Nx(t){if(t.propertyName==="value"&&Nl(Io)){var e=[];Ix(e,Io,t,_1(t)),cx(q_,e)}}function W_(t,e,n){t==="focusin"?(gp(),po=e,Io=n,po.attachEvent("onpropertychange",Nx)):t==="focusout"&&gp()}function K_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nl(Io)}function X_(t,e){if(t==="click")return Nl(e)}function Y_(t,e){if(t==="input"||t==="change")return Nl(e)}function Z_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:Z_;function Ro(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Yd.call(e,a)||!fr(t[a],e[a]))return!1}return!0}function mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yp(t,e){var n=mp(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mp(n)}}function Ox(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ox(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kx(){for(var t=window,e=Xa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xa(t.document)}return e}function O1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q_(t){var e=kx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ox(n.ownerDocument.documentElement,n)){if(i!==null&&O1(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!t.extend&&u>i&&(a=i,i=u,u=a),a=yp(n,u);var d=yp(n,i);a&&d&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),u>i?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $_=Mr&&"documentMode"in document&&11>=document.documentMode,os=null,ph=null,go=null,gh=!1;function xp(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gh||os==null||os!==Xa(i)||(i=os,"selectionStart"in i&&O1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),go&&Ro(go,i)||(go=i,i=tl(ph,"onSelect"),0<i.length&&(e=new I1("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=os)))}function da(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var as={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},Sc={},Px={};Mr&&(Px=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Ol(t){if(Sc[t])return Sc[t];if(!as[t])return t;var e=as[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Px)return Sc[t]=e[n];return t}var Dx=Ol("animationend"),Mx=Ol("animationiteration"),Lx=Ol("animationstart"),Bx=Ol("transitionend"),Fx=new Map,Cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(t,e){Fx.set(t,e),Fi(e,[t])}for(var bc=0;bc<Cp.length;bc++){var Tc=Cp[bc],J_=Tc.toLowerCase(),eE=Tc[0].toUpperCase()+Tc.slice(1);pi(J_,"on"+eE)}pi(Dx,"onAnimationEnd");pi(Mx,"onAnimationIteration");pi(Lx,"onAnimationStart");pi("dblclick","onDoubleClick");pi("focusin","onFocus");pi("focusout","onBlur");pi(Bx,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function vp(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,J3(i,e,void 0,t),t.currentTarget=null}function jx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;e:{var u=void 0;if(e)for(var d=i.length-1;0<=d;d--){var g=i[d],y=g.instance,m=g.currentTarget;if(g=g.listener,y!==u&&a.isPropagationStopped())break e;vp(a,g,m),u=y}else for(d=0;d<i.length;d++){if(g=i[d],y=g.instance,m=g.currentTarget,g=g.listener,y!==u&&a.isPropagationStopped())break e;vp(a,g,m),u=y}}}if(Za)throw t=uh,Za=!1,uh=null,t}function Ct(t,e){var n=e[vh];n===void 0&&(n=e[vh]=new Set);var i=t+"__bubble";n.has(i)||(Ux(e,t,2,!1),n.add(i))}function Ic(t,e,n){var i=0;e&&(i|=4),Ux(n,t,i,e)}var ha="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[ha]){t[ha]=!0,Ky.forEach(function(n){n!=="selectionchange"&&(tE.has(n)||Ic(n,!1,t),Ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ha]||(e[ha]=!0,Ic("selectionchange",!1,e))}}function Ux(t,e,n,i){switch(Ex(e)){case 1:var a=g_;break;case 4:a=m_;break;default:a=b1}n=a.bind(null,e,n,t),a=void 0,!ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Rc(t,e,n,i,a){var u=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var g=i.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(d===4)for(d=i.return;d!==null;){var y=d.tag;if((y===3||y===4)&&(y=d.stateNode.containerInfo,y===a||y.nodeType===8&&y.parentNode===a))return;d=d.return}for(;g!==null;){if(d=Ti(g),d===null)return;if(y=d.tag,y===5||y===6){i=u=d;continue e}g=g.parentNode}}i=i.return}cx(function(){var m=u,C=_1(n),v=[];e:{var S=Fx.get(t);if(S!==void 0){var N=I1,D=t;switch(t){case"keypress":if(Ia(n)===0)break e;case"keydown":case"keyup":N=O_;break;case"focusin":D="focus",N=_c;break;case"focusout":D="blur",N=_c;break;case"beforeblur":case"afterblur":N=_c;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=C_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=D_;break;case Dx:case Mx:case Lx:N=__;break;case Bx:N=L_;break;case"scroll":N=y_;break;case"wheel":N=F_;break;case"copy":case"cut":case"paste":N=A_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=up}var M=(e&4)!==0,z=!M&&t==="scroll",I=M?S!==null?S+"Capture":null:S;M=[];for(var T=m,R;T!==null;){R=T;var P=R.stateNode;if(R.tag===5&&P!==null&&(R=P,I!==null&&(P=Ao(T,I),P!=null&&M.push(Oo(T,P,R)))),z)break;T=T.return}0<M.length&&(S=new N(S,D,null,n,C),v.push({event:S,listeners:M}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",S&&n!==ah&&(D=n.relatedTarget||n.fromElement)&&(Ti(D)||D[Lr]))break e;if((N||S)&&(S=C.window===C?C:(S=C.ownerDocument)?S.defaultView||S.parentWindow:window,N?(D=n.relatedTarget||n.toElement,N=m,D=D?Ti(D):null,D!==null&&(z=ji(D),D!==z||D.tag!==5&&D.tag!==6)&&(D=null)):(N=null,D=m),N!==D)){if(M=lp,P="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(M=up,P="onPointerLeave",I="onPointerEnter",T="pointer"),z=N==null?S:ls(N),R=D==null?S:ls(D),S=new M(P,T+"leave",N,n,C),S.target=z,S.relatedTarget=R,P=null,Ti(C)===m&&(M=new M(I,T+"enter",D,n,C),M.target=R,M.relatedTarget=z,P=M),z=P,N&&D)t:{for(M=N,I=D,T=0,R=M;R;R=es(R))T++;for(R=0,P=I;P;P=es(P))R++;for(;0<T-R;)M=es(M),T--;for(;0<R-T;)I=es(I),R--;for(;T--;){if(M===I||I!==null&&M===I.alternate)break t;M=es(M),I=es(I)}M=null}else M=null;N!==null&&wp(v,S,N,M,!1),D!==null&&z!==null&&wp(v,z,D,M,!0)}}e:{if(S=m?ls(m):window,N=S.nodeName&&S.nodeName.toLowerCase(),N==="select"||N==="input"&&S.type==="file")var X=G_;else if(hp(S))if(Rx)X=Y_;else{X=K_;var V=W_}else(N=S.nodeName)&&N.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(X=X_);if(X&&(X=X(t,m))){Ix(v,X,n,C);break e}V&&V(t,S,m),t==="focusout"&&(V=S._wrapperState)&&V.controlled&&S.type==="number"&&nh(S,"number",S.value)}switch(V=m?ls(m):window,t){case"focusin":(hp(V)||V.contentEditable==="true")&&(os=V,ph=m,go=null);break;case"focusout":go=ph=os=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,xp(v,n,C);break;case"selectionchange":if($_)break;case"keydown":case"keyup":xp(v,n,C)}var F;if(N1)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else ss?bx(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Sx&&n.locale!=="ko"&&(ss||$!=="onCompositionStart"?$==="onCompositionEnd"&&ss&&(F=Ax()):(Jr=C,T1="value"in Jr?Jr.value:Jr.textContent,ss=!0)),V=tl(m,$),0<V.length&&($=new cp($,t,null,n,C),v.push({event:$,listeners:V}),F?$.data=F:(F=Tx(n),F!==null&&($.data=F)))),(F=U_?z_(t,n):H_(t,n))&&(m=tl(m,"onBeforeInput"),0<m.length&&(C=new cp("onBeforeInput","beforeinput",null,n,C),v.push({event:C,listeners:m}),C.data=F))}jx(v,e)})}function Oo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tl(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=Ao(t,n),u!=null&&i.unshift(Oo(t,u,a)),u=Ao(t,e),u!=null&&i.push(Oo(t,u,a))),t=t.return}return i}function es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wp(t,e,n,i,a){for(var u=e._reactName,d=[];n!==null&&n!==i;){var g=n,y=g.alternate,m=g.stateNode;if(y!==null&&y===i)break;g.tag===5&&m!==null&&(g=m,a?(y=Ao(n,u),y!=null&&d.unshift(Oo(n,y,g))):a||(y=Ao(n,u),y!=null&&d.push(Oo(n,y,g)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function _p(t){return(typeof t=="string"?t:""+t).replace(nE,`
`).replace(rE,"")}function pa(t,e,n){if(e=_p(e),_p(t)!==e&&n)throw Error(ce(425))}function nl(){}var mh=null,yh=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(t){return Ep.resolve(null).then(t).catch(oE)}:Ch;function oE(t){setTimeout(function(){throw t})}function Nc(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){t.removeChild(a),To(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);To(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ap(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),wr="__reactFiber$"+ks,ko="__reactProps$"+ks,Lr="__reactContainer$"+ks,vh="__reactEvents$"+ks,aE="__reactListeners$"+ks,lE="__reactHandles$"+ks;function Ti(t){var e=t[wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ap(t);t!==null;){if(n=t[wr])return n;t=Ap(t)}return e}t=n,n=t.parentNode}return null}function Vo(t){return t=t[wr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function kl(t){return t[ko]||null}var wh=[],cs=-1;function gi(t){return{current:t}}function vt(t){0>cs||(t.current=wh[cs],wh[cs]=null,cs--)}function mt(t,e){cs++,wh[cs]=t.current,t.current=e}var hi={},pn=gi(hi),Pn=gi(!1),ki=hi;function As(t,e){var n=t.type.contextTypes;if(!n)return hi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in n)a[u]=e[u];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Dn(t){return t=t.childContextTypes,t!=null}function rl(){vt(Pn),vt(pn)}function Sp(t,e,n){if(pn.current!==hi)throw Error(ce(168));mt(pn,e),mt(Pn,n)}function zx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(ce(108,W3(t)||"Unknown",a));return Tt({},n,i)}function il(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,ki=pn.current,mt(pn,t),mt(Pn,Pn.current),!0}function bp(t,e,n){var i=t.stateNode;if(!i)throw Error(ce(169));n?(t=zx(t,e,ki),i.__reactInternalMemoizedMergedChildContext=t,vt(Pn),vt(pn),mt(pn,t)):vt(Pn),mt(Pn,n)}var Or=null,Pl=!1,Oc=!1;function Hx(t){Or===null?Or=[t]:Or.push(t)}function cE(t){Pl=!0,Hx(t)}function mi(){if(!Oc&&Or!==null){Oc=!0;var t=0,e=ct;try{var n=Or;for(ct=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Or=null,Pl=!1}catch(a){throw Or!==null&&(Or=Or.slice(t+1)),hx(E1,mi),a}finally{ct=e,Oc=!1}}return null}var us=[],fs=0,sl=null,ol=0,Yn=[],Zn=0,Pi=null,kr=1,Pr="";function Ai(t,e){us[fs++]=ol,us[fs++]=sl,sl=t,ol=e}function Vx(t,e,n){Yn[Zn++]=kr,Yn[Zn++]=Pr,Yn[Zn++]=Pi,Pi=t;var i=kr;t=Pr;var a=32-cr(i)-1;i&=~(1<<a),n+=1;var u=32-cr(e)+a;if(30<u){var d=a-a%5;u=(i&(1<<d)-1).toString(32),i>>=d,a-=d,kr=1<<32-cr(e)+a|n<<a|i,Pr=u+t}else kr=1<<u|n<<a|i,Pr=t}function k1(t){t.return!==null&&(Ai(t,1),Vx(t,1,0))}function P1(t){for(;t===sl;)sl=us[--fs],us[fs]=null,ol=us[--fs],us[fs]=null;for(;t===Pi;)Pi=Yn[--Zn],Yn[Zn]=null,Pr=Yn[--Zn],Yn[Zn]=null,kr=Yn[--Zn],Yn[Zn]=null}var Un=null,jn=null,_t=!1,lr=null;function qx(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,jn=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pi!==null?{id:kr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,jn=null,!0):!1;default:return!1}}function _h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eh(t){if(_t){var e=jn;if(e){var n=e;if(!Tp(t,e)){if(_h(t))throw Error(ce(418));e=si(n.nextSibling);var i=Un;e&&Tp(t,e)?qx(i,n):(t.flags=t.flags&-4097|2,_t=!1,Un=t)}}else{if(_h(t))throw Error(ce(418));t.flags=t.flags&-4097|2,_t=!1,Un=t}}}function Ip(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function ga(t){if(t!==Un)return!1;if(!_t)return Ip(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=jn)){if(_h(t))throw Gx(),Error(ce(418));for(;e;)qx(t,e),e=si(e.nextSibling)}if(Ip(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=Un?si(t.stateNode.nextSibling):null;return!0}function Gx(){for(var t=jn;t;)t=si(t.nextSibling)}function Ss(){jn=Un=null,_t=!1}function D1(t){lr===null?lr=[t]:lr.push(t)}var uE=jr.ReactCurrentBatchConfig;function Ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var i=n.stateNode}if(!i)throw Error(ce(147,t));var a=i,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(d){var g=a.refs;d===null?delete g[u]:g[u]=d},e._stringRef=u,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function ma(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rp(t){var e=t._init;return e(t._payload)}function Wx(t){function e(I,T){if(t){var R=I.deletions;R===null?(I.deletions=[T],I.flags|=16):R.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function i(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function a(I,T){return I=ci(I,T),I.index=0,I.sibling=null,I}function u(I,T,R){return I.index=R,t?(R=I.alternate,R!==null?(R=R.index,R<T?(I.flags|=2,T):R):(I.flags|=2,T)):(I.flags|=1048576,T)}function d(I){return t&&I.alternate===null&&(I.flags|=2),I}function g(I,T,R,P){return T===null||T.tag!==6?(T=Fc(R,I.mode,P),T.return=I,T):(T=a(T,R),T.return=I,T)}function y(I,T,R,P){var X=R.type;return X===is?C(I,T,R.props.children,P,R.key):T!==null&&(T.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Xr&&Rp(X)===T.type)?(P=a(T,R.props),P.ref=Ys(I,T,R),P.return=I,P):(P=Ma(R.type,R.key,R.props,null,I.mode,P),P.ref=Ys(I,T,R),P.return=I,P)}function m(I,T,R,P){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=jc(R,I.mode,P),T.return=I,T):(T=a(T,R.children||[]),T.return=I,T)}function C(I,T,R,P,X){return T===null||T.tag!==7?(T=Oi(R,I.mode,P,X),T.return=I,T):(T=a(T,R),T.return=I,T)}function v(I,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Fc(""+T,I.mode,R),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case sa:return R=Ma(T.type,T.key,T.props,null,I.mode,R),R.ref=Ys(I,null,T),R.return=I,R;case rs:return T=jc(T,I.mode,R),T.return=I,T;case Xr:var P=T._init;return v(I,P(T._payload),R)}if(no(T)||qs(T))return T=Oi(T,I.mode,R,null),T.return=I,T;ma(I,T)}return null}function S(I,T,R,P){var X=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return X!==null?null:g(I,T,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case sa:return R.key===X?y(I,T,R,P):null;case rs:return R.key===X?m(I,T,R,P):null;case Xr:return X=R._init,S(I,T,X(R._payload),P)}if(no(R)||qs(R))return X!==null?null:C(I,T,R,P,null);ma(I,R)}return null}function N(I,T,R,P,X){if(typeof P=="string"&&P!==""||typeof P=="number")return I=I.get(R)||null,g(T,I,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sa:return I=I.get(P.key===null?R:P.key)||null,y(T,I,P,X);case rs:return I=I.get(P.key===null?R:P.key)||null,m(T,I,P,X);case Xr:var V=P._init;return N(I,T,R,V(P._payload),X)}if(no(P)||qs(P))return I=I.get(R)||null,C(T,I,P,X,null);ma(T,P)}return null}function D(I,T,R,P){for(var X=null,V=null,F=T,$=T=0,H=null;F!==null&&$<R.length;$++){F.index>$?(H=F,F=null):H=F.sibling;var se=S(I,F,R[$],P);if(se===null){F===null&&(F=H);break}t&&F&&se.alternate===null&&e(I,F),T=u(se,T,$),V===null?X=se:V.sibling=se,V=se,F=H}if($===R.length)return n(I,F),_t&&Ai(I,$),X;if(F===null){for(;$<R.length;$++)F=v(I,R[$],P),F!==null&&(T=u(F,T,$),V===null?X=F:V.sibling=F,V=F);return _t&&Ai(I,$),X}for(F=i(I,F);$<R.length;$++)H=N(F,I,$,R[$],P),H!==null&&(t&&H.alternate!==null&&F.delete(H.key===null?$:H.key),T=u(H,T,$),V===null?X=H:V.sibling=H,V=H);return t&&F.forEach(function(ye){return e(I,ye)}),_t&&Ai(I,$),X}function M(I,T,R,P){var X=qs(R);if(typeof X!="function")throw Error(ce(150));if(R=X.call(R),R==null)throw Error(ce(151));for(var V=X=null,F=T,$=T=0,H=null,se=R.next();F!==null&&!se.done;$++,se=R.next()){F.index>$?(H=F,F=null):H=F.sibling;var ye=S(I,F,se.value,P);if(ye===null){F===null&&(F=H);break}t&&F&&ye.alternate===null&&e(I,F),T=u(ye,T,$),V===null?X=ye:V.sibling=ye,V=ye,F=H}if(se.done)return n(I,F),_t&&Ai(I,$),X;if(F===null){for(;!se.done;$++,se=R.next())se=v(I,se.value,P),se!==null&&(T=u(se,T,$),V===null?X=se:V.sibling=se,V=se);return _t&&Ai(I,$),X}for(F=i(I,F);!se.done;$++,se=R.next())se=N(F,I,$,se.value,P),se!==null&&(t&&se.alternate!==null&&F.delete(se.key===null?$:se.key),T=u(se,T,$),V===null?X=se:V.sibling=se,V=se);return t&&F.forEach(function(ee){return e(I,ee)}),_t&&Ai(I,$),X}function z(I,T,R,P){if(typeof R=="object"&&R!==null&&R.type===is&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case sa:e:{for(var X=R.key,V=T;V!==null;){if(V.key===X){if(X=R.type,X===is){if(V.tag===7){n(I,V.sibling),T=a(V,R.props.children),T.return=I,I=T;break e}}else if(V.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Xr&&Rp(X)===V.type){n(I,V.sibling),T=a(V,R.props),T.ref=Ys(I,V,R),T.return=I,I=T;break e}n(I,V);break}else e(I,V);V=V.sibling}R.type===is?(T=Oi(R.props.children,I.mode,P,R.key),T.return=I,I=T):(P=Ma(R.type,R.key,R.props,null,I.mode,P),P.ref=Ys(I,T,R),P.return=I,I=P)}return d(I);case rs:e:{for(V=R.key;T!==null;){if(T.key===V)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(I,T.sibling),T=a(T,R.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=jc(R,I.mode,P),T.return=I,I=T}return d(I);case Xr:return V=R._init,z(I,T,V(R._payload),P)}if(no(R))return D(I,T,R,P);if(qs(R))return M(I,T,R,P);ma(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,T!==null&&T.tag===6?(n(I,T.sibling),T=a(T,R),T.return=I,I=T):(n(I,T),T=Fc(R,I.mode,P),T.return=I,I=T),d(I)):n(I,T)}return z}var bs=Wx(!0),Kx=Wx(!1),al=gi(null),ll=null,ds=null,M1=null;function L1(){M1=ds=ll=null}function B1(t){var e=al.current;vt(al),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){ll=t,M1=ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(M1!==t)if(t={context:t,memoizedValue:e,next:null},ds===null){if(ll===null)throw Error(ce(308));ds=t,ll.dependencies={lanes:0,firstContext:t}}else ds=ds.next=t;return e}var Ii=null;function F1(t){Ii===null?Ii=[t]:Ii.push(t)}function Xx(t,e,n,i){var a=e.interleaved;return a===null?(n.next=n,F1(e)):(n.next=a.next,a.next=n),e.interleaved=n,Br(t,i)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function j1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,it&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Br(t,n)}return a=i.interleaved,a===null?(e.next=e,F1(i)):(e.next=a.next,a.next=e),i.interleaved=e,Br(t,n)}function Ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,A1(t,n)}}function Np(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?a=u=d:u=u.next=d,n=n.next}while(n!==null);u===null?a=u=e:u=u.next=e}else a=u=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cl(t,e,n,i){var a=t.updateQueue;Yr=!1;var u=a.firstBaseUpdate,d=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var y=g,m=y.next;y.next=null,d===null?u=m:d.next=m,d=y;var C=t.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==d&&(g===null?C.firstBaseUpdate=m:g.next=m,C.lastBaseUpdate=y))}if(u!==null){var v=a.baseState;d=0,C=m=y=null,g=u;do{var S=g.lane,N=g.eventTime;if((i&S)===S){C!==null&&(C=C.next={eventTime:N,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var D=t,M=g;switch(S=e,N=n,M.tag){case 1:if(D=M.payload,typeof D=="function"){v=D.call(N,v,S);break e}v=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=M.payload,S=typeof D=="function"?D.call(N,v,S):D,S==null)break e;v=Tt({},v,S);break e;case 2:Yr=!0}}g.callback!==null&&g.lane!==0&&(t.flags|=64,S=a.effects,S===null?a.effects=[g]:S.push(g))}else N={eventTime:N,lane:S,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(m=C=N,y=v):C=C.next=N,d|=S;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;S=g,g=S.next,S.next=null,a.lastBaseUpdate=S,a.shared.pending=null}}while(!0);if(C===null&&(y=v),a.baseState=y,a.firstBaseUpdate=m,a.lastBaseUpdate=C,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else u===null&&(a.shared.lanes=0);Mi|=d,t.lanes=d,t.memoizedState=v}}function Op(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(ce(191,a));a.call(i)}}}var qo={},Er=gi(qo),Po=gi(qo),Do=gi(qo);function Ri(t){if(t===qo)throw Error(ce(174));return t}function U1(t,e){switch(mt(Do,e),mt(Po,t),mt(Er,qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ih(e,t)}vt(Er),mt(Er,e)}function Ts(){vt(Er),vt(Po),vt(Do)}function Zx(t){Ri(Do.current);var e=Ri(Er.current),n=ih(e,t.type);e!==n&&(mt(Po,t),mt(Er,n))}function z1(t){Po.current===t&&(vt(Er),vt(Po))}var St=gi(0);function ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kc=[];function H1(){for(var t=0;t<kc.length;t++)kc[t]._workInProgressVersionPrimary=null;kc.length=0}var Na=jr.ReactCurrentDispatcher,Pc=jr.ReactCurrentBatchConfig,Di=0,bt=null,Wt=null,$t=null,fl=!1,mo=!1,Mo=0,fE=0;function cn(){throw Error(ce(321))}function V1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function q1(t,e,n,i,a,u){if(Di=u,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Na.current=t===null||t.memoizedState===null?gE:mE,t=n(i,a),mo){u=0;do{if(mo=!1,Mo=0,25<=u)throw Error(ce(301));u+=1,$t=Wt=null,e.updateQueue=null,Na.current=yE,t=n(i,a)}while(mo)}if(Na.current=dl,e=Wt!==null&&Wt.next!==null,Di=0,$t=Wt=bt=null,fl=!1,e)throw Error(ce(300));return t}function G1(){var t=Mo!==0;return Mo=0,t}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?bt.memoizedState=$t=t:$t=$t.next=t,$t}function tr(){if(Wt===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=$t===null?bt.memoizedState:$t.next;if(e!==null)$t=e,Wt=t;else{if(t===null)throw Error(ce(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},$t===null?bt.memoizedState=$t=t:$t=$t.next=t}return $t}function Lo(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=tr(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=Wt,a=i.baseQueue,u=n.pending;if(u!==null){if(a!==null){var d=a.next;a.next=u.next,u.next=d}i.baseQueue=a=u,n.pending=null}if(a!==null){u=a.next,i=i.baseState;var g=d=null,y=null,m=u;do{var C=m.lane;if((Di&C)===C)y!==null&&(y=y.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var v={lane:C,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};y===null?(g=y=v,d=i):y=y.next=v,bt.lanes|=C,Mi|=C}m=m.next}while(m!==null&&m!==u);y===null?d=i:y.next=g,fr(i,e.memoizedState)||(kn=!0),e.memoizedState=i,e.baseState=d,e.baseQueue=y,n.lastRenderedState=i}if(t=n.interleaved,t!==null){a=t;do u=a.lane,bt.lanes|=u,Mi|=u,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mc(t){var e=tr(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,u=e.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do u=t(u,d.action),d=d.next;while(d!==a);fr(u,e.memoizedState)||(kn=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,i]}function Qx(){}function $x(t,e){var n=bt,i=tr(),a=e(),u=!fr(i.memoizedState,a);if(u&&(i.memoizedState=a,kn=!0),i=i.queue,W1(tC.bind(null,n,i,t),[t]),i.getSnapshot!==e||u||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,Bo(9,eC.bind(null,n,i,a,e),void 0,null),Jt===null)throw Error(ce(349));Di&30||Jx(n,e,a)}return a}function Jx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eC(t,e,n,i){e.value=n,e.getSnapshot=i,nC(e)&&rC(t)}function tC(t,e,n){return n(function(){nC(e)&&rC(t)})}function nC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function rC(t){var e=Br(t,1);e!==null&&ur(e,t,1,-1)}function kp(t){var e=Cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},e.queue=t,t=t.dispatch=pE.bind(null,bt,t),[e.memoizedState,t]}function Bo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function iC(){return tr().memoizedState}function Oa(t,e,n,i){var a=Cr();bt.flags|=t,a.memoizedState=Bo(1|e,n,void 0,i===void 0?null:i)}function Dl(t,e,n,i){var a=tr();i=i===void 0?null:i;var u=void 0;if(Wt!==null){var d=Wt.memoizedState;if(u=d.destroy,i!==null&&V1(i,d.deps)){a.memoizedState=Bo(e,n,u,i);return}}bt.flags|=t,a.memoizedState=Bo(1|e,n,u,i)}function Pp(t,e){return Oa(8390656,8,t,e)}function W1(t,e){return Dl(2048,8,t,e)}function sC(t,e){return Dl(4,2,t,e)}function oC(t,e){return Dl(4,4,t,e)}function aC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lC(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4,4,aC.bind(null,e,t),n)}function K1(){}function cC(t,e){var n=tr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&V1(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function uC(t,e){var n=tr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&V1(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fC(t,e,n){return Di&21?(fr(n,e)||(n=mx(),bt.lanes|=n,Mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function dE(t,e){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var i=Pc.transition;Pc.transition={};try{t(!1),e()}finally{ct=n,Pc.transition=i}}function dC(){return tr().memoizedState}function hE(t,e,n){var i=li(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hC(t))pC(e,n);else if(n=Xx(t,e,n,i),n!==null){var a=Cn();ur(n,t,i,a),gC(n,e,i)}}function pE(t,e,n){var i=li(t),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hC(t))pC(e,a);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var d=e.lastRenderedState,g=u(d,n);if(a.hasEagerState=!0,a.eagerState=g,fr(g,d)){var y=e.interleaved;y===null?(a.next=a,F1(e)):(a.next=y.next,y.next=a),e.interleaved=a;return}}catch{}finally{}n=Xx(t,e,a,i),n!==null&&(a=Cn(),ur(n,t,i,a),gC(n,e,i))}}function hC(t){var e=t.alternate;return t===bt||e!==null&&e===bt}function pC(t,e){mo=fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gC(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,A1(t,n)}}var dl={readContext:er,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},gE={readContext:er,useCallback:function(t,e){return Cr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Pp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oa(4194308,4,aC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oa(4,2,t,e)},useMemo:function(t,e){var n=Cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Cr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=hE.bind(null,bt,t),[i.memoizedState,t]},useRef:function(t){var e=Cr();return t={current:t},e.memoizedState=t},useState:kp,useDebugValue:K1,useDeferredValue:function(t){return Cr().memoizedState=t},useTransition:function(){var t=kp(!1),e=t[0];return t=dE.bind(null,t[1]),Cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=bt,a=Cr();if(_t){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Jt===null)throw Error(ce(349));Di&30||Jx(i,e,n)}a.memoizedState=n;var u={value:n,getSnapshot:e};return a.queue=u,Pp(tC.bind(null,i,u,t),[t]),i.flags|=2048,Bo(9,eC.bind(null,i,u,n,e),void 0,null),n},useId:function(){var t=Cr(),e=Jt.identifierPrefix;if(_t){var n=Pr,i=kr;n=(i&~(1<<32-cr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mE={readContext:er,useCallback:cC,useContext:er,useEffect:W1,useImperativeHandle:lC,useInsertionEffect:sC,useLayoutEffect:oC,useMemo:uC,useReducer:Dc,useRef:iC,useState:function(){return Dc(Lo)},useDebugValue:K1,useDeferredValue:function(t){var e=tr();return fC(e,Wt.memoizedState,t)},useTransition:function(){var t=Dc(Lo)[0],e=tr().memoizedState;return[t,e]},useMutableSource:Qx,useSyncExternalStore:$x,useId:dC,unstable_isNewReconciler:!1},yE={readContext:er,useCallback:cC,useContext:er,useEffect:W1,useImperativeHandle:lC,useInsertionEffect:sC,useLayoutEffect:oC,useMemo:uC,useReducer:Mc,useRef:iC,useState:function(){return Mc(Lo)},useDebugValue:K1,useDeferredValue:function(t){var e=tr();return Wt===null?e.memoizedState=t:fC(e,Wt.memoizedState,t)},useTransition:function(){var t=Mc(Lo)[0],e=tr().memoizedState;return[t,e]},useMutableSource:Qx,useSyncExternalStore:$x,useId:dC,unstable_isNewReconciler:!1};function sr(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ml={isMounted:function(t){return(t=t._reactInternals)?ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Cn(),a=li(t),u=Dr(i,a);u.payload=e,n!=null&&(u.callback=n),e=oi(t,u,a),e!==null&&(ur(e,t,a,i),Ra(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Cn(),a=li(t),u=Dr(i,a);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=oi(t,u,a),e!==null&&(ur(e,t,a,i),Ra(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),i=li(t),a=Dr(n,i);a.tag=2,e!=null&&(a.callback=e),e=oi(t,a,i),e!==null&&(ur(e,t,i,n),Ra(e,t,i))}};function Dp(t,e,n,i,a,u,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,u,d):e.prototype&&e.prototype.isPureReactComponent?!Ro(n,i)||!Ro(a,u):!0}function mC(t,e,n){var i=!1,a=hi,u=e.contextType;return typeof u=="object"&&u!==null?u=er(u):(a=Dn(e)?ki:pn.current,i=e.contextTypes,u=(i=i!=null)?As(t,a):hi),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ml,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=u),e}function Mp(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ml.enqueueReplaceState(e,e.state,null)}function bh(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},j1(t);var u=e.contextType;typeof u=="object"&&u!==null?a.context=er(u):(u=Dn(e)?ki:pn.current,a.context=As(t,u)),a.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(Sh(t,e,u,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ml.enqueueReplaceState(a,a.state,null),cl(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Is(t,e){try{var n="",i=e;do n+=G3(i),i=i.return;while(i);var a=n}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:a,digest:null}}function Lc(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Th(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xE=typeof WeakMap=="function"?WeakMap:Map;function yC(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pl||(pl=!0,Bh=i),Th(t,e)},n}function xC(t,e,n){n=Dr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return i(a)},n.callback=function(){Th(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Th(t,e),typeof i!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function Lp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new xE;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(a.add(n),t=kE.bind(null,t,e,n),e.then(t,t))}function Bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fp(t,e,n,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,oi(n,e,1))),n.lanes|=1),t)}var CE=jr.ReactCurrentOwner,kn=!1;function xn(t,e,n,i){e.child=t===null?Kx(e,null,n,i):bs(e,t.child,n,i)}function jp(t,e,n,i,a){n=n.render;var u=e.ref;return vs(e,a),i=q1(t,e,n,i,u,a),n=G1(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Fr(t,e,a)):(_t&&n&&k1(e),e.flags|=1,xn(t,e,i,a),e.child)}function Up(t,e,n,i,a){if(t===null){var u=n.type;return typeof u=="function"&&!t0(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,CC(t,e,u,i,a)):(t=Ma(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&a)){var d=u.memoizedProps;if(n=n.compare,n=n!==null?n:Ro,n(d,i)&&t.ref===e.ref)return Fr(t,e,a)}return e.flags|=1,t=ci(u,i),t.ref=e.ref,t.return=e,e.child=t}function CC(t,e,n,i,a){if(t!==null){var u=t.memoizedProps;if(Ro(u,i)&&t.ref===e.ref)if(kn=!1,e.pendingProps=i=u,(t.lanes&a)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Fr(t,e,a)}return Ih(t,e,n,i,a)}function vC(t,e,n){var i=e.pendingProps,a=i.children,u=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(ps,Fn),Fn|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(ps,Fn),Fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,mt(ps,Fn),Fn|=i}else u!==null?(i=u.baseLanes|n,e.memoizedState=null):i=n,mt(ps,Fn),Fn|=i;return xn(t,e,a,n),e.child}function wC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ih(t,e,n,i,a){var u=Dn(n)?ki:pn.current;return u=As(e,u),vs(e,a),n=q1(t,e,n,i,u,a),i=G1(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Fr(t,e,a)):(_t&&i&&k1(e),e.flags|=1,xn(t,e,n,a),e.child)}function zp(t,e,n,i,a){if(Dn(n)){var u=!0;il(e)}else u=!1;if(vs(e,a),e.stateNode===null)ka(t,e),mC(e,n,i),bh(e,n,i,a),i=!0;else if(t===null){var d=e.stateNode,g=e.memoizedProps;d.props=g;var y=d.context,m=n.contextType;typeof m=="object"&&m!==null?m=er(m):(m=Dn(n)?ki:pn.current,m=As(e,m));var C=n.getDerivedStateFromProps,v=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function";v||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==i||y!==m)&&Mp(e,d,i,m),Yr=!1;var S=e.memoizedState;d.state=S,cl(e,i,d,a),y=e.memoizedState,g!==i||S!==y||Pn.current||Yr?(typeof C=="function"&&(Sh(e,n,C,i),y=e.memoizedState),(g=Yr||Dp(e,n,g,i,S,y,m))?(v||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=y),d.props=i,d.state=y,d.context=m,i=g):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{d=e.stateNode,Yx(t,e),g=e.memoizedProps,m=e.type===e.elementType?g:sr(e.type,g),d.props=m,v=e.pendingProps,S=d.context,y=n.contextType,typeof y=="object"&&y!==null?y=er(y):(y=Dn(n)?ki:pn.current,y=As(e,y));var N=n.getDerivedStateFromProps;(C=typeof N=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==v||S!==y)&&Mp(e,d,i,y),Yr=!1,S=e.memoizedState,d.state=S,cl(e,i,d,a);var D=e.memoizedState;g!==v||S!==D||Pn.current||Yr?(typeof N=="function"&&(Sh(e,n,N,i),D=e.memoizedState),(m=Yr||Dp(e,n,m,i,S,D,y)||!1)?(C||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,D,y),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,D,y)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),d.props=i,d.state=D,d.context=y,i=m):(typeof d.componentDidUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return Rh(t,e,n,i,u,a)}function Rh(t,e,n,i,a,u){wC(t,e);var d=(e.flags&128)!==0;if(!i&&!d)return a&&bp(e,n,!1),Fr(t,e,u);i=e.stateNode,CE.current=e;var g=d&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&d?(e.child=bs(e,t.child,null,u),e.child=bs(e,null,g,u)):xn(t,e,g,u),e.memoizedState=i.state,a&&bp(e,n,!0),e.child}function _C(t){var e=t.stateNode;e.pendingContext?Sp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sp(t,e.context,!1),U1(t,e.containerInfo)}function Hp(t,e,n,i,a){return Ss(),D1(a),e.flags|=256,xn(t,e,n,i),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Oh(t){return{baseLanes:t,cachePool:null,transitions:null}}function EC(t,e,n){var i=e.pendingProps,a=St.current,u=!1,d=(e.flags&128)!==0,g;if((g=d)||(g=t!==null&&t.memoizedState===null?!1:(a&2)!==0),g?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),mt(St,a&1),t===null)return Eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=i.children,t=i.fallback,u?(i=e.mode,u=e.child,d={mode:"hidden",children:d},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=Fl(d,i,0,null),t=Oi(t,i,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=Oh(n),e.memoizedState=Nh,t):X1(e,d));if(a=t.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return vE(t,e,d,i,g,a,n);if(u){u=i.fallback,d=e.mode,a=t.child,g=a.sibling;var y={mode:"hidden",children:i.children};return!(d&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=y,e.deletions=null):(i=ci(a,y),i.subtreeFlags=a.subtreeFlags&14680064),g!==null?u=ci(g,u):(u=Oi(u,d,n,null),u.flags|=2),u.return=e,i.return=e,i.sibling=u,e.child=i,i=u,u=e.child,d=t.child.memoizedState,d=d===null?Oh(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=t.childLanes&~n,e.memoizedState=Nh,i}return u=t.child,t=u.sibling,i=ci(u,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function X1(t,e){return e=Fl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ya(t,e,n,i){return i!==null&&D1(i),bs(e,t.child,null,n),t=X1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vE(t,e,n,i,a,u,d){if(n)return e.flags&256?(e.flags&=-257,i=Lc(Error(ce(422))),ya(t,e,d,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=i.fallback,a=e.mode,i=Fl({mode:"visible",children:i.children},a,0,null),u=Oi(u,a,d,null),u.flags|=2,i.return=e,u.return=e,i.sibling=u,e.child=i,e.mode&1&&bs(e,t.child,null,d),e.child.memoizedState=Oh(d),e.memoizedState=Nh,u);if(!(e.mode&1))return ya(t,e,d,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var g=i.dgst;return i=g,u=Error(ce(419)),i=Lc(u,i,void 0),ya(t,e,d,i)}if(g=(d&t.childLanes)!==0,kn||g){if(i=Jt,i!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|d)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Br(t,a),ur(i,t,a,-1))}return e0(),i=Lc(Error(ce(421))),ya(t,e,d,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=PE.bind(null,t),a._reactRetry=e,null):(t=u.treeContext,jn=si(a.nextSibling),Un=e,_t=!0,lr=null,t!==null&&(Yn[Zn++]=kr,Yn[Zn++]=Pr,Yn[Zn++]=Pi,kr=t.id,Pr=t.overflow,Pi=e),e=X1(e,i.children),e.flags|=4096,e)}function Vp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ah(t.return,e,n)}function Bc(t,e,n,i,a){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=a)}function AC(t,e,n){var i=e.pendingProps,a=i.revealOrder,u=i.tail;if(xn(t,e,i.children,n),i=St.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vp(t,n,e);else if(t.tag===19)Vp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(mt(St,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ul(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Bc(e,!1,a,n,u);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ul(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Bc(e,!0,n,null,u);break;case"together":Bc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ka(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wE(t,e,n){switch(e.tag){case 3:_C(e),Ss();break;case 5:Zx(e);break;case 1:Dn(e.type)&&il(e);break;case 4:U1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;mt(al,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(mt(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?EC(t,e,n):(mt(St,St.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);mt(St,St.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return AC(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),mt(St,St.current),i)break;return null;case 22:case 23:return e.lanes=0,vC(t,e,n)}return Fr(t,e,n)}var SC,kh,bC,TC;SC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kh=function(){};bC=function(t,e,n,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,Ri(Er.current);var u=null;switch(n){case"input":a=eh(t,a),i=eh(t,i),u=[];break;case"select":a=Tt({},a,{value:void 0}),i=Tt({},i,{value:void 0}),u=[];break;case"textarea":a=rh(t,a),i=rh(t,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nl)}sh(n,i);var d;n=null;for(m in a)if(!i.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var g=a[m];for(d in g)g.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(_o.hasOwnProperty(m)?u||(u=[]):(u=u||[]).push(m,null));for(m in i){var y=i[m];if(g=a!=null?a[m]:void 0,i.hasOwnProperty(m)&&y!==g&&(y!=null||g!=null))if(m==="style")if(g){for(d in g)!g.hasOwnProperty(d)||y&&y.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in y)y.hasOwnProperty(d)&&g[d]!==y[d]&&(n||(n={}),n[d]=y[d])}else n||(u||(u=[]),u.push(m,n)),n=y;else m==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,g=g?g.__html:void 0,y!=null&&g!==y&&(u=u||[]).push(m,y)):m==="children"?typeof y!="string"&&typeof y!="number"||(u=u||[]).push(m,""+y):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(_o.hasOwnProperty(m)?(y!=null&&m==="onScroll"&&Ct("scroll",t),u||g===y||(u=[])):(u=u||[]).push(m,y))}n&&(u=u||[]).push("style",n);var m=u;(e.updateQueue=m)&&(e.flags|=4)}};TC=function(t,e,n,i){n!==i&&(e.flags|=4)};function Zs(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function _E(t,e,n){var i=e.pendingProps;switch(P1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Dn(e.type)&&rl(),un(e),null;case 3:return i=e.stateNode,Ts(),vt(Pn),vt(pn),H1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ga(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lr!==null&&(Uh(lr),lr=null))),kh(t,e),un(e),null;case 5:z1(e);var a=Ri(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)bC(t,e,n,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ce(166));return un(e),null}if(t=Ri(Er.current),ga(e)){i=e.stateNode,n=e.type;var u=e.memoizedProps;switch(i[wr]=e,i[ko]=u,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(a=0;a<io.length;a++)Ct(io[a],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":$0(i,u),Ct("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Ct("invalid",i);break;case"textarea":ep(i,u),Ct("invalid",i)}sh(n,u),a=null;for(var d in u)if(u.hasOwnProperty(d)){var g=u[d];d==="children"?typeof g=="string"?i.textContent!==g&&(u.suppressHydrationWarning!==!0&&pa(i.textContent,g,t),a=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(u.suppressHydrationWarning!==!0&&pa(i.textContent,g,t),a=["children",""+g]):_o.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&Ct("scroll",i)}switch(n){case"input":oa(i),J0(i,u,!0);break;case"textarea":oa(i),tp(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=nl)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=d.createElement(n,{is:i.is}):(t=d.createElement(n),n==="select"&&(d=t,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):t=d.createElementNS(t,n),t[wr]=e,t[ko]=i,SC(t,e,!1,!1),e.stateNode=t;e:{switch(d=oh(n,i),n){case"dialog":Ct("cancel",t),Ct("close",t),a=i;break;case"iframe":case"object":case"embed":Ct("load",t),a=i;break;case"video":case"audio":for(a=0;a<io.length;a++)Ct(io[a],t);a=i;break;case"source":Ct("error",t),a=i;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),a=i;break;case"details":Ct("toggle",t),a=i;break;case"input":$0(t,i),a=eh(t,i),Ct("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=Tt({},i,{value:void 0}),Ct("invalid",t);break;case"textarea":ep(t,i),a=rh(t,i),Ct("invalid",t);break;default:a=i}sh(n,a),g=a;for(u in g)if(g.hasOwnProperty(u)){var y=g[u];u==="style"?ix(t,y):u==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&nx(t,y)):u==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&Eo(t,y):typeof y=="number"&&Eo(t,""+y):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_o.hasOwnProperty(u)?y!=null&&u==="onScroll"&&Ct("scroll",t):y!=null&&x1(t,u,y,d))}switch(n){case"input":oa(t),J0(t,i,!1);break;case"textarea":oa(t),tp(t);break;case"option":i.value!=null&&t.setAttribute("value",""+di(i.value));break;case"select":t.multiple=!!i.multiple,u=i.value,u!=null?ms(t,!!i.multiple,u,!1):i.defaultValue!=null&&ms(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=nl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)TC(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Ri(Do.current),Ri(Er.current),ga(e)){if(i=e.stateNode,n=e.memoizedProps,i[wr]=e,(u=i.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:pa(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pa(i.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wr]=e,e.stateNode=i}return un(e),null;case 13:if(vt(St),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&jn!==null&&e.mode&1&&!(e.flags&128))Gx(),Ss(),e.flags|=98560,u=!1;else if(u=ga(e),i!==null&&i.dehydrated!==null){if(t===null){if(!u)throw Error(ce(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(ce(317));u[wr]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),u=!1}else lr!==null&&(Uh(lr),lr=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?Kt===0&&(Kt=3):e0())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return Ts(),kh(t,e),t===null&&No(e.stateNode.containerInfo),un(e),null;case 10:return B1(e.type._context),un(e),null;case 17:return Dn(e.type)&&rl(),un(e),null;case 19:if(vt(St),u=e.memoizedState,u===null)return un(e),null;if(i=(e.flags&128)!==0,d=u.rendering,d===null)if(i)Zs(u,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=ul(t),d!==null){for(e.flags|=128,Zs(u,!1),i=d.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)u=n,t=i,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,t=d.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(St,St.current&1|2),e.child}t=t.sibling}u.tail!==null&&Bt()>Rs&&(e.flags|=128,i=!0,Zs(u,!1),e.lanes=4194304)}else{if(!i)if(t=ul(d),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!_t)return un(e),null}else 2*Bt()-u.renderingStartTime>Rs&&n!==1073741824&&(e.flags|=128,i=!0,Zs(u,!1),e.lanes=4194304);u.isBackwards?(d.sibling=e.child,e.child=d):(n=u.last,n!==null?n.sibling=d:e.child=d,u.last=d)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Bt(),e.sibling=null,n=St.current,mt(St,i?n&1|2:n&1),e):(un(e),null);case 22:case 23:return J1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Fn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function EE(t,e){switch(P1(e),e.tag){case 1:return Dn(e.type)&&rl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ts(),vt(Pn),vt(pn),H1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return z1(e),null;case 13:if(vt(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(St),null;case 4:return Ts(),null;case 10:return B1(e.type._context),null;case 22:case 23:return J1(),null;case 24:return null;default:return null}}var xa=!1,hn=!1,AE=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){kt(t,e,i)}else n.current=null}function Ph(t,e,n){try{n()}catch(i){kt(t,e,i)}}var qp=!1;function SE(t,e){if(mh=Ja,t=kx(),O1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var d=0,g=-1,y=-1,m=0,C=0,v=t,S=null;t:for(;;){for(var N;v!==n||a!==0&&v.nodeType!==3||(g=d+a),v!==u||i!==0&&v.nodeType!==3||(y=d+i),v.nodeType===3&&(d+=v.nodeValue.length),(N=v.firstChild)!==null;)S=v,v=N;for(;;){if(v===t)break t;if(S===n&&++m===a&&(g=d),S===u&&++C===i&&(y=d),(N=v.nextSibling)!==null)break;v=S,S=v.parentNode}v=N}n=g===-1||y===-1?null:{start:g,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(yh={focusedElem:t,selectionRange:n},Ja=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var M=D.memoizedProps,z=D.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?M:sr(e.type,M),z);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(P){kt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return D=qp,qp=!1,D}function yo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var u=a.destroy;a.destroy=void 0,u!==void 0&&Ph(e,n,u)}a=a.next}while(a!==i)}}function Ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IC(t){var e=t.alternate;e!==null&&(t.alternate=null,IC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wr],delete e[ko],delete e[vh],delete e[aE],delete e[lE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RC(t){return t.tag===5||t.tag===3||t.tag===4}function Gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nl));else if(i!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}function Lh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}var sn=null,or=!1;function Kr(t,e,n){for(n=n.child;n!==null;)NC(t,e,n),n=n.sibling}function NC(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Il,n)}catch{}switch(n.tag){case 5:hn||hs(n,e);case 6:var i=sn,a=or;sn=null,Kr(t,e,n),sn=i,or=a,sn!==null&&(or?(t=sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(or?(t=sn,n=n.stateNode,t.nodeType===8?Nc(t.parentNode,n):t.nodeType===1&&Nc(t,n),To(t)):Nc(sn,n.stateNode));break;case 4:i=sn,a=or,sn=n.stateNode.containerInfo,or=!0,Kr(t,e,n),sn=i,or=a;break;case 0:case 11:case 14:case 15:if(!hn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&Ph(n,e,d),a=a.next}while(a!==i)}Kr(t,e,n);break;case 1:if(!hn&&(hs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(g){kt(n,e,g)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(hn=(i=hn)||n.memoizedState!==null,Kr(t,e,n),hn=i):Kr(t,e,n);break;default:Kr(t,e,n)}}function Wp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AE),e.forEach(function(i){var a=DE.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}function ir(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var u=t,d=e,g=d;e:for(;g!==null;){switch(g.tag){case 5:sn=g.stateNode,or=!1;break e;case 3:sn=g.stateNode.containerInfo,or=!0;break e;case 4:sn=g.stateNode.containerInfo,or=!0;break e}g=g.return}if(sn===null)throw Error(ce(160));NC(u,d,a),sn=null,or=!1;var y=a.alternate;y!==null&&(y.return=null),a.return=null}catch(m){kt(a,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OC(e,t),e=e.sibling}function OC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ir(e,t),xr(t),i&4){try{yo(3,t,t.return),Ll(3,t)}catch(M){kt(t,t.return,M)}try{yo(5,t,t.return)}catch(M){kt(t,t.return,M)}}break;case 1:ir(e,t),xr(t),i&512&&n!==null&&hs(n,n.return);break;case 5:if(ir(e,t),xr(t),i&512&&n!==null&&hs(n,n.return),t.flags&32){var a=t.stateNode;try{Eo(a,"")}catch(M){kt(t,t.return,M)}}if(i&4&&(a=t.stateNode,a!=null)){var u=t.memoizedProps,d=n!==null?n.memoizedProps:u,g=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{g==="input"&&u.type==="radio"&&u.name!=null&&Jy(a,u),oh(g,d);var m=oh(g,u);for(d=0;d<y.length;d+=2){var C=y[d],v=y[d+1];C==="style"?ix(a,v):C==="dangerouslySetInnerHTML"?nx(a,v):C==="children"?Eo(a,v):x1(a,C,v,m)}switch(g){case"input":th(a,u);break;case"textarea":ex(a,u);break;case"select":var S=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var N=u.value;N!=null?ms(a,!!u.multiple,N,!1):S!==!!u.multiple&&(u.defaultValue!=null?ms(a,!!u.multiple,u.defaultValue,!0):ms(a,!!u.multiple,u.multiple?[]:"",!1))}a[ko]=u}catch(M){kt(t,t.return,M)}}break;case 6:if(ir(e,t),xr(t),i&4){if(t.stateNode===null)throw Error(ce(162));a=t.stateNode,u=t.memoizedProps;try{a.nodeValue=u}catch(M){kt(t,t.return,M)}}break;case 3:if(ir(e,t),xr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(M){kt(t,t.return,M)}break;case 4:ir(e,t),xr(t);break;case 13:ir(e,t),xr(t),a=t.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(Q1=Bt())),i&4&&Wp(t);break;case 22:if(C=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(m=hn)||C,ir(e,t),hn=m):ir(e,t),xr(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!C&&t.mode&1)for(Ae=t,C=t.child;C!==null;){for(v=Ae=C;Ae!==null;){switch(S=Ae,N=S.child,S.tag){case 0:case 11:case 14:case 15:yo(4,S,S.return);break;case 1:hs(S,S.return);var D=S.stateNode;if(typeof D.componentWillUnmount=="function"){i=S,n=S.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(M){kt(i,n,M)}}break;case 5:hs(S,S.return);break;case 22:if(S.memoizedState!==null){Xp(v);continue}}N!==null?(N.return=S,Ae=N):Xp(v)}C=C.sibling}e:for(C=null,v=t;;){if(v.tag===5){if(C===null){C=v;try{a=v.stateNode,m?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(g=v.stateNode,y=v.memoizedProps.style,d=y!=null&&y.hasOwnProperty("display")?y.display:null,g.style.display=rx("display",d))}catch(M){kt(t,t.return,M)}}}else if(v.tag===6){if(C===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(M){kt(t,t.return,M)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;C===v&&(C=null),v=v.return}C===v&&(C=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:ir(e,t),xr(t),i&4&&Wp(t);break;case 21:break;default:ir(e,t),xr(t)}}function xr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RC(n)){var i=n;break e}n=n.return}throw Error(ce(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Eo(a,""),i.flags&=-33);var u=Gp(t);Lh(t,u,a);break;case 3:case 4:var d=i.stateNode.containerInfo,g=Gp(t);Mh(t,g,d);break;default:throw Error(ce(161))}}catch(y){kt(t,t.return,y)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bE(t,e,n){Ae=t,kC(t)}function kC(t,e,n){for(var i=(t.mode&1)!==0;Ae!==null;){var a=Ae,u=a.child;if(a.tag===22&&i){var d=a.memoizedState!==null||xa;if(!d){var g=a.alternate,y=g!==null&&g.memoizedState!==null||hn;g=xa;var m=hn;if(xa=d,(hn=y)&&!m)for(Ae=a;Ae!==null;)d=Ae,y=d.child,d.tag===22&&d.memoizedState!==null?Yp(a):y!==null?(y.return=d,Ae=y):Yp(a);for(;u!==null;)Ae=u,kC(u),u=u.sibling;Ae=a,xa=g,hn=m}Kp(t)}else a.subtreeFlags&8772&&u!==null?(u.return=a,Ae=u):Kp(t)}}function Kp(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Ll(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!hn)if(n===null)i.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:sr(e.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&Op(e,u,i);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Op(e,d,n)}break;case 5:var g=e.stateNode;if(n===null&&e.flags&4){n=g;var y=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var C=m.memoizedState;if(C!==null){var v=C.dehydrated;v!==null&&To(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}hn||e.flags&512&&Dh(e)}catch(S){kt(e,e.return,S)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function Xp(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function Yp(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ll(4,e)}catch(y){kt(e,n,y)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(y){kt(e,a,y)}}var u=e.return;try{Dh(e)}catch(y){kt(e,u,y)}break;case 5:var d=e.return;try{Dh(e)}catch(y){kt(e,d,y)}}}catch(y){kt(e,e.return,y)}if(e===t){Ae=null;break}var g=e.sibling;if(g!==null){g.return=e.return,Ae=g;break}Ae=e.return}}var TE=Math.ceil,hl=jr.ReactCurrentDispatcher,Y1=jr.ReactCurrentOwner,Jn=jr.ReactCurrentBatchConfig,it=0,Jt=null,zt=null,on=0,Fn=0,ps=gi(0),Kt=0,Fo=null,Mi=0,Bl=0,Z1=0,xo=null,On=null,Q1=0,Rs=1/0,Nr=null,pl=!1,Bh=null,ai=null,Ca=!1,ei=null,gl=0,Co=0,Fh=null,Pa=-1,Da=0;function Cn(){return it&6?Bt():Pa!==-1?Pa:Pa=Bt()}function li(t){return t.mode&1?it&2&&on!==0?on&-on:uE.transition!==null?(Da===0&&(Da=mx()),Da):(t=ct,t!==0||(t=window.event,t=t===void 0?16:Ex(t.type)),t):1}function ur(t,e,n,i){if(50<Co)throw Co=0,Fh=null,Error(ce(185));zo(t,n,i),(!(it&2)||t!==Jt)&&(t===Jt&&(!(it&2)&&(Bl|=n),Kt===4&&Qr(t,on)),Mn(t,i),n===1&&it===0&&!(e.mode&1)&&(Rs=Bt()+500,Pl&&mi()))}function Mn(t,e){var n=t.callbackNode;u_(t,e);var i=$a(t,t===Jt?on:0);if(i===0)n!==null&&ip(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&ip(n),e===1)t.tag===0?cE(Zp.bind(null,t)):Hx(Zp.bind(null,t)),sE(function(){!(it&6)&&mi()}),n=null;else{switch(yx(i)){case 1:n=E1;break;case 4:n=px;break;case 16:n=Qa;break;case 536870912:n=gx;break;default:n=Qa}n=UC(n,PC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PC(t,e){if(Pa=-1,Da=0,it&6)throw Error(ce(327));var n=t.callbackNode;if(ws()&&t.callbackNode!==n)return null;var i=$a(t,t===Jt?on:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ml(t,i);else{e=i;var a=it;it|=2;var u=MC();(Jt!==t||on!==e)&&(Nr=null,Rs=Bt()+500,Ni(t,e));do try{NE();break}catch(g){DC(t,g)}while(!0);L1(),hl.current=u,it=a,zt!==null?e=0:(Jt=null,on=0,e=Kt)}if(e!==0){if(e===2&&(a=fh(t),a!==0&&(i=a,e=jh(t,a))),e===1)throw n=Fo,Ni(t,0),Qr(t,i),Mn(t,Bt()),n;if(e===6)Qr(t,i);else{if(a=t.current.alternate,!(i&30)&&!IE(a)&&(e=ml(t,i),e===2&&(u=fh(t),u!==0&&(i=u,e=jh(t,u))),e===1))throw n=Fo,Ni(t,0),Qr(t,i),Mn(t,Bt()),n;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(ce(345));case 2:Si(t,On,Nr);break;case 3:if(Qr(t,i),(i&130023424)===i&&(e=Q1+500-Bt(),10<e)){if($a(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){Cn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Ch(Si.bind(null,t,On,Nr),e);break}Si(t,On,Nr);break;case 4:if(Qr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var d=31-cr(i);u=1<<d,d=e[d],d>a&&(a=d),i&=~u}if(i=a,i=Bt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*TE(i/1960))-i,10<i){t.timeoutHandle=Ch(Si.bind(null,t,On,Nr),i);break}Si(t,On,Nr);break;case 5:Si(t,On,Nr);break;default:throw Error(ce(329))}}}return Mn(t,Bt()),t.callbackNode===n?PC.bind(null,t):null}function jh(t,e){var n=xo;return t.current.memoizedState.isDehydrated&&(Ni(t,e).flags|=256),t=ml(t,e),t!==2&&(e=On,On=n,e!==null&&Uh(e)),t}function Uh(t){On===null?On=t:On.push.apply(On,t)}function IE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],u=a.getSnapshot;a=a.value;try{if(!fr(u(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Z1,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cr(e),i=1<<n;t[n]=-1,e&=~i}}function Zp(t){if(it&6)throw Error(ce(327));ws();var e=$a(t,0);if(!(e&1))return Mn(t,Bt()),null;var n=ml(t,e);if(t.tag!==0&&n===2){var i=fh(t);i!==0&&(e=i,n=jh(t,i))}if(n===1)throw n=Fo,Ni(t,0),Qr(t,e),Mn(t,Bt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Si(t,On,Nr),Mn(t,Bt()),null}function $1(t,e){var n=it;it|=1;try{return t(e)}finally{it=n,it===0&&(Rs=Bt()+500,Pl&&mi())}}function Li(t){ei!==null&&ei.tag===0&&!(it&6)&&ws();var e=it;it|=1;var n=Jn.transition,i=ct;try{if(Jn.transition=null,ct=1,t)return t()}finally{ct=i,Jn.transition=n,it=e,!(it&6)&&mi()}}function J1(){Fn=ps.current,vt(ps)}function Ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iE(n)),zt!==null)for(n=zt.return;n!==null;){var i=n;switch(P1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rl();break;case 3:Ts(),vt(Pn),vt(pn),H1();break;case 5:z1(i);break;case 4:Ts();break;case 13:vt(St);break;case 19:vt(St);break;case 10:B1(i.type._context);break;case 22:case 23:J1()}n=n.return}if(Jt=t,zt=t=ci(t.current,null),on=Fn=e,Kt=0,Fo=null,Z1=Bl=Mi=0,On=xo=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,u=n.pending;if(u!==null){var d=u.next;u.next=a,i.next=d}n.pending=i}Ii=null}return t}function DC(t,e){do{var n=zt;try{if(L1(),Na.current=dl,fl){for(var i=bt.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}fl=!1}if(Di=0,$t=Wt=bt=null,mo=!1,Mo=0,Y1.current=null,n===null||n.return===null){Kt=1,Fo=e,zt=null;break}e:{var u=t,d=n.return,g=n,y=e;if(e=on,g.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var m=y,C=g,v=C.tag;if(!(C.mode&1)&&(v===0||v===11||v===15)){var S=C.alternate;S?(C.updateQueue=S.updateQueue,C.memoizedState=S.memoizedState,C.lanes=S.lanes):(C.updateQueue=null,C.memoizedState=null)}var N=Bp(d);if(N!==null){N.flags&=-257,Fp(N,d,g,u,e),N.mode&1&&Lp(u,m,e),e=N,y=m;var D=e.updateQueue;if(D===null){var M=new Set;M.add(y),e.updateQueue=M}else D.add(y);break e}else{if(!(e&1)){Lp(u,m,e),e0();break e}y=Error(ce(426))}}else if(_t&&g.mode&1){var z=Bp(d);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Fp(z,d,g,u,e),D1(Is(y,g));break e}}u=y=Is(y,g),Kt!==4&&(Kt=2),xo===null?xo=[u]:xo.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var I=yC(u,y,e);Np(u,I);break e;case 1:g=y;var T=u.type,R=u.stateNode;if(!(u.flags&128)&&(typeof T.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ai===null||!ai.has(R)))){u.flags|=65536,e&=-e,u.lanes|=e;var P=xC(u,g,e);Np(u,P);break e}}u=u.return}while(u!==null)}BC(n)}catch(X){e=X,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function MC(){var t=hl.current;return hl.current=dl,t===null?dl:t}function e0(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),Jt===null||!(Mi&268435455)&&!(Bl&268435455)||Qr(Jt,on)}function ml(t,e){var n=it;it|=2;var i=MC();(Jt!==t||on!==e)&&(Nr=null,Ni(t,e));do try{RE();break}catch(a){DC(t,a)}while(!0);if(L1(),it=n,hl.current=i,zt!==null)throw Error(ce(261));return Jt=null,on=0,Kt}function RE(){for(;zt!==null;)LC(zt)}function NE(){for(;zt!==null&&!t_();)LC(zt)}function LC(t){var e=jC(t.alternate,t,Fn);t.memoizedProps=t.pendingProps,e===null?BC(t):zt=e,Y1.current=null}function BC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EE(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,zt=null;return}}else if(n=_E(n,e,Fn),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Kt===0&&(Kt=5)}function Si(t,e,n){var i=ct,a=Jn.transition;try{Jn.transition=null,ct=1,OE(t,e,n,i)}finally{Jn.transition=a,ct=i}return null}function OE(t,e,n,i){do ws();while(ei!==null);if(it&6)throw Error(ce(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(f_(t,u),t===Jt&&(zt=Jt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ca||(Ca=!0,UC(Qa,function(){return ws(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Jn.transition,Jn.transition=null;var d=ct;ct=1;var g=it;it|=4,Y1.current=null,SE(t,n),OC(n,t),Q_(yh),Ja=!!mh,yh=mh=null,t.current=n,bE(n),n_(),it=g,ct=d,Jn.transition=u}else t.current=n;if(Ca&&(Ca=!1,ei=t,gl=a),u=t.pendingLanes,u===0&&(ai=null),s_(n.stateNode),Mn(t,Bt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(pl)throw pl=!1,t=Bh,Bh=null,t;return gl&1&&t.tag!==0&&ws(),u=t.pendingLanes,u&1?t===Fh?Co++:(Co=0,Fh=t):Co=0,mi(),null}function ws(){if(ei!==null){var t=yx(gl),e=Jn.transition,n=ct;try{if(Jn.transition=null,ct=16>t?16:t,ei===null)var i=!1;else{if(t=ei,ei=null,gl=0,it&6)throw Error(ce(331));var a=it;for(it|=4,Ae=t.current;Ae!==null;){var u=Ae,d=u.child;if(Ae.flags&16){var g=u.deletions;if(g!==null){for(var y=0;y<g.length;y++){var m=g[y];for(Ae=m;Ae!==null;){var C=Ae;switch(C.tag){case 0:case 11:case 15:yo(8,C,u)}var v=C.child;if(v!==null)v.return=C,Ae=v;else for(;Ae!==null;){C=Ae;var S=C.sibling,N=C.return;if(IC(C),C===m){Ae=null;break}if(S!==null){S.return=N,Ae=S;break}Ae=N}}}var D=u.alternate;if(D!==null){var M=D.child;if(M!==null){D.child=null;do{var z=M.sibling;M.sibling=null,M=z}while(M!==null)}}Ae=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,Ae=d;else e:for(;Ae!==null;){if(u=Ae,u.flags&2048)switch(u.tag){case 0:case 11:case 15:yo(9,u,u.return)}var I=u.sibling;if(I!==null){I.return=u.return,Ae=I;break e}Ae=u.return}}var T=t.current;for(Ae=T;Ae!==null;){d=Ae;var R=d.child;if(d.subtreeFlags&2064&&R!==null)R.return=d,Ae=R;else e:for(d=T;Ae!==null;){if(g=Ae,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Ll(9,g)}}catch(X){kt(g,g.return,X)}if(g===d){Ae=null;break e}var P=g.sibling;if(P!==null){P.return=g.return,Ae=P;break e}Ae=g.return}}if(it=a,mi(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Il,t)}catch{}i=!0}return i}finally{ct=n,Jn.transition=e}}return!1}function Qp(t,e,n){e=Is(n,e),e=yC(t,e,1),t=oi(t,e,1),e=Cn(),t!==null&&(zo(t,1,e),Mn(t,e))}function kt(t,e,n){if(t.tag===3)Qp(t,t,n);else for(;e!==null;){if(e.tag===3){Qp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ai===null||!ai.has(i))){t=Is(n,t),t=xC(e,t,1),e=oi(e,t,1),t=Cn(),e!==null&&(zo(e,1,t),Mn(e,t));break}}e=e.return}}function kE(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,Jt===t&&(on&n)===n&&(Kt===4||Kt===3&&(on&130023424)===on&&500>Bt()-Q1?Ni(t,0):Z1|=n),Mn(t,e)}function FC(t,e){e===0&&(t.mode&1?(e=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):e=1);var n=Cn();t=Br(t,e),t!==null&&(zo(t,e,n),Mn(t,n))}function PE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FC(t,n)}function DE(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(e),FC(t,n)}var jC;jC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,wE(t,e,n);kn=!!(t.flags&131072)}else kn=!1,_t&&e.flags&1048576&&Vx(e,ol,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ka(t,e),t=e.pendingProps;var a=As(e,pn.current);vs(e,n),a=q1(null,e,i,t,a,n);var u=G1();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(i)?(u=!0,il(e)):u=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,j1(e),a.updater=Ml,e.stateNode=a,a._reactInternals=e,bh(e,i,t,n),e=Rh(null,e,i,!0,u,n)):(e.tag=0,_t&&u&&k1(e),xn(null,e,a,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ka(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=LE(i),t=sr(i,t),a){case 0:e=Ih(null,e,i,t,n);break e;case 1:e=zp(null,e,i,t,n);break e;case 11:e=jp(null,e,i,t,n);break e;case 14:e=Up(null,e,i,sr(i.type,t),n);break e}throw Error(ce(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sr(i,a),Ih(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sr(i,a),zp(t,e,i,a,n);case 3:e:{if(_C(e),t===null)throw Error(ce(387));i=e.pendingProps,u=e.memoizedState,a=u.element,Yx(t,e),cl(e,i,null,n);var d=e.memoizedState;if(i=d.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){a=Is(Error(ce(423)),e),e=Hp(t,e,i,n,a);break e}else if(i!==a){a=Is(Error(ce(424)),e),e=Hp(t,e,i,n,a);break e}else for(jn=si(e.stateNode.containerInfo.firstChild),Un=e,_t=!0,lr=null,n=Kx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),i===a){e=Fr(t,e,n);break e}xn(t,e,i,n)}e=e.child}return e;case 5:return Zx(e),t===null&&Eh(e),i=e.type,a=e.pendingProps,u=t!==null?t.memoizedProps:null,d=a.children,xh(i,a)?d=null:u!==null&&xh(i,u)&&(e.flags|=32),wC(t,e),xn(t,e,d,n),e.child;case 6:return t===null&&Eh(e),null;case 13:return EC(t,e,n);case 4:return U1(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=bs(e,null,i,n):xn(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sr(i,a),jp(t,e,i,a,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,u=e.memoizedProps,d=a.value,mt(al,i._currentValue),i._currentValue=d,u!==null)if(fr(u.value,d)){if(u.children===a.children&&!Pn.current){e=Fr(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var g=u.dependencies;if(g!==null){d=u.child;for(var y=g.firstContext;y!==null;){if(y.context===i){if(u.tag===1){y=Dr(-1,n&-n),y.tag=2;var m=u.updateQueue;if(m!==null){m=m.shared;var C=m.pending;C===null?y.next=y:(y.next=C.next,C.next=y),m.pending=y}}u.lanes|=n,y=u.alternate,y!==null&&(y.lanes|=n),Ah(u.return,n,e),g.lanes|=n;break}y=y.next}}else if(u.tag===10)d=u.type===e.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(ce(341));d.lanes|=n,g=d.alternate,g!==null&&(g.lanes|=n),Ah(d,n,e),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===e){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}xn(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,vs(e,n),a=er(a),i=i(a),e.flags|=1,xn(t,e,i,n),e.child;case 14:return i=e.type,a=sr(i,e.pendingProps),a=sr(i.type,a),Up(t,e,i,a,n);case 15:return CC(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:sr(i,a),ka(t,e),e.tag=1,Dn(i)?(t=!0,il(e)):t=!1,vs(e,n),mC(e,i,a),bh(e,i,a,n),Rh(null,e,i,!0,t,n);case 19:return AC(t,e,n);case 22:return vC(t,e,n)}throw Error(ce(156,e.tag))};function UC(t,e){return hx(t,e)}function ME(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,i){return new ME(t,e,n,i)}function t0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LE(t){if(typeof t=="function")return t0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v1)return 11;if(t===w1)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ma(t,e,n,i,a,u){var d=2;if(i=t,typeof t=="function")t0(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case is:return Oi(n.children,a,u,e);case C1:d=8,a|=8;break;case Zd:return t=$n(12,n,e,a|2),t.elementType=Zd,t.lanes=u,t;case Qd:return t=$n(13,n,e,a),t.elementType=Qd,t.lanes=u,t;case $d:return t=$n(19,n,e,a),t.elementType=$d,t.lanes=u,t;case Zy:return Fl(n,a,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xy:d=10;break e;case Yy:d=9;break e;case v1:d=11;break e;case w1:d=14;break e;case Xr:d=16,i=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=$n(d,n,e,a),e.elementType=t,e.type=i,e.lanes=u,e}function Oi(t,e,n,i){return t=$n(7,t,i,e),t.lanes=n,t}function Fl(t,e,n,i){return t=$n(22,t,i,e),t.elementType=Zy,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function jc(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BE(t,e,n,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function n0(t,e,n,i,a,u,d,g,y){return t=new BE(t,e,n,g,y),e===1?(e=1,u===!0&&(e|=8)):e=0,u=$n(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},j1(u),t}function FE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function zC(t){if(!t)return hi;t=t._reactInternals;e:{if(ji(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(Dn(n))return zx(t,n,e)}return e}function HC(t,e,n,i,a,u,d,g,y){return t=n0(n,i,!0,t,a,u,d,g,y),t.context=zC(null),n=t.current,i=Cn(),a=li(n),u=Dr(i,a),u.callback=e!=null?e:null,oi(n,u,a),t.current.lanes=a,zo(t,a,i),Mn(t,i),t}function jl(t,e,n,i){var a=e.current,u=Cn(),d=li(a);return n=zC(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(u,d),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=oi(a,e,d),t!==null&&(ur(t,a,d,u),Ra(t,a,d)),d}function yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $p(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function r0(t,e){$p(t,e),(t=t.alternate)&&$p(t,e)}function jE(){return null}var VC=typeof reportError=="function"?reportError:function(t){console.error(t)};function i0(t){this._internalRoot=t}Ul.prototype.render=i0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));jl(t,e,null,null)};Ul.prototype.unmount=i0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Li(function(){jl(null,t,null,null)}),e[Lr]=null}};function Ul(t){this._internalRoot=t}Ul.prototype.unstable_scheduleHydration=function(t){if(t){var e=vx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&_x(t)}};function s0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jp(){}function UE(t,e,n,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var m=yl(d);u.call(m)}}var d=HC(e,i,t,0,null,!1,!1,"",Jp);return t._reactRootContainer=d,t[Lr]=d.current,No(t.nodeType===8?t.parentNode:t),Li(),d}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var g=i;i=function(){var m=yl(y);g.call(m)}}var y=n0(t,0,!1,null,null,!1,!1,"",Jp);return t._reactRootContainer=y,t[Lr]=y.current,No(t.nodeType===8?t.parentNode:t),Li(function(){jl(e,y,n,i)}),y}function Hl(t,e,n,i,a){var u=n._reactRootContainer;if(u){var d=u;if(typeof a=="function"){var g=a;a=function(){var y=yl(d);g.call(y)}}jl(e,d,t,a)}else d=UE(n,e,t,a,i);return yl(d)}xx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ro(e.pendingLanes);n!==0&&(A1(e,n|1),Mn(e,Bt()),!(it&6)&&(Rs=Bt()+500,mi()))}break;case 13:Li(function(){var i=Br(t,1);if(i!==null){var a=Cn();ur(i,t,1,a)}}),r0(t,1)}};S1=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=Cn();ur(e,t,134217728,n)}r0(t,134217728)}};Cx=function(t){if(t.tag===13){var e=li(t),n=Br(t,e);if(n!==null){var i=Cn();ur(n,t,e,i)}r0(t,e)}};vx=function(){return ct};wx=function(t,e){var n=ct;try{return ct=t,e()}finally{ct=n}};lh=function(t,e,n){switch(e){case"input":if(th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=kl(i);if(!a)throw Error(ce(90));$y(i),th(i,a)}}}break;case"textarea":ex(t,n);break;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}};ax=$1;lx=Li;var zE={usingClientEntryPoint:!1,Events:[Vo,ls,kl,sx,ox,$1]},Qs={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fx(t),t===null?null:t.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||jE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{Il=va.inject(HE),_r=va}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;Hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s0(e))throw Error(ce(200));return FE(t,e,null,n)};Hn.createRoot=function(t,e){if(!s0(t))throw Error(ce(299));var n=!1,i="",a=VC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=n0(t,1,!1,null,null,n,!1,i,a),t[Lr]=e.current,No(t.nodeType===8?t.parentNode:t),new i0(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=fx(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return Li(t)};Hn.hydrate=function(t,e,n){if(!zl(e))throw Error(ce(200));return Hl(null,t,e,!0,n)};Hn.hydrateRoot=function(t,e,n){if(!s0(t))throw Error(ce(405));var i=n!=null&&n.hydratedSources||null,a=!1,u="",d=VC;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=HC(e,null,t,1,n!=null?n:null,a,!1,u,d),t[Lr]=e.current,No(t),i)for(t=0;t<i.length;t++)n=i[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Ul(e)};Hn.render=function(t,e,n){if(!zl(e))throw Error(ce(200));return Hl(null,t,e,!1,n)};Hn.unmountComponentAtNode=function(t){if(!zl(t))throw Error(ce(40));return t._reactRootContainer?(Li(function(){Hl(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Hn.unstable_batchedUpdates=$1;Hn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!zl(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return Hl(t,e,n,!1,i)};Hn.version="18.3.1-next-f1338f8080-20240426";function qC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qC)}catch(t){console.error(t)}}qC(),qy.exports=Hn;var VE=qy.exports,eg=VE;Xd.createRoot=eg.createRoot,Xd.hydrateRoot=eg.hydrateRoot;var GC={exports:{}},Uc,tg;function Ui(){if(tg)return Uc;tg=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return Uc=t,Uc}var zc,ng;function WC(){if(ng)return zc;ng=1;var t=typeof vr=="object"&&vr&&vr.Object===Object&&vr;return zc=t,zc}var Hc,rg;function br(){if(rg)return Hc;rg=1;var t=WC(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Hc=n,Hc}var Vc,ig;function qE(){if(ig)return Vc;ig=1;var t=br(),e=function(){return t.Date.now()};return Vc=e,Vc}var qc,sg;function GE(){if(sg)return qc;sg=1;var t=/\s/;function e(n){for(var i=n.length;i--&&t.test(n.charAt(i)););return i}return qc=e,qc}var Gc,og;function WE(){if(og)return Gc;og=1;var t=GE(),e=/^\s+/;function n(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return Gc=n,Gc}var Wc,ag;function Go(){if(ag)return Wc;ag=1;var t=br(),e=t.Symbol;return Wc=e,Wc}var Kc,lg;function KE(){if(lg)return Kc;lg=1;var t=Go(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,a=t?t.toStringTag:void 0;function u(d){var g=n.call(d,a),y=d[a];try{d[a]=void 0;var m=!0}catch{}var C=i.call(d);return m&&(g?d[a]=y:delete d[a]),C}return Kc=u,Kc}var Xc,cg;function XE(){if(cg)return Xc;cg=1;var t=Object.prototype,e=t.toString;function n(i){return e.call(i)}return Xc=n,Xc}var Yc,ug;function Wo(){if(ug)return Yc;ug=1;var t=Go(),e=KE(),n=XE(),i="[object Null]",a="[object Undefined]",u=t?t.toStringTag:void 0;function d(g){return g==null?g===void 0?a:i:u&&u in Object(g)?e(g):n(g)}return Yc=d,Yc}var Zc,fg;function Ps(){if(fg)return Zc;fg=1;function t(e){return e!=null&&typeof e=="object"}return Zc=t,Zc}var Qc,dg;function Ko(){if(dg)return Qc;dg=1;var t=Wo(),e=Ps(),n="[object Symbol]";function i(a){return typeof a=="symbol"||e(a)&&t(a)==n}return Qc=i,Qc}var $c,hg;function YE(){if(hg)return $c;hg=1;var t=WE(),e=Ui(),n=Ko(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,g=parseInt;function y(m){if(typeof m=="number")return m;if(n(m))return i;if(e(m)){var C=typeof m.valueOf=="function"?m.valueOf():m;m=e(C)?C+"":C}if(typeof m!="string")return m===0?m:+m;m=t(m);var v=u.test(m);return v||d.test(m)?g(m.slice(2),v?2:8):a.test(m)?i:+m}return $c=y,$c}var Jc,pg;function KC(){if(pg)return Jc;pg=1;var t=Ui(),e=qE(),n=YE(),i="Expected a function",a=Math.max,u=Math.min;function d(g,y,m){var C,v,S,N,D,M,z=0,I=!1,T=!1,R=!0;if(typeof g!="function")throw new TypeError(i);y=n(y)||0,t(m)&&(I=!!m.leading,T="maxWait"in m,S=T?a(n(m.maxWait)||0,y):S,R="trailing"in m?!!m.trailing:R);function P(J){var Ce=C,q=v;return C=v=void 0,z=J,N=g.apply(q,Ce),N}function X(J){return z=J,D=setTimeout($,y),I?P(J):N}function V(J){var Ce=J-M,q=J-z,Ve=y-Ce;return T?u(Ve,S-q):Ve}function F(J){var Ce=J-M,q=J-z;return M===void 0||Ce>=y||Ce<0||T&&q>=S}function $(){var J=e();if(F(J))return H(J);D=setTimeout($,V(J))}function H(J){return D=void 0,R&&C?P(J):(C=v=void 0,N)}function se(){D!==void 0&&clearTimeout(D),z=0,C=M=v=D=void 0}function ye(){return D===void 0?N:H(e())}function ee(){var J=e(),Ce=F(J);if(C=arguments,v=this,M=J,Ce){if(D===void 0)return X(M);if(T)return clearTimeout(D),D=setTimeout($,y),P(M)}return D===void 0&&(D=setTimeout($,y)),N}return ee.cancel=se,ee.flush=ye,ee}return Jc=d,Jc}var eu,gg;function XC(){if(gg)return eu;gg=1;var t=Wo(),e=Ui(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";function d(g){if(!e(g))return!1;var y=t(g);return y==i||y==a||y==n||y==u}return eu=d,eu}var tu,mg;function ZE(){if(mg)return tu;mg=1;var t=br(),e=t["__core-js_shared__"];return tu=e,tu}var nu,yg;function QE(){if(yg)return nu;yg=1;var t=ZE(),e=function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!e&&e in i}return nu=n,nu}var ru,xg;function YC(){if(xg)return ru;xg=1;var t=Function.prototype,e=t.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return ru=n,ru}var iu,Cg;function $E(){if(Cg)return iu;Cg=1;var t=XC(),e=QE(),n=Ui(),i=YC(),a=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,d=Function.prototype,g=Object.prototype,y=d.toString,m=g.hasOwnProperty,C=RegExp("^"+y.call(m).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(S){if(!n(S)||e(S))return!1;var N=t(S)?C:u;return N.test(i(S))}return iu=v,iu}var su,vg;function JE(){if(vg)return su;vg=1;function t(e,n){return e==null?void 0:e[n]}return su=t,su}var ou,wg;function zi(){if(wg)return ou;wg=1;var t=$E(),e=JE();function n(i,a){var u=e(i,a);return t(u)?u:void 0}return ou=n,ou}var au,_g;function Vl(){if(_g)return au;_g=1;var t=zi(),e=t(Object,"create");return au=e,au}var lu,Eg;function eA(){if(Eg)return lu;Eg=1;var t=Vl();function e(){this.__data__=t?t(null):{},this.size=0}return lu=e,lu}var cu,Ag;function tA(){if(Ag)return cu;Ag=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return cu=t,cu}var uu,Sg;function nA(){if(Sg)return uu;Sg=1;var t=Vl(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(u){var d=this.__data__;if(t){var g=d[u];return g===e?void 0:g}return i.call(d,u)?d[u]:void 0}return uu=a,uu}var fu,bg;function rA(){if(bg)return fu;bg=1;var t=Vl(),e=Object.prototype,n=e.hasOwnProperty;function i(a){var u=this.__data__;return t?u[a]!==void 0:n.call(u,a)}return fu=i,fu}var du,Tg;function iA(){if(Tg)return du;Tg=1;var t=Vl(),e="__lodash_hash_undefined__";function n(i,a){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=t&&a===void 0?e:a,this}return du=n,du}var hu,Ig;function sA(){if(Ig)return hu;Ig=1;var t=eA(),e=tA(),n=nA(),i=rA(),a=iA();function u(d){var g=-1,y=d==null?0:d.length;for(this.clear();++g<y;){var m=d[g];this.set(m[0],m[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=a,hu=u,hu}var pu,Rg;function oA(){if(Rg)return pu;Rg=1;function t(){this.__data__=[],this.size=0}return pu=t,pu}var gu,Ng;function o0(){if(Ng)return gu;Ng=1;function t(e,n){return e===n||e!==e&&n!==n}return gu=t,gu}var mu,Og;function ql(){if(Og)return mu;Og=1;var t=o0();function e(n,i){for(var a=n.length;a--;)if(t(n[a][0],i))return a;return-1}return mu=e,mu}var yu,kg;function aA(){if(kg)return yu;kg=1;var t=ql(),e=Array.prototype,n=e.splice;function i(a){var u=this.__data__,d=t(u,a);if(d<0)return!1;var g=u.length-1;return d==g?u.pop():n.call(u,d,1),--this.size,!0}return yu=i,yu}var xu,Pg;function lA(){if(Pg)return xu;Pg=1;var t=ql();function e(n){var i=this.__data__,a=t(i,n);return a<0?void 0:i[a][1]}return xu=e,xu}var Cu,Dg;function cA(){if(Dg)return Cu;Dg=1;var t=ql();function e(n){return t(this.__data__,n)>-1}return Cu=e,Cu}var vu,Mg;function uA(){if(Mg)return vu;Mg=1;var t=ql();function e(n,i){var a=this.__data__,u=t(a,n);return u<0?(++this.size,a.push([n,i])):a[u][1]=i,this}return vu=e,vu}var wu,Lg;function Gl(){if(Lg)return wu;Lg=1;var t=oA(),e=aA(),n=lA(),i=cA(),a=uA();function u(d){var g=-1,y=d==null?0:d.length;for(this.clear();++g<y;){var m=d[g];this.set(m[0],m[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=a,wu=u,wu}var _u,Bg;function a0(){if(Bg)return _u;Bg=1;var t=zi(),e=br(),n=t(e,"Map");return _u=n,_u}var Eu,Fg;function fA(){if(Fg)return Eu;Fg=1;var t=sA(),e=Gl(),n=a0();function i(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return Eu=i,Eu}var Au,jg;function dA(){if(jg)return Au;jg=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return Au=t,Au}var Su,Ug;function Wl(){if(Ug)return Su;Ug=1;var t=dA();function e(n,i){var a=n.__data__;return t(i)?a[typeof i=="string"?"string":"hash"]:a.map}return Su=e,Su}var bu,zg;function hA(){if(zg)return bu;zg=1;var t=Wl();function e(n){var i=t(this,n).delete(n);return this.size-=i?1:0,i}return bu=e,bu}var Tu,Hg;function pA(){if(Hg)return Tu;Hg=1;var t=Wl();function e(n){return t(this,n).get(n)}return Tu=e,Tu}var Iu,Vg;function gA(){if(Vg)return Iu;Vg=1;var t=Wl();function e(n){return t(this,n).has(n)}return Iu=e,Iu}var Ru,qg;function mA(){if(qg)return Ru;qg=1;var t=Wl();function e(n,i){var a=t(this,n),u=a.size;return a.set(n,i),this.size+=a.size==u?0:1,this}return Ru=e,Ru}var Nu,Gg;function l0(){if(Gg)return Nu;Gg=1;var t=fA(),e=hA(),n=pA(),i=gA(),a=mA();function u(d){var g=-1,y=d==null?0:d.length;for(this.clear();++g<y;){var m=d[g];this.set(m[0],m[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=a,Nu=u,Nu}var Ou,Wg;function yA(){if(Wg)return Ou;Wg=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Ou=e,Ou}var ku,Kg;function xA(){if(Kg)return ku;Kg=1;function t(e){return this.__data__.has(e)}return ku=t,ku}var Pu,Xg;function ZC(){if(Xg)return Pu;Xg=1;var t=l0(),e=yA(),n=xA();function i(a){var u=-1,d=a==null?0:a.length;for(this.__data__=new t;++u<d;)this.add(a[u])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,Pu=i,Pu}var Du,Yg;function CA(){if(Yg)return Du;Yg=1;function t(e,n,i,a){for(var u=e.length,d=i+(a?1:-1);a?d--:++d<u;)if(n(e[d],d,e))return d;return-1}return Du=t,Du}var Mu,Zg;function vA(){if(Zg)return Mu;Zg=1;function t(e){return e!==e}return Mu=t,Mu}var Lu,Qg;function wA(){if(Qg)return Lu;Qg=1;function t(e,n,i){for(var a=i-1,u=e.length;++a<u;)if(e[a]===n)return a;return-1}return Lu=t,Lu}var Bu,$g;function _A(){if($g)return Bu;$g=1;var t=CA(),e=vA(),n=wA();function i(a,u,d){return u===u?n(a,u,d):t(a,e,d)}return Bu=i,Bu}var Fu,Jg;function EA(){if(Jg)return Fu;Jg=1;var t=_A();function e(n,i){var a=n==null?0:n.length;return!!a&&t(n,i,0)>-1}return Fu=e,Fu}var ju,e2;function AA(){if(e2)return ju;e2=1;function t(e,n,i){for(var a=-1,u=e==null?0:e.length;++a<u;)if(i(n,e[a]))return!0;return!1}return ju=t,ju}var Uu,t2;function c0(){if(t2)return Uu;t2=1;function t(e,n){for(var i=-1,a=e==null?0:e.length,u=Array(a);++i<a;)u[i]=n(e[i],i,e);return u}return Uu=t,Uu}var zu,n2;function u0(){if(n2)return zu;n2=1;function t(e){return function(n){return e(n)}}return zu=t,zu}var Hu,r2;function QC(){if(r2)return Hu;r2=1;function t(e,n){return e.has(n)}return Hu=t,Hu}var Vu,i2;function SA(){if(i2)return Vu;i2=1;var t=ZC(),e=EA(),n=AA(),i=c0(),a=u0(),u=QC(),d=200;function g(y,m,C,v){var S=-1,N=e,D=!0,M=y.length,z=[],I=m.length;if(!M)return z;C&&(m=i(m,a(C))),v?(N=n,D=!1):m.length>=d&&(N=u,D=!1,m=new t(m));e:for(;++S<M;){var T=y[S],R=C==null?T:C(T);if(T=v||T!==0?T:0,D&&R===R){for(var P=I;P--;)if(m[P]===R)continue e;z.push(T)}else N(m,R,v)||z.push(T)}return z}return Vu=g,Vu}var qu,s2;function $C(){if(s2)return qu;s2=1;function t(e,n){for(var i=-1,a=n.length,u=e.length;++i<a;)e[u+i]=n[i];return e}return qu=t,qu}var Gu,o2;function bA(){if(o2)return Gu;o2=1;var t=Wo(),e=Ps(),n="[object Arguments]";function i(a){return e(a)&&t(a)==n}return Gu=i,Gu}var Wu,a2;function f0(){if(a2)return Wu;a2=1;var t=bA(),e=Ps(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,u=t(function(){return arguments}())?t:function(d){return e(d)&&i.call(d,"callee")&&!a.call(d,"callee")};return Wu=u,Wu}var Ku,l2;function nr(){if(l2)return Ku;l2=1;var t=Array.isArray;return Ku=t,Ku}var Xu,c2;function TA(){if(c2)return Xu;c2=1;var t=Go(),e=f0(),n=nr(),i=t?t.isConcatSpreadable:void 0;function a(u){return n(u)||e(u)||!!(i&&u&&u[i])}return Xu=a,Xu}var Yu,u2;function JC(){if(u2)return Yu;u2=1;var t=$C(),e=TA();function n(i,a,u,d,g){var y=-1,m=i.length;for(u||(u=e),g||(g=[]);++y<m;){var C=i[y];a>0&&u(C)?a>1?n(C,a-1,u,d,g):t(g,C):d||(g[g.length]=C)}return g}return Yu=n,Yu}var Zu,f2;function Xo(){if(f2)return Zu;f2=1;function t(e){return e}return Zu=t,Zu}var Qu,d2;function IA(){if(d2)return Qu;d2=1;function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return Qu=t,Qu}var $u,h2;function RA(){if(h2)return $u;h2=1;var t=IA(),e=Math.max;function n(i,a,u){return a=e(a===void 0?i.length-1:a,0),function(){for(var d=arguments,g=-1,y=e(d.length-a,0),m=Array(y);++g<y;)m[g]=d[a+g];g=-1;for(var C=Array(a+1);++g<a;)C[g]=d[g];return C[a]=u(m),t(i,this,C)}}return $u=n,$u}var Ju,p2;function NA(){if(p2)return Ju;p2=1;function t(e){return function(){return e}}return Ju=t,Ju}var ef,g2;function OA(){if(g2)return ef;g2=1;var t=zi(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return ef=e,ef}var tf,m2;function kA(){if(m2)return tf;m2=1;var t=NA(),e=OA(),n=Xo(),i=e?function(a,u){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(u),writable:!0})}:n;return tf=i,tf}var nf,y2;function PA(){if(y2)return nf;y2=1;var t=800,e=16,n=Date.now;function i(a){var u=0,d=0;return function(){var g=n(),y=e-(g-d);if(d=g,y>0){if(++u>=t)return arguments[0]}else u=0;return a.apply(void 0,arguments)}}return nf=i,nf}var rf,x2;function DA(){if(x2)return rf;x2=1;var t=kA(),e=PA(),n=e(t);return rf=n,rf}var sf,C2;function ev(){if(C2)return sf;C2=1;var t=Xo(),e=RA(),n=DA();function i(a,u){return n(e(a,u,t),a+"")}return sf=i,sf}var of,v2;function d0(){if(v2)return of;v2=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return of=e,of}var af,w2;function Yo(){if(w2)return af;w2=1;var t=XC(),e=d0();function n(i){return i!=null&&e(i.length)&&!t(i)}return af=n,af}var lf,_2;function MA(){if(_2)return lf;_2=1;var t=Yo(),e=Ps();function n(i){return e(i)&&t(i)}return lf=n,lf}var cf,E2;function LA(){if(E2)return cf;E2=1;var t=SA(),e=JC(),n=ev(),i=MA(),a=n(function(u,d){return i(u)?t(u,e(d,1,i,!0)):[]});return cf=a,cf}var uf,A2;function tv(){if(A2)return uf;A2=1;function t(e,n){for(var i=-1,a=e==null?0:e.length,u=0,d=[];++i<a;){var g=e[i];n(g,i,e)&&(d[u++]=g)}return d}return uf=t,uf}var ff,S2;function BA(){if(S2)return ff;S2=1;function t(e){return function(n,i,a){for(var u=-1,d=Object(n),g=a(n),y=g.length;y--;){var m=g[e?y:++u];if(i(d[m],m,d)===!1)break}return n}}return ff=t,ff}var df,b2;function FA(){if(b2)return df;b2=1;var t=BA(),e=t();return df=e,df}var hf,T2;function jA(){if(T2)return hf;T2=1;function t(e,n){for(var i=-1,a=Array(e);++i<e;)a[i]=n(i);return a}return hf=t,hf}var so={exports:{}},pf,I2;function UA(){if(I2)return pf;I2=1;function t(){return!1}return pf=t,pf}so.exports;var R2;function nv(){return R2||(R2=1,function(t,e){var n=br(),i=UA(),a=e&&!e.nodeType&&e,u=a&&!0&&t&&!t.nodeType&&t,d=u&&u.exports===a,g=d?n.Buffer:void 0,y=g?g.isBuffer:void 0,m=y||i;t.exports=m}(so,so.exports)),so.exports}var gf,N2;function h0(){if(N2)return gf;N2=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,a){var u=typeof i;return a=a==null?t:a,!!a&&(u=="number"||u!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<a}return gf=n,gf}var mf,O2;function zA(){if(O2)return mf;O2=1;var t=Wo(),e=d0(),n=Ps(),i="[object Arguments]",a="[object Array]",u="[object Boolean]",d="[object Date]",g="[object Error]",y="[object Function]",m="[object Map]",C="[object Number]",v="[object Object]",S="[object RegExp]",N="[object Set]",D="[object String]",M="[object WeakMap]",z="[object ArrayBuffer]",I="[object DataView]",T="[object Float32Array]",R="[object Float64Array]",P="[object Int8Array]",X="[object Int16Array]",V="[object Int32Array]",F="[object Uint8Array]",$="[object Uint8ClampedArray]",H="[object Uint16Array]",se="[object Uint32Array]",ye={};ye[T]=ye[R]=ye[P]=ye[X]=ye[V]=ye[F]=ye[$]=ye[H]=ye[se]=!0,ye[i]=ye[a]=ye[z]=ye[u]=ye[I]=ye[d]=ye[g]=ye[y]=ye[m]=ye[C]=ye[v]=ye[S]=ye[N]=ye[D]=ye[M]=!1;function ee(J){return n(J)&&e(J.length)&&!!ye[t(J)]}return mf=ee,mf}var oo={exports:{}};oo.exports;var k2;function HA(){return k2||(k2=1,function(t,e){var n=WC(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,u=a&&a.exports===i,d=u&&n.process,g=function(){try{var y=a&&a.require&&a.require("util").types;return y||d&&d.binding&&d.binding("util")}catch{}}();t.exports=g}(oo,oo.exports)),oo.exports}var yf,P2;function rv(){if(P2)return yf;P2=1;var t=zA(),e=u0(),n=HA(),i=n&&n.isTypedArray,a=i?e(i):t;return yf=a,yf}var xf,D2;function VA(){if(D2)return xf;D2=1;var t=jA(),e=f0(),n=nr(),i=nv(),a=h0(),u=rv(),d=Object.prototype,g=d.hasOwnProperty;function y(m,C){var v=n(m),S=!v&&e(m),N=!v&&!S&&i(m),D=!v&&!S&&!N&&u(m),M=v||S||N||D,z=M?t(m.length,String):[],I=z.length;for(var T in m)(C||g.call(m,T))&&!(M&&(T=="length"||N&&(T=="offset"||T=="parent")||D&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,I)))&&z.push(T);return z}return xf=y,xf}var Cf,M2;function qA(){if(M2)return Cf;M2=1;var t=Object.prototype;function e(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||t;return n===a}return Cf=e,Cf}var vf,L2;function GA(){if(L2)return vf;L2=1;function t(e,n){return function(i){return e(n(i))}}return vf=t,vf}var wf,B2;function WA(){if(B2)return wf;B2=1;var t=GA(),e=t(Object.keys,Object);return wf=e,wf}var _f,F2;function KA(){if(F2)return _f;F2=1;var t=qA(),e=WA(),n=Object.prototype,i=n.hasOwnProperty;function a(u){if(!t(u))return e(u);var d=[];for(var g in Object(u))i.call(u,g)&&g!="constructor"&&d.push(g);return d}return _f=a,_f}var Ef,j2;function p0(){if(j2)return Ef;j2=1;var t=VA(),e=KA(),n=Yo();function i(a){return n(a)?t(a):e(a)}return Ef=i,Ef}var Af,U2;function g0(){if(U2)return Af;U2=1;var t=FA(),e=p0();function n(i,a){return i&&t(i,a,e)}return Af=n,Af}var Sf,z2;function XA(){if(z2)return Sf;z2=1;var t=Yo();function e(n,i){return function(a,u){if(a==null)return a;if(!t(a))return n(a,u);for(var d=a.length,g=i?d:-1,y=Object(a);(i?g--:++g<d)&&u(y[g],g,y)!==!1;);return a}}return Sf=e,Sf}var bf,H2;function m0(){if(H2)return bf;H2=1;var t=g0(),e=XA(),n=e(t);return bf=n,bf}var Tf,V2;function YA(){if(V2)return Tf;V2=1;var t=m0();function e(n,i){var a=[];return t(n,function(u,d,g){i(u,d,g)&&a.push(u)}),a}return Tf=e,Tf}var If,q2;function ZA(){if(q2)return If;q2=1;var t=Gl();function e(){this.__data__=new t,this.size=0}return If=e,If}var Rf,G2;function QA(){if(G2)return Rf;G2=1;function t(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return Rf=t,Rf}var Nf,W2;function $A(){if(W2)return Nf;W2=1;function t(e){return this.__data__.get(e)}return Nf=t,Nf}var Of,K2;function JA(){if(K2)return Of;K2=1;function t(e){return this.__data__.has(e)}return Of=t,Of}var kf,X2;function e8(){if(X2)return kf;X2=1;var t=Gl(),e=a0(),n=l0(),i=200;function a(u,d){var g=this.__data__;if(g instanceof t){var y=g.__data__;if(!e||y.length<i-1)return y.push([u,d]),this.size=++g.size,this;g=this.__data__=new n(y)}return g.set(u,d),this.size=g.size,this}return kf=a,kf}var Pf,Y2;function iv(){if(Y2)return Pf;Y2=1;var t=Gl(),e=ZA(),n=QA(),i=$A(),a=JA(),u=e8();function d(g){var y=this.__data__=new t(g);this.size=y.size}return d.prototype.clear=e,d.prototype.delete=n,d.prototype.get=i,d.prototype.has=a,d.prototype.set=u,Pf=d,Pf}var Df,Z2;function t8(){if(Z2)return Df;Z2=1;function t(e,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(e[i],i,e))return!0;return!1}return Df=t,Df}var Mf,Q2;function sv(){if(Q2)return Mf;Q2=1;var t=ZC(),e=t8(),n=QC(),i=1,a=2;function u(d,g,y,m,C,v){var S=y&i,N=d.length,D=g.length;if(N!=D&&!(S&&D>N))return!1;var M=v.get(d),z=v.get(g);if(M&&z)return M==g&&z==d;var I=-1,T=!0,R=y&a?new t:void 0;for(v.set(d,g),v.set(g,d);++I<N;){var P=d[I],X=g[I];if(m)var V=S?m(X,P,I,g,d,v):m(P,X,I,d,g,v);if(V!==void 0){if(V)continue;T=!1;break}if(R){if(!e(g,function(F,$){if(!n(R,$)&&(P===F||C(P,F,y,m,v)))return R.push($)})){T=!1;break}}else if(!(P===X||C(P,X,y,m,v))){T=!1;break}}return v.delete(d),v.delete(g),T}return Mf=u,Mf}var Lf,$2;function n8(){if($2)return Lf;$2=1;var t=br(),e=t.Uint8Array;return Lf=e,Lf}var Bf,J2;function r8(){if(J2)return Bf;J2=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(a,u){i[++n]=[u,a]}),i}return Bf=t,Bf}var Ff,em;function i8(){if(em)return Ff;em=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(a){i[++n]=a}),i}return Ff=t,Ff}var jf,tm;function s8(){if(tm)return jf;tm=1;var t=Go(),e=n8(),n=o0(),i=sv(),a=r8(),u=i8(),d=1,g=2,y="[object Boolean]",m="[object Date]",C="[object Error]",v="[object Map]",S="[object Number]",N="[object RegExp]",D="[object Set]",M="[object String]",z="[object Symbol]",I="[object ArrayBuffer]",T="[object DataView]",R=t?t.prototype:void 0,P=R?R.valueOf:void 0;function X(V,F,$,H,se,ye,ee){switch($){case T:if(V.byteLength!=F.byteLength||V.byteOffset!=F.byteOffset)return!1;V=V.buffer,F=F.buffer;case I:return!(V.byteLength!=F.byteLength||!ye(new e(V),new e(F)));case y:case m:case S:return n(+V,+F);case C:return V.name==F.name&&V.message==F.message;case N:case M:return V==F+"";case v:var J=a;case D:var Ce=H&d;if(J||(J=u),V.size!=F.size&&!Ce)return!1;var q=ee.get(V);if(q)return q==F;H|=g,ee.set(V,F);var Ve=i(J(V),J(F),H,se,ye,ee);return ee.delete(V),Ve;case z:if(P)return P.call(V)==P.call(F)}return!1}return jf=X,jf}var Uf,nm;function o8(){if(nm)return Uf;nm=1;var t=$C(),e=nr();function n(i,a,u){var d=a(i);return e(i)?d:t(d,u(i))}return Uf=n,Uf}var zf,rm;function a8(){if(rm)return zf;rm=1;function t(){return[]}return zf=t,zf}var Hf,im;function l8(){if(im)return Hf;im=1;var t=tv(),e=a8(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(d){return d==null?[]:(d=Object(d),t(a(d),function(g){return i.call(d,g)}))}:e;return Hf=u,Hf}var Vf,sm;function c8(){if(sm)return Vf;sm=1;var t=o8(),e=l8(),n=p0();function i(a){return t(a,n,e)}return Vf=i,Vf}var qf,om;function u8(){if(om)return qf;om=1;var t=c8(),e=1,n=Object.prototype,i=n.hasOwnProperty;function a(u,d,g,y,m,C){var v=g&e,S=t(u),N=S.length,D=t(d),M=D.length;if(N!=M&&!v)return!1;for(var z=N;z--;){var I=S[z];if(!(v?I in d:i.call(d,I)))return!1}var T=C.get(u),R=C.get(d);if(T&&R)return T==d&&R==u;var P=!0;C.set(u,d),C.set(d,u);for(var X=v;++z<N;){I=S[z];var V=u[I],F=d[I];if(y)var $=v?y(F,V,I,d,u,C):y(V,F,I,u,d,C);if(!($===void 0?V===F||m(V,F,g,y,C):$)){P=!1;break}X||(X=I=="constructor")}if(P&&!X){var H=u.constructor,se=d.constructor;H!=se&&"constructor"in u&&"constructor"in d&&!(typeof H=="function"&&H instanceof H&&typeof se=="function"&&se instanceof se)&&(P=!1)}return C.delete(u),C.delete(d),P}return qf=a,qf}var Gf,am;function f8(){if(am)return Gf;am=1;var t=zi(),e=br(),n=t(e,"DataView");return Gf=n,Gf}var Wf,lm;function d8(){if(lm)return Wf;lm=1;var t=zi(),e=br(),n=t(e,"Promise");return Wf=n,Wf}var Kf,cm;function h8(){if(cm)return Kf;cm=1;var t=zi(),e=br(),n=t(e,"Set");return Kf=n,Kf}var Xf,um;function p8(){if(um)return Xf;um=1;var t=zi(),e=br(),n=t(e,"WeakMap");return Xf=n,Xf}var Yf,fm;function g8(){if(fm)return Yf;fm=1;var t=f8(),e=a0(),n=d8(),i=h8(),a=p8(),u=Wo(),d=YC(),g="[object Map]",y="[object Object]",m="[object Promise]",C="[object Set]",v="[object WeakMap]",S="[object DataView]",N=d(t),D=d(e),M=d(n),z=d(i),I=d(a),T=u;return(t&&T(new t(new ArrayBuffer(1)))!=S||e&&T(new e)!=g||n&&T(n.resolve())!=m||i&&T(new i)!=C||a&&T(new a)!=v)&&(T=function(R){var P=u(R),X=P==y?R.constructor:void 0,V=X?d(X):"";if(V)switch(V){case N:return S;case D:return g;case M:return m;case z:return C;case I:return v}return P}),Yf=T,Yf}var Zf,dm;function m8(){if(dm)return Zf;dm=1;var t=iv(),e=sv(),n=s8(),i=u8(),a=g8(),u=nr(),d=nv(),g=rv(),y=1,m="[object Arguments]",C="[object Array]",v="[object Object]",S=Object.prototype,N=S.hasOwnProperty;function D(M,z,I,T,R,P){var X=u(M),V=u(z),F=X?C:a(M),$=V?C:a(z);F=F==m?v:F,$=$==m?v:$;var H=F==v,se=$==v,ye=F==$;if(ye&&d(M)){if(!d(z))return!1;X=!0,H=!1}if(ye&&!H)return P||(P=new t),X||g(M)?e(M,z,I,T,R,P):n(M,z,F,I,T,R,P);if(!(I&y)){var ee=H&&N.call(M,"__wrapped__"),J=se&&N.call(z,"__wrapped__");if(ee||J){var Ce=ee?M.value():M,q=J?z.value():z;return P||(P=new t),R(Ce,q,I,T,P)}}return ye?(P||(P=new t),i(M,z,I,T,R,P)):!1}return Zf=D,Zf}var Qf,hm;function ov(){if(hm)return Qf;hm=1;var t=m8(),e=Ps();function n(i,a,u,d,g){return i===a?!0:i==null||a==null||!e(i)&&!e(a)?i!==i&&a!==a:t(i,a,u,d,n,g)}return Qf=n,Qf}var $f,pm;function y8(){if(pm)return $f;pm=1;var t=iv(),e=ov(),n=1,i=2;function a(u,d,g,y){var m=g.length,C=m,v=!y;if(u==null)return!C;for(u=Object(u);m--;){var S=g[m];if(v&&S[2]?S[1]!==u[S[0]]:!(S[0]in u))return!1}for(;++m<C;){S=g[m];var N=S[0],D=u[N],M=S[1];if(v&&S[2]){if(D===void 0&&!(N in u))return!1}else{var z=new t;if(y)var I=y(D,M,N,u,d,z);if(!(I===void 0?e(M,D,n|i,y,z):I))return!1}}return!0}return $f=a,$f}var Jf,gm;function av(){if(gm)return Jf;gm=1;var t=Ui();function e(n){return n===n&&!t(n)}return Jf=e,Jf}var ed,mm;function x8(){if(mm)return ed;mm=1;var t=av(),e=p0();function n(i){for(var a=e(i),u=a.length;u--;){var d=a[u],g=i[d];a[u]=[d,g,t(g)]}return a}return ed=n,ed}var td,ym;function lv(){if(ym)return td;ym=1;function t(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return td=t,td}var nd,xm;function C8(){if(xm)return nd;xm=1;var t=y8(),e=x8(),n=lv();function i(a){var u=e(a);return u.length==1&&u[0][2]?n(u[0][0],u[0][1]):function(d){return d===a||t(d,a,u)}}return nd=i,nd}var rd,Cm;function y0(){if(Cm)return rd;Cm=1;var t=nr(),e=Ko(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(u,d){if(t(u))return!1;var g=typeof u;return g=="number"||g=="symbol"||g=="boolean"||u==null||e(u)?!0:i.test(u)||!n.test(u)||d!=null&&u in Object(d)}return rd=a,rd}var id,vm;function v8(){if(vm)return id;vm=1;var t=l0(),e="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var u=function(){var d=arguments,g=a?a.apply(this,d):d[0],y=u.cache;if(y.has(g))return y.get(g);var m=i.apply(this,d);return u.cache=y.set(g,m)||y,m};return u.cache=new(n.Cache||t),u}return n.Cache=t,id=n,id}var sd,wm;function w8(){if(wm)return sd;wm=1;var t=v8(),e=500;function n(i){var a=t(i,function(d){return u.size===e&&u.clear(),d}),u=a.cache;return a}return sd=n,sd}var od,_m;function _8(){if(_m)return od;_m=1;var t=w8(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=t(function(a){var u=[];return a.charCodeAt(0)===46&&u.push(""),a.replace(e,function(d,g,y,m){u.push(y?m.replace(n,"$1"):g||d)}),u});return od=i,od}var ad,Em;function E8(){if(Em)return ad;Em=1;var t=Go(),e=c0(),n=nr(),i=Ko(),a=t?t.prototype:void 0,u=a?a.toString:void 0;function d(g){if(typeof g=="string")return g;if(n(g))return e(g,d)+"";if(i(g))return u?u.call(g):"";var y=g+"";return y=="0"&&1/g==-1/0?"-0":y}return ad=d,ad}var ld,Am;function cv(){if(Am)return ld;Am=1;var t=E8();function e(n){return n==null?"":t(n)}return ld=e,ld}var cd,Sm;function uv(){if(Sm)return cd;Sm=1;var t=nr(),e=y0(),n=_8(),i=cv();function a(u,d){return t(u)?u:e(u,d)?[u]:n(i(u))}return cd=a,cd}var ud,bm;function Kl(){if(bm)return ud;bm=1;var t=Ko();function e(n){if(typeof n=="string"||t(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return ud=e,ud}var fd,Tm;function x0(){if(Tm)return fd;Tm=1;var t=uv(),e=Kl();function n(i,a){a=t(a,i);for(var u=0,d=a.length;i!=null&&u<d;)i=i[e(a[u++])];return u&&u==d?i:void 0}return fd=n,fd}var dd,Im;function A8(){if(Im)return dd;Im=1;var t=x0();function e(n,i,a){var u=n==null?void 0:t(n,i);return u===void 0?a:u}return dd=e,dd}var hd,Rm;function S8(){if(Rm)return hd;Rm=1;function t(e,n){return e!=null&&n in Object(e)}return hd=t,hd}var pd,Nm;function b8(){if(Nm)return pd;Nm=1;var t=uv(),e=f0(),n=nr(),i=h0(),a=d0(),u=Kl();function d(g,y,m){y=t(y,g);for(var C=-1,v=y.length,S=!1;++C<v;){var N=u(y[C]);if(!(S=g!=null&&m(g,N)))break;g=g[N]}return S||++C!=v?S:(v=g==null?0:g.length,!!v&&a(v)&&i(N,v)&&(n(g)||e(g)))}return pd=d,pd}var gd,Om;function T8(){if(Om)return gd;Om=1;var t=S8(),e=b8();function n(i,a){return i!=null&&e(i,a,t)}return gd=n,gd}var md,km;function I8(){if(km)return md;km=1;var t=ov(),e=A8(),n=T8(),i=y0(),a=av(),u=lv(),d=Kl(),g=1,y=2;function m(C,v){return i(C)&&a(v)?u(d(C),v):function(S){var N=e(S,C);return N===void 0&&N===v?n(S,C):t(v,N,g|y)}}return md=m,md}var yd,Pm;function R8(){if(Pm)return yd;Pm=1;function t(e){return function(n){return n==null?void 0:n[e]}}return yd=t,yd}var xd,Dm;function N8(){if(Dm)return xd;Dm=1;var t=x0();function e(n){return function(i){return t(i,n)}}return xd=e,xd}var Cd,Mm;function O8(){if(Mm)return Cd;Mm=1;var t=R8(),e=N8(),n=y0(),i=Kl();function a(u){return n(u)?t(i(u)):e(u)}return Cd=a,Cd}var vd,Lm;function C0(){if(Lm)return vd;Lm=1;var t=C8(),e=I8(),n=Xo(),i=nr(),a=O8();function u(d){return typeof d=="function"?d:d==null?n:typeof d=="object"?i(d)?e(d[0],d[1]):t(d):a(d)}return vd=u,vd}var wd,Bm;function k8(){if(Bm)return wd;Bm=1;var t=tv(),e=YA(),n=C0(),i=nr();function a(u,d){var g=i(u)?t:e;return g(u,n(d,3))}return wd=a,wd}var _d,Fm;function P8(){if(Fm)return _d;Fm=1;function t(e,n,i){var a;return i(e,function(u,d,g){if(n(u,d,g))return a=d,!1}),a}return _d=t,_d}var Ed,jm;function D8(){if(jm)return Ed;jm=1;var t=P8(),e=g0(),n=C0();function i(a,u){return t(a,n(u,3),e)}return Ed=i,Ed}var Ad,Um;function M8(){if(Um)return Ad;Um=1;function t(e){return e&&e.length?e[0]:void 0}return Ad=t,Ad}var Sd,zm;function L8(){return zm||(zm=1,Sd=M8()),Sd}var bd,Hm;function B8(){if(Hm)return bd;Hm=1;function t(e,n){for(var i=-1,a=e==null?0:e.length;++i<a&&n(e[i],i,e)!==!1;);return e}return bd=t,bd}var Td,Vm;function fv(){if(Vm)return Td;Vm=1;var t=Xo();function e(n){return typeof n=="function"?n:t}return Td=e,Td}var Id,qm;function F8(){if(qm)return Id;qm=1;var t=B8(),e=m0(),n=fv(),i=nr();function a(u,d){var g=i(u)?t:e;return g(u,n(d))}return Id=a,Id}var Rd,Gm;function j8(){if(Gm)return Rd;Gm=1;var t=g0(),e=fv();function n(i,a){return i&&t(i,e(a))}return Rd=n,Rd}var Nd,Wm;function U8(){if(Wm)return Nd;Wm=1;function t(){}return Nd=t,Nd}var Od,Km;function z8(){if(Km)return Od;Km=1;var t=m0(),e=Yo();function n(i,a){var u=-1,d=e(i)?Array(i.length):[];return t(i,function(g,y,m){d[++u]=a(g,y,m)}),d}return Od=n,Od}var kd,Xm;function H8(){if(Xm)return kd;Xm=1;function t(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return kd=t,kd}var Pd,Ym;function V8(){if(Ym)return Pd;Ym=1;var t=Ko();function e(n,i){if(n!==i){var a=n!==void 0,u=n===null,d=n===n,g=t(n),y=i!==void 0,m=i===null,C=i===i,v=t(i);if(!m&&!v&&!g&&n>i||g&&y&&C&&!m&&!v||u&&y&&C||!a&&C||!d)return 1;if(!u&&!g&&!v&&n<i||v&&a&&d&&!u&&!g||m&&a&&d||!y&&d||!C)return-1}return 0}return Pd=e,Pd}var Dd,Zm;function q8(){if(Zm)return Dd;Zm=1;var t=V8();function e(n,i,a){for(var u=-1,d=n.criteria,g=i.criteria,y=d.length,m=a.length;++u<y;){var C=t(d[u],g[u]);if(C){if(u>=m)return C;var v=a[u];return C*(v=="desc"?-1:1)}}return n.index-i.index}return Dd=e,Dd}var Md,Qm;function G8(){if(Qm)return Md;Qm=1;var t=c0(),e=x0(),n=C0(),i=z8(),a=H8(),u=u0(),d=q8(),g=Xo(),y=nr();function m(C,v,S){v.length?v=t(v,function(M){return y(M)?function(z){return e(z,M.length===1?M[0]:M)}:M}):v=[g];var N=-1;v=t(v,u(n));var D=i(C,function(M,z,I){var T=t(v,function(R){return R(M)});return{criteria:T,index:++N,value:M}});return a(D,function(M,z){return d(M,z,S)})}return Md=m,Md}var Ld,$m;function W8(){if($m)return Ld;$m=1;var t=o0(),e=Yo(),n=h0(),i=Ui();function a(u,d,g){if(!i(g))return!1;var y=typeof d;return(y=="number"?e(g)&&n(d,g.length):y=="string"&&d in g)?t(g[d],u):!1}return Ld=a,Ld}var Bd,Jm;function K8(){if(Jm)return Bd;Jm=1;var t=JC(),e=G8(),n=ev(),i=W8(),a=n(function(u,d){if(u==null)return[];var g=d.length;return g>1&&i(u,d[0],d[1])?d=[]:g>2&&i(d[0],d[1],d[2])&&(d=[d[0]]),e(u,t(d,1),[])});return Bd=a,Bd}var Fd,ey;function X8(){if(ey)return Fd;ey=1;var t=KC(),e=Ui(),n="Expected a function";function i(a,u,d){var g=!0,y=!0;if(typeof a!="function")throw new TypeError(n);return e(d)&&(g="leading"in d?!!d.leading:g,y="trailing"in d?!!d.trailing:y),t(a,u,{leading:g,maxWait:u,trailing:y})}return Fd=i,Fd}var jd,ty;function Y8(){if(ty)return jd;ty=1;var t=cv(),e=0;function n(i){var a=++e;return t(i)+a}return jd=n,jd}(function(t,e){(function(n,i){t.exports=i(KC(),LA(),k8(),D8(),L8(),F8(),j8(),U8(),K8(),X8(),Y8(),re)})(vr,function(n,i,a,u,d,g,y,m,C,v,S,N){return function(){var D={654:function(z,I,T){var R,P=this&&this.__assign||function(){return P=Object.assign||function(Y){for(var B,U=1,K=arguments.length;U<K;U++)for(var te in B=arguments[U])Object.prototype.hasOwnProperty.call(B,te)&&(Y[te]=B[te]);return Y},P.apply(this,arguments)},X=this&&this.__createBinding||(Object.create?function(Y,B,U,K){K===void 0&&(K=U);var te=Object.getOwnPropertyDescriptor(B,U);te&&!("get"in te?!B.__esModule:te.writable||te.configurable)||(te={enumerable:!0,get:function(){return B[U]}}),Object.defineProperty(Y,K,te)}:function(Y,B,U,K){K===void 0&&(K=U),Y[K]=B[U]}),V=this&&this.__setModuleDefault||(Object.create?function(Y,B){Object.defineProperty(Y,"default",{enumerable:!0,value:B})}:function(Y,B){Y.default=B}),F=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var B={};if(Y!=null)for(var U in Y)U!=="default"&&Object.prototype.hasOwnProperty.call(Y,U)&&X(B,Y,U);return V(B,Y),B},$=this&&this.__spreadArray||function(Y,B,U){if(U||arguments.length===2)for(var K,te=0,xe=B.length;te<xe;te++)!K&&te in B||(K||(K=Array.prototype.slice.call(B,0,te)),K[te]=B[te]);return Y.concat(K||Array.prototype.slice.call(B))},H=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(I,"__esModule",{value:!0}),I.updateRtl=I.doesFocusableExist=I.getCurrentFocusKey=I.updateAllLayouts=I.resume=I.pause=I.navigateByDirection=I.setFocus=I.setKeyMap=I.destroy=I.setThrottle=I.init=I.SpatialNavigation=I.ROOT_FOCUS_KEY=void 0;var se=H(T(150)),ye=H(T(117)),ee=H(T(747)),J=H(T(23)),Ce=H(T(842)),q=H(T(682)),Ve=H(T(784)),Re=H(T(432)),ge=H(T(67)),Te=H(T(35)),Ee=H(T(119)),Ke=F(T(964)),Pe="left",ft="right",We="up",It="down",ve="enter",Ft=((R={}).left=[37,"ArrowLeft"],R.up=[38,"ArrowUp"],R.right=[39,"ArrowRight"],R.down=[40,"ArrowDown"],R.enter=[13,"Enter"],R);I.ROOT_FOCUS_KEY="SN:ROOT";var ze=["#0FF","#FF0","#F0F"],En={leading:!0,trailing:!1},ae=function(){function Y(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.domNodeFocusOptions={},this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=Ee.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=Ft,this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.updateRtl=this.updateRtl.bind(this),this.setFocusDebounced=(0,se.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0,this.distanceCalculationMethod="corners"}return Y.getCutoffCoordinate=function(B,U,K,te,xe){var pe=B?te.top:xe===Ee.default.LTR?te.left:te.right,he=B?te.bottom:xe===Ee.default.LTR?te.right:te.left;return U?K?pe:he:K?he:pe},Y.getRefCorners=function(B,U,K){var te={a:{x:0,y:0},b:{x:0,y:0}};switch(B){case We:var xe=U?K.bottom:K.top;te.a={x:K.left,y:xe},te.b={x:K.right,y:xe};break;case It:xe=U?K.top:K.bottom,te.a={x:K.left,y:xe},te.b={x:K.right,y:xe};break;case Pe:var pe=U?K.right:K.left;te.a={x:pe,y:K.top},te.b={x:pe,y:K.bottom};break;case ft:pe=U?K.left:K.right,te.a={x:pe,y:K.top},te.b={x:pe,y:K.bottom}}return te},Y.isAdjacentSlice=function(B,U,K){var te=B.a,xe=B.b,pe=U.a,he=U.b,me=K?"x":"y",Ye=te[me],oe=xe[me],Be=pe[me],Fe=he[me],Ne=.2*(oe-Ye);return Math.max(0,Math.min(oe,Fe)-Math.max(Ye,Be))>=Ne},Y.getPrimaryAxisDistance=function(B,U,K){var te=B.a,xe=U.a,pe=K?"y":"x";return Math.abs(xe[pe]-te[pe])},Y.getSecondaryAxisDistance=function(B,U,K,te,xe){if(xe)return xe(B,U,K,te);var pe=B.a,he=B.b,me=U.a,Ye=U.b,oe=K?"x":"y",Be=pe[oe],Fe=he[oe],Ne=me[oe],yt=Ye[oe];if(te==="center"){var tt=(Be+Fe)/2,Pt=(Ne+yt)/2;return Math.abs(tt-Pt)}if(te==="edges"){var Dt=Math.min(Be,Fe),He=Math.min(Ne,yt),Xt=Math.max(Be,Fe),mn=Math.max(Ne,yt),An=Math.abs(Dt-He),Qe=Math.abs(Xt-mn);return Math.min(An,Qe)}var de=[Math.abs(Ne-Be),Math.abs(Ne-Fe),Math.abs(yt-Be),Math.abs(yt-Fe)];return Math.min.apply(Math,de)},Y.prototype.sortSiblingsByPriority=function(B,U,K,te){var xe=this,pe=K===It||K===We,he=Y.getRefCorners(K,!1,U);return(0,Re.default)(B,function(me){var Ye=Y.getRefCorners(K,!0,me.layout),oe=Y.isAdjacentSlice(he,Ye,pe),Be=oe?Y.getPrimaryAxisDistance:Y.getSecondaryAxisDistance,Fe=oe?Y.getSecondaryAxisDistance:Y.getPrimaryAxisDistance,Ne=Be(he,Ye,pe,xe.distanceCalculationMethod,xe.customDistanceCalculationFunction),yt=Fe(he,Ye,pe,xe.distanceCalculationMethod,xe.customDistanceCalculationFunction),tt=5*Ne+yt,Pt=(tt+1)/(oe?5:1);return xe.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(me.focusKey," relative to ").concat(te," is"),Ne,yt,tt),xe.log("smartNavigate","priority for ".concat(me.focusKey," relative to ").concat(te," is"),Pt),xe.visualDebugger&&(xe.visualDebugger.drawPoint(Ye.a.x,Ye.a.y,"yellow",6),xe.visualDebugger.drawPoint(Ye.b.x,Ye.b.y,"yellow",6)),Pt})},Y.prototype.init=function(B){var U=this,K=B===void 0?{}:B,te=K.debug,xe=te!==void 0&&te,pe=K.visualDebug,he=pe!==void 0&&pe,me=K.nativeMode,Ye=me!==void 0&&me,oe=K.throttle,Be=oe===void 0?0:oe,Fe=K.throttleKeypresses,Ne=Fe!==void 0&&Fe,yt=K.useGetBoundingClientRect,tt=yt!==void 0&&yt,Pt=K.shouldFocusDOMNode,Dt=Pt!==void 0&&Pt,He=K.domNodeFocusOptions,Xt=He===void 0?{}:He,mn=K.shouldUseNativeEvents,An=mn!==void 0&&mn,Qe=K.rtl,de=Qe!==void 0&&Qe,je=K.distanceCalculationMethod,Le=je===void 0?"corners":je,dt=K.customDistanceCalculationFunction,Tr=dt===void 0?void 0:dt;if(!this.enabled&&(this.domNodeFocusOptions=Xt,this.enabled=!0,this.nativeMode=Ye,this.throttleKeypresses=Ne,this.useGetBoundingClientRect=tt,this.shouldFocusDOMNode=Dt&&!Ye,this.shouldUseNativeEvents=An,this.writingDirection=de?Ee.default.RTL:Ee.default.LTR,this.distanceCalculationMethod=Le,this.customDistanceCalculationFunction=Tr,this.debug=xe,!this.nativeMode&&(Number.isInteger(Be)&&Be>0&&(this.throttle=Be),this.bindEventHandlers(),he))){this.visualDebugger=new Te.default(this.writingDirection);var Ur=function(){requestAnimationFrame(function(){U.visualDebugger.clearLayouts(),(0,Ve.default)(U.focusableComponents,function(Mt,$e){U.visualDebugger.drawLayout(Mt.layout,$e,Mt.parentFocusKey)}),Ur()})};Ur()}},Y.prototype.setThrottle=function(B){var U=B===void 0?{}:B,K=U.throttle,te=K===void 0?0:K,xe=U.throttleKeypresses,pe=xe!==void 0&&xe;this.throttleKeypresses=pe,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(te)&&(this.throttle=te),this.bindEventHandlers())},Y.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=Ft,this.unbindEventHandlers())},Y.prototype.getEventType=function(B){return(0,J.default)(this.getKeyMap(),function(U){return U.includes(B)})},Y.getKeyCode=function(B){return B.keyCode||B.code||B.key},Y.prototype.bindEventHandlers=function(){var B=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(U){if(B.paused!==!0){B.debug&&(B.logIndex+=1);var K=Y.getKeyCode(U),te=B.getEventType(K);if(te){B.pressedKeys[te]=B.pressedKeys[te]?B.pressedKeys[te]+1:1,B.shouldUseNativeEvents||(U.preventDefault(),U.stopPropagation());var xe={pressedKeys:B.pressedKeys};if(te===ve&&B.focusKey)B.onEnterPress(xe);else{var pe=B.onArrowPress(te,xe)===!1;if(B.visualDebugger&&B.visualDebugger.clear(),pe)B.log("keyDownEventListener","default navigation prevented");else{var he=(0,J.default)(B.getKeyMap(),function(me){return me.includes(K)});B.smartNavigate(he,null,{event:U})}}}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,ge.default)(this.keyDownEventListener.bind(this),this.throttle,En)),this.keyUpEventListener=function(U){var K=Y.getKeyCode(U),te=B.getEventType(K);delete B.pressedKeys[te],B.throttle&&!B.throttleKeypresses&&B.keyDownEventListenerThrottled.cancel(),te===ve&&B.focusKey&&B.onEnterRelease(),!B.focusKey||te!==Pe&&te!==ft&&te!==We&&te!==It||B.onArrowRelease(te)},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Y.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var B=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",B),this.keyDownEventListener=null}},Y.prototype.onEnterPress=function(B){var U=this.focusableComponents[this.focusKey];U?U.focusable?U.onEnterPress&&U.onEnterPress(B):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Y.prototype.onEnterRelease=function(){var B=this.focusableComponents[this.focusKey];B?B.focusable?B.onEnterRelease&&B.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Y.prototype.onArrowPress=function(B,U){var K=this.focusableComponents[this.focusKey];if(K)return K&&K.onArrowPress&&K.onArrowPress(B,U);this.log("onArrowPress","noComponent")},Y.prototype.onArrowRelease=function(B){var U=this.focusableComponents[this.focusKey];U?U.focusable?U.onArrowRelease&&U.onArrowRelease(B):this.log("onArrowRelease","componentNotFocusable"):this.log("onArrowRelease","noComponent")},Y.prototype.navigateByDirection=function(B,U){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var K=[It,We,Pe,ft];K.includes(B)?(this.log("navigateByDirection","direction",B),this.smartNavigate(B,null,U)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(B,"`, but you can use only these: "),K)}},Y.prototype.smartNavigate=function(B,U,K){var te=this;if(!this.nativeMode){var xe=B===It||B===We,pe=B===It||(this.writingDirection===Ee.default.LTR?B===ft:B===Pe);this.log("smartNavigate","direction",B),this.log("smartNavigate","fromParentFocusKey",U),this.log("smartNavigate","this.focusKey",this.focusKey),U||(0,Ve.default)(this.focusableComponents,function(He){He.layoutUpdated=!1});var he=this.focusableComponents[U||this.focusKey];if(U||he){if(this.log("smartNavigate","currentComponent",he?he.focusKey:void 0,he?he.node:void 0,he),he){this.updateLayout(he.focusKey);var me=he.parentFocusKey,Ye=he.focusKey,oe=he.layout,Be=Y.getCutoffCoordinate(xe,pe,!1,oe,this.writingDirection),Fe=(0,ee.default)(this.focusableComponents,function(He){if(He.parentFocusKey===me&&He.focusable){te.updateLayout(He.focusKey);var Xt=Y.getCutoffCoordinate(xe,pe,!0,He.layout,te.writingDirection);return xe||te.writingDirection===Ee.default.LTR?pe?Xt>=Be:Xt<=Be:pe?Xt<=Be:Xt>=Be}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",Be),this.log("smartNavigate","siblings","".concat(Fe.length," elements:"),Fe.map(function(He){return He.focusKey}).join(", "),Fe.map(function(He){return He.node}),Fe.map(function(He){return He}))),this.visualDebugger){var Ne=Y.getRefCorners(B,!1,oe);this.visualDebugger.drawPoint(Ne.a.x,Ne.a.y),this.visualDebugger.drawPoint(Ne.b.x,Ne.b.y)}var yt=this.sortSiblingsByPriority(Fe,oe,B,Ye),tt=(0,Ce.default)(yt);if(this.log("smartNavigate","nextComponent",tt?tt.focusKey:void 0,tt?tt.node:void 0,tt),tt)this.setFocus(tt.focusKey,K);else{var Pt=this.focusableComponents[me],Dt=Pt!=null&&Pt.isFocusBoundary?Pt.focusBoundaryDirections||[B]:[];Pt&&Dt.includes(B)||this.smartNavigate(B,me,K)}}}else this.setFocus(this.getForcedFocusKey())}},Y.prototype.saveLastFocusedChildKey=function(B,U){B&&(this.log("saveLastFocusedChildKey","".concat(B.focusKey," lastFocusedChildKey set"),U),B.lastFocusedChildKey=U)},Y.prototype.log=function(B,U){for(var K=[],te=2;te<arguments.length;te++)K[te-2]=arguments[te];this.debug&&console.log.apply(console,$(["%c".concat(B,"%c").concat(U),"background: ".concat(ze[this.logIndex%ze.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],K,!1))},Y.prototype.getCurrentFocusKey=function(){return this.focusKey},Y.prototype.getForcedFocusKey=function(){var B,U=(0,ee.default)(this.focusableComponents,function(te){return te.focusable&&te.forceFocus}),K=this.sortSiblingsByPriority(U,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",I.ROOT_FOCUS_KEY);return(B=(0,Ce.default)(K))===null||B===void 0?void 0:B.focusKey},Y.prototype.getNextFocusKey=function(B){var U=this,K=this.focusableComponents[B];if(!K||this.nativeMode)return B;var te=(0,ee.default)(this.focusableComponents,function(me){return me.parentFocusKey===B&&me.focusable});if(te.length>0){var xe=K.lastFocusedChildKey,pe=K.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",xe),this.log("getNextFocusKey","preferredChildFocusKey is",pe),xe&&K.saveLastFocusedChild&&this.isParticipatingFocusableComponent(xe))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",xe),this.getNextFocusKey(xe);if(pe&&this.isParticipatingFocusableComponent(pe))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",pe),this.getNextFocusKey(pe);te.forEach(function(me){return U.updateLayout(me.focusKey)});var he=function(me,Ye){var oe=Ye===Ee.default.LTR?function(Fe){var Ne=Fe.layout;return Math.abs(Ne.left)+Math.abs(Ne.top)}:function(Fe){var Ne=Fe.layout;return Math.abs(window.innerWidth-Ne.right)+Math.abs(Ne.top)},Be=(0,Re.default)(me,oe);return(0,Ce.default)(Be)}(te,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",he),this.getNextFocusKey(he)}return this.log("getNextFocusKey","targetFocusKey",B),B},Y.prototype.addFocusable=function(B){var U=B.focusKey,K=B.node,te=B.parentFocusKey,xe=B.onEnterPress,pe=B.onEnterRelease,he=B.onArrowPress,me=B.onArrowRelease,Ye=B.onFocus,oe=B.onBlur,Be=B.saveLastFocusedChild,Fe=B.trackChildren,Ne=B.onUpdateFocus,yt=B.onUpdateHasFocusedChild,tt=B.preferredChildFocusKey,Pt=B.autoRestoreFocus,Dt=B.forceFocus,He=B.focusable,Xt=B.isFocusBoundary,mn=B.focusBoundaryDirections;if(this.focusableComponents[U]={focusKey:U,node:K,parentFocusKey:te,onEnterPress:xe,onEnterRelease:pe,onArrowPress:he,onArrowRelease:me,onFocus:Ye,onBlur:oe,onUpdateFocus:Ne,onUpdateHasFocusedChild:yt,saveLastFocusedChild:Be,trackChildren:Fe,preferredChildFocusKey:tt,focusable:He,isFocusBoundary:Xt,focusBoundaryDirections:mn,autoRestoreFocus:Pt,forceFocus:Dt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:K},layoutUpdated:!1},K||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[U]),!this.nativeMode){this.updateLayout(U),this.log("addFocusable","Component added: ",this.focusableComponents[U]),U===this.focusKey&&this.setFocus(tt||U);for(var An=this.focusableComponents[this.focusKey];An;){if(An.parentFocusKey===U){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}An=this.focusableComponents[An.parentFocusKey]}}},Y.prototype.removeFocusable=function(B){var U=B.focusKey,K=this.focusableComponents[U];if(K){var te=K.parentFocusKey;(0,K.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",K),delete this.focusableComponents[U];var xe=this.parentsHavingFocusedChild.includes(U);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(me){return me!==U});var pe=this.focusableComponents[te],he=U===this.focusKey;if(pe&&pe.lastFocusedChildKey===U&&(pe.lastFocusedChildKey=null),this.nativeMode)return;(he||xe)&&pe&&pe.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",he?"Leaf component":"Container component","Auto restoring focus to: ",te),this.setFocusDebounced(te))}},Y.prototype.getNodeLayoutByFocusKey=function(B){var U=this.focusableComponents[B];return U?(this.updateLayout(U.focusKey),U.layout):null},Y.prototype.setCurrentFocusedKey=function(B,U){var K,te,xe,pe;if(this.isFocusableComponent(this.focusKey)&&B!==this.focusKey){var he=this.focusableComponents[this.focusKey];he.onUpdateFocus(!1),he.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),U),(te=(K=he.node)===null||K===void 0?void 0:K.removeAttribute)===null||te===void 0||te.call(K,"data-focused"),this.log("setCurrentFocusedKey","onBlur",he)}if(this.focusKey=B,this.isFocusableComponent(this.focusKey)){var me=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&me.node&&me.node.focus(this.domNodeFocusOptions),(pe=(xe=me.node)===null||xe===void 0?void 0:xe.setAttribute)===null||pe===void 0||pe.call(xe,"data-focused","true"),me.onUpdateFocus(!0),me.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),U),this.log("setCurrentFocusedKey","onFocus",me)}},Y.prototype.updateParentsHasFocusedChild=function(B,U){for(var K=this,te=[],xe=this.focusableComponents[B];xe;){var pe=xe.parentFocusKey,he=this.focusableComponents[pe];if(he){var me=he.focusKey;te.push(me)}xe=he}var Ye=(0,ye.default)(this.parentsHavingFocusedChild,te),oe=(0,ye.default)(te,this.parentsHavingFocusedChild);(0,q.default)(Ye,function(Be){var Fe=K.focusableComponents[Be];Fe&&Fe.trackChildren&&Fe.onUpdateHasFocusedChild(!1),K.onIntermediateNodeBecameBlurred(Be,U)}),(0,q.default)(oe,function(Be){var Fe=K.focusableComponents[Be];Fe&&Fe.trackChildren&&Fe.onUpdateHasFocusedChild(!0),K.onIntermediateNodeBecameFocused(Be,U)}),this.parentsHavingFocusedChild=te},Y.prototype.updateParentsLastFocusedChild=function(B){for(var U=this.focusableComponents[B];U;){var K=U.parentFocusKey,te=this.focusableComponents[K];te&&this.saveLastFocusedChildKey(te,U.focusKey),U=te}},Y.prototype.getKeyMap=function(){return this.keyMap},Y.prototype.setKeyMap=function(B){this.keyMap=P(P({},this.getKeyMap()),function(U){var K={};return Object.entries(U).forEach(function(te){var xe=te[0],pe=te[1];K[xe]=Array.isArray(pe)?pe:[pe]}),K}(B))},Y.prototype.isFocusableComponent=function(B){return!!this.focusableComponents[B]},Y.prototype.isParticipatingFocusableComponent=function(B){return this.isFocusableComponent(B)&&this.focusableComponents[B].focusable},Y.prototype.onIntermediateNodeBecameFocused=function(B,U){this.isParticipatingFocusableComponent(B)&&this.focusableComponents[B].onFocus(this.getNodeLayoutByFocusKey(B),U)},Y.prototype.onIntermediateNodeBecameBlurred=function(B,U){this.isParticipatingFocusableComponent(B)&&this.focusableComponents[B].onBlur(this.getNodeLayoutByFocusKey(B),U)},Y.prototype.pause=function(){this.paused=!0},Y.prototype.resume=function(){this.paused=!1},Y.prototype.setFocus=function(B,U){if(U===void 0&&(U={}),this.setFocusDebounced.cancel(),this.enabled){this.log("setFocus","focusKey",B),B&&B!==I.ROOT_FOCUS_KEY||(B=this.getForcedFocusKey());var K=this.getNextFocusKey(B);this.log("setFocus","newFocusKey",K),this.setCurrentFocusedKey(K,U),this.updateParentsHasFocusedChild(K,U),this.updateParentsLastFocusedChild(K)}},Y.prototype.updateAllLayouts=function(){var B=this;this.enabled&&!this.nativeMode&&(0,Ve.default)(this.focusableComponents,function(U,K){B.updateLayout(K)})},Y.prototype.updateLayout=function(B){var U=this.focusableComponents[B];if(U&&!this.nativeMode&&!U.layoutUpdated){var K=U.node,te=this.useGetBoundingClientRect?(0,Ke.getBoundingClientRect)(K):(0,Ke.default)(K);U.layout=P(P({},te),{node:K})}},Y.prototype.updateFocusable=function(B,U){var K=U.node,te=U.preferredChildFocusKey,xe=U.focusable,pe=U.isFocusBoundary,he=U.focusBoundaryDirections,me=U.onEnterPress,Ye=U.onEnterRelease,oe=U.onArrowPress,Be=U.onFocus,Fe=U.onBlur;if(!this.nativeMode){var Ne=this.focusableComponents[B];Ne&&(Ne.preferredChildFocusKey=te,Ne.focusable=xe,Ne.isFocusBoundary=pe,Ne.focusBoundaryDirections=he,Ne.onEnterPress=me,Ne.onEnterRelease=Ye,Ne.onArrowPress=oe,Ne.onFocus=Be,Ne.onBlur=Fe,K&&(Ne.node=K))}},Y.prototype.isNativeMode=function(){return this.nativeMode},Y.prototype.doesFocusableExist=function(B){return!!this.focusableComponents[B]},Y.prototype.updateRtl=function(B){this.writingDirection=B?Ee.default.RTL:Ee.default.LTR},Y}();I.SpatialNavigation=new ae,I.init=I.SpatialNavigation.init,I.setThrottle=I.SpatialNavigation.setThrottle,I.destroy=I.SpatialNavigation.destroy,I.setKeyMap=I.SpatialNavigation.setKeyMap,I.setFocus=I.SpatialNavigation.setFocus,I.navigateByDirection=I.SpatialNavigation.navigateByDirection,I.pause=I.SpatialNavigation.pause,I.resume=I.SpatialNavigation.resume,I.updateAllLayouts=I.SpatialNavigation.updateAllLayouts,I.getCurrentFocusKey=I.SpatialNavigation.getCurrentFocusKey,I.doesFocusableExist=I.SpatialNavigation.doesFocusableExist,I.updateRtl=I.SpatialNavigation.updateRtl},35:function(z,I,T){var R=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(I,"__esModule",{value:!0});var P=R(T(119)),X=typeof window<"u"&&window.document,V=X?window.innerWidth:0,F=X?window.innerHeight:0,$=function(){function H(se){X&&(this.debugCtx=H.createCanvas("sn-debug","1010",se),this.layoutsCtx=H.createCanvas("sn-layouts","1000",se),this.writingDirection=se)}return H.createCanvas=function(se,ye,ee){var J=document.querySelector("#".concat(se))||document.createElement("canvas");J.setAttribute("id",se),J.setAttribute("dir",ee===P.default.LTR?"ltr":"rtl");var Ce=J.getContext("2d");return J.style.zIndex=ye,J.style.position="fixed",J.style.top="0",J.style.left="0",document.body.appendChild(J),J.width=V,J.height=F,Ce},H.prototype.clear=function(){X&&this.debugCtx.clearRect(0,0,V,F)},H.prototype.clearLayouts=function(){X&&this.layoutsCtx.clearRect(0,0,V,F)},H.prototype.drawLayout=function(se,ye,ee){if(X){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(se.left,se.top,se.width,se.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var J=this.writingDirection===P.default.LTR?"left":"right",Ce=se[J];this.layoutsCtx.fillText(ye,Ce,se.top+10),this.layoutsCtx.fillText(ee,Ce,se.top+25),this.layoutsCtx.fillText("".concat(J,": ").concat(Ce),Ce,se.top+40),this.layoutsCtx.fillText("top: ".concat(se.top),Ce,se.top+55)}},H.prototype.drawPoint=function(se,ye,ee,J){ee===void 0&&(ee="blue"),J===void 0&&(J=10),X&&(this.debugCtx.strokeStyle=ee,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(se-J/2,ye-J/2,J,J))},H}();I.default=$},119:function(z,I){var T;Object.defineProperty(I,"__esModule",{value:!0}),function(R){R[R.LTR=0]="LTR",R[R.RTL=1]="RTL"}(T||(T={})),I.default=T},607:function(z,I,T){var R=this&&this.__createBinding||(Object.create?function(X,V,F,$){$===void 0&&($=F);var H=Object.getOwnPropertyDescriptor(V,F);H&&!("get"in H?!V.__esModule:H.writable||H.configurable)||(H={enumerable:!0,get:function(){return V[F]}}),Object.defineProperty(X,$,H)}:function(X,V,F,$){$===void 0&&($=F),X[$]=V[F]}),P=this&&this.__exportStar||function(X,V){for(var F in X)F==="default"||Object.prototype.hasOwnProperty.call(V,F)||R(V,X,F)};Object.defineProperty(I,"__esModule",{value:!0}),P(T(79),I),P(T(445),I),P(T(654),I)},964:function(z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.getBoundingClientRect=void 0;var T=function(R){for(var P=R.offsetParent,X=R.offsetHeight,V=R.offsetWidth,F=R.offsetLeft,$=R.offsetTop;P&&P.nodeType===1;)F+=P.offsetLeft-P.scrollLeft,$+=P.offsetTop-P.scrollTop,P=P.offsetParent;return{height:X,left:F,top:$,width:V}};I.default=function(R){var P=R&&R.parentElement;if(R&&P){var X=T(P),V=T(R),F=V.height,$=V.left,H=V.top,se=V.width;return{x:$-X.left,y:H-X.top,width:se,height:F,left:$,top:H,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},I.getBoundingClientRect=function(R){if(R&&R.getBoundingClientRect){var P=R.getBoundingClientRect();return{x:P.x,y:P.y,width:P.width,height:P.height,left:P.left,top:P.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(z,I,T){Object.defineProperty(I,"__esModule",{value:!0}),I.useFocusContext=I.FocusContext=void 0;var R=T(156),P=T(654);I.FocusContext=(0,R.createContext)(P.ROOT_FOCUS_KEY),I.FocusContext.displayName="FocusContext",I.useFocusContext=function(){return(0,R.useContext)(I.FocusContext)}},79:function(z,I,T){var R=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(I,"__esModule",{value:!0}),I.useFocusable=void 0;var P=T(156),X=R(T(604)),V=R(T(461)),F=T(654),$=T(445);I.useFocusable=function(H){var se=H===void 0?{}:H,ye=se.focusable,ee=ye===void 0||ye,J=se.saveLastFocusedChild,Ce=J===void 0||J,q=se.trackChildren,Ve=q!==void 0&&q,Re=se.autoRestoreFocus,ge=Re===void 0||Re,Te=se.forceFocus,Ee=Te!==void 0&&Te,Ke=se.isFocusBoundary,Pe=Ke!==void 0&&Ke,ft=se.focusBoundaryDirections,We=se.focusKey,It=se.preferredChildFocusKey,ve=se.onEnterPress,Ft=ve===void 0?X.default:ve,ze=se.onEnterRelease,En=ze===void 0?X.default:ze,ae=se.onArrowPress,Y=ae===void 0?function(){return!0}:ae,B=se.onArrowRelease,U=B===void 0?X.default:B,K=se.onFocus,te=K===void 0?X.default:K,xe=se.onBlur,pe=xe===void 0?X.default:xe,he=se.extraProps,me=(0,P.useCallback)(function(je){Ft(he,je)},[Ft,he]),Ye=(0,P.useCallback)(function(){En(he)},[En,he]),oe=(0,P.useCallback)(function(je,Le){return Y(je,he,Le)},[he,Y]),Be=(0,P.useCallback)(function(je){U(je,he)},[U,he]),Fe=(0,P.useCallback)(function(je,Le){te(je,he,Le)},[he,te]),Ne=(0,P.useCallback)(function(je,Le){pe(je,he,Le)},[he,pe]),yt=(0,P.useRef)(null),tt=(0,P.useState)(!1),Pt=tt[0],Dt=tt[1],He=(0,P.useState)(!1),Xt=He[0],mn=He[1],An=(0,$.useFocusContext)(),Qe=(0,P.useMemo)(function(){return We||(0,V.default)("sn:focusable-item-")},[We]),de=(0,P.useCallback)(function(je){je===void 0&&(je={}),F.SpatialNavigation.setFocus(Qe,je)},[Qe]);return(0,P.useEffect)(function(){var je=yt.current;return F.SpatialNavigation.addFocusable({focusKey:Qe,node:je,parentFocusKey:An,preferredChildFocusKey:It,onEnterPress:me,onEnterRelease:Ye,onArrowPress:oe,onArrowRelease:Be,onFocus:Fe,onBlur:Ne,onUpdateFocus:function(Le){return Le===void 0&&(Le=!1),Dt(Le)},onUpdateHasFocusedChild:function(Le){return Le===void 0&&(Le=!1),mn(Le)},saveLastFocusedChild:Ce,trackChildren:Ve,isFocusBoundary:Pe,focusBoundaryDirections:ft,autoRestoreFocus:ge,forceFocus:Ee,focusable:ee}),function(){F.SpatialNavigation.removeFocusable({focusKey:Qe})}},[]),(0,P.useEffect)(function(){var je=yt.current;F.SpatialNavigation.updateFocusable(Qe,{node:je,preferredChildFocusKey:It,focusable:ee,isFocusBoundary:Pe,focusBoundaryDirections:ft,onEnterPress:me,onEnterRelease:Ye,onArrowPress:oe,onArrowRelease:Be,onFocus:Fe,onBlur:Ne})},[Qe,It,ee,Pe,ft,me,Ye,oe,Be,Fe,Ne]),{ref:yt,focusSelf:de,focused:Pt,hasFocusedChild:Xt,focusKey:Qe}}},150:function(z){z.exports=n},117:function(z){z.exports=i},747:function(z){z.exports=a},23:function(z){z.exports=u},842:function(z){z.exports=d},682:function(z){z.exports=g},784:function(z){z.exports=y},604:function(z){z.exports=m},432:function(z){z.exports=C},67:function(z){z.exports=v},461:function(z){z.exports=S},156:function(z){z.exports=N}},M={};return function z(I){var T=M[I];if(T!==void 0)return T.exports;var R=M[I]={exports:{}};return D[I].call(R.exports,R,R.exports,z),R.exports}(607)}()})})(GC);var dr=GC.exports;function rn(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function ns(t,e,n,i,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Ei,Xn,ts,wa,La;const zh="__TAURI_TO_IPC_KEY__";function v0(t,e=!1){return window.__TAURI_INTERNALS__.transformCallback(t,e)}class dv{constructor(e){Ei.set(this,void 0),Xn.set(this,0),ts.set(this,[]),wa.set(this,void 0),ns(this,Ei,e||(()=>{})),this.id=v0(n=>{const i=n.index;if("end"in n){i==rn(this,Xn,"f")?this.cleanupCallback():ns(this,wa,i);return}const a=n.message;if(i==rn(this,Xn,"f")){for(rn(this,Ei,"f").call(this,a),ns(this,Xn,rn(this,Xn,"f")+1);rn(this,Xn,"f")in rn(this,ts,"f");){const u=rn(this,ts,"f")[rn(this,Xn,"f")];rn(this,Ei,"f").call(this,u),delete rn(this,ts,"f")[rn(this,Xn,"f")],ns(this,Xn,rn(this,Xn,"f")+1)}rn(this,Xn,"f")===rn(this,wa,"f")&&this.cleanupCallback()}else rn(this,ts,"f")[i]=a})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(e){ns(this,Ei,e)}get onmessage(){return rn(this,Ei,"f")}[(Ei=new WeakMap,Xn=new WeakMap,ts=new WeakMap,wa=new WeakMap,zh)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[zh]()}}class Hh{constructor(e,n,i){this.plugin=e,this.event=n,this.channelId=i}async unregister(){return Me(`plugin:${this.plugin}|remove_listener`,{event:this.event,channelId:this.channelId})}}async function Z8(t,e,n){const i=new dv(n);try{return await Me(`plugin:${t}|register_listener`,{event:e,handler:i}),new Hh(t,e,i.id)}catch{return await Me(`plugin:${t}|registerListener`,{event:e,handler:i}),new Hh(t,e,i.id)}}async function Q8(t){return Me(`plugin:${t}|check_permissions`)}async function $8(t){return Me(`plugin:${t}|request_permissions`)}async function Me(t,e={},n){return window.__TAURI_INTERNALS__.invoke(t,e,n)}function J8(t,e="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(t,e)}class eS{get rid(){return rn(this,La,"f")}constructor(e){La.set(this,void 0),ns(this,La,e)}async close(){return Me("plugin:resources|close",{rid:this.rid})}}La=new WeakMap;function tS(){return!!(globalThis||window).isTauri}const ny=Object.freeze(Object.defineProperty({__proto__:null,Channel:dv,PluginListener:Hh,Resource:eS,SERIALIZE_TO_IPC_FN:zh,addPluginListener:Z8,checkPermissions:Q8,convertFileSrc:J8,invoke:Me,isTauri:tS,requestPermissions:$8,transformCallback:v0},Symbol.toStringTag,{value:"Module"}));var ry;(function(t){t.WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_CREATED="tauri://window-created",t.WEBVIEW_CREATED="tauri://webview-created",t.DRAG_ENTER="tauri://drag-enter",t.DRAG_OVER="tauri://drag-over",t.DRAG_DROP="tauri://drag-drop",t.DRAG_LEAVE="tauri://drag-leave"})(ry||(ry={}));async function nS(t,e){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(t,e),await Me("plugin:event|unlisten",{event:t,eventId:e})}async function hv(t,e,n){var i;const a=(i=void 0)!==null&&i!==void 0?i:{kind:"Any"};return Me("plugin:event|listen",{event:t,target:a,handler:v0(e)}).then(u=>async()=>nS(t,u))}async function rS(){return await Me("create_room")}async function pv(){return await Me("get_room_state")}async function iS(t){return await Me("process_command",{command:t})}async function gv(t){return await Me("export_collection",{collectionId:t})}async function mv(){return await Me("get_playlists")}async function xl(t,e){return await Me("playlist_create_collection",{name:t,visibility:e})}async function yv(t){return await Me("playlist_delete_collection",{collectionId:t})}async function xv(t,e){return await Me("playlist_rename_collection",{collectionId:t,name:e})}async function Cv(t,e){return await Me("playlist_set_visibility",{collectionId:t,visibility:e})}async function Vh(t,e,n){return await Me("playlist_add_song",{youtubeUrl:t,collectionId:e,addedBy:n})}async function vv(t,e){return await Me("playlist_remove_song",{collectionId:t,songId:e})}async function wv(t){return await Me("save_collection_to_file",{collectionId:t})}async function _v(){return await Me("load_collection_from_file")}async function sS(){return await Me("start_host_server")}let Ev=!1,Ba=null;function fn(t){Ev=t,!t&&Ba&&Cl&&(Cl(Ba),Ba=null)}let Cl=null;function Av(){const[t,e]=re.useState(null),[n,i]=re.useState(!0);re.useEffect(()=>(Cl=e,()=>{Cl=null}),[]);const a=async()=>{try{await rS();const u=await pv();e(u)}catch(u){console.error("[useRoomState] Failed to initialize room:",u)}finally{i(!1)}};return re.useEffect(()=>{const u=hv("room_state_updated",d=>{Ev?Ba=d.payload:e(d.payload)});return()=>{u.then(d=>d())}},[]),{roomState:t,loading:n,initializeRoom:a}}const oS=({score:t,onComplete:e,songTitle:n})=>{const[i,a]=re.useState("intro"),u=t===101;return re.useEffect(()=>{const d=[];return d.push(setTimeout(()=>a("score"),500)),d.push(setTimeout(()=>a("exit"),3e3)),d.push(setTimeout(()=>e(),3500)),()=>d.forEach(clearTimeout)},[e]),_.jsxs("div",{className:`scoring-overlay ${i}`,children:[_.jsxs("div",{className:"scoring-content",children:[i==="intro"&&_.jsx("div",{className:"scoring-intro",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M9 18V5l12-2v13"}),_.jsx("circle",{cx:"6",cy:"18",r:"3"}),_.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),i==="score"&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:`score-display ${u?"perfect-score":""}`,children:t}),_.jsx("div",{className:"score-label",children:u?" PERFECT! ":"Great performance!"}),n&&_.jsx("div",{className:"score-song-title",children:n})]}),i==="exit"&&_.jsx("div",{className:"scoring-exit",children:_.jsx("span",{children:"Next song..."})})]}),_.jsx("style",{children:`
        .scoring-overlay {
          position: fixed;
          inset: 0;
          background: linear-gradient(135deg, #15202b, #22303c);
          z-index: 1001;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: opacity 0.5s;
        }

        .scoring-overlay.exit {
          opacity: 0;
        }

        .scoring-content {
          text-align: center;
        }

        .scoring-intro {
          color: #1da1f2;
          animation: pulse 0.5s ease-out;
        }

        @keyframes pulse {
          0% { transform: scale(0); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }

        .score-display {
          font-size: 200px;
          font-weight: 800;
          color: #1da1f2;
          text-shadow: 0 0 80px rgba(29, 161, 242, 0.6);
          animation: scoreReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes scoreReveal {
          0% { transform: scale(0) rotate(-15deg); opacity: 0; }
          70% { transform: scale(1.15) rotate(5deg); }
          100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .perfect-score {
          color: #ffad1f;
          text-shadow: 0 0 80px rgba(255, 173, 31, 0.6);
          animation: perfectScore 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes perfectScore {
          0% { transform: scale(0) rotate(-15deg); opacity: 0; }
          50% { transform: scale(1.3) rotate(5deg); }
          70% { transform: scale(0.9); }
          100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .score-label {
          font-size: 28px;
          color: #8899a6;
          margin-top: 24px;
          animation: slideUp 0.5s ease-out 0.3s both;
        }

        .score-song-title {
          font-size: 18px;
          color: #657786;
          margin-top: 16px;
          animation: slideUp 0.5s ease-out 0.5s both;
        }

        @keyframes slideUp {
          from { transform: translateY(30px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }

        .scoring-exit {
          font-size: 24px;
          color: #8899a6;
          animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})},Ud={maximize:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"15 3 21 3 21 9"}),_.jsx("polyline",{points:"9 21 3 21 3 15"}),_.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),_.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),minimize:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"4 14 10 14 10 20"}),_.jsx("polyline",{points:"20 10 14 10 14 4"}),_.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),_.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),music:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M9 18V5l12-2v13"}),_.jsx("circle",{cx:"6",cy:"18",r:"3"}),_.jsx("circle",{cx:"18",cy:"16",r:"3"})]})},aS=()=>Math.random()<.005?101:Math.floor(Math.random()*31)+70,lS=()=>{var ye;const t=re.useRef(null),e=re.useRef(null),n=re.useRef(null),i=re.useRef(null),{roomState:a}=Av(),[u,d]=re.useState(!1),[g,y]=re.useState(!1),m=re.useRef(a==null?void 0:a.player.currentSong),[C,v]=re.useState(!1),[S,N]=re.useState(0),[D,M]=re.useState(""),{ref:z,focusKey:I}=dr.useFocusable();re.useEffect(()=>{const ee=()=>{y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",ee),()=>{document.removeEventListener("fullscreenchange",ee)}},[]);const T=re.useCallback(async()=>{var ee;try{document.fullscreenElement?await document.exitFullscreen():await((ee=e.current)==null?void 0:ee.requestFullscreen())}catch(J){console.error("[Player] Fullscreen error:",J)}},[]);re.useEffect(()=>{var Ce;if(window.YT&&typeof window.YT.Player=="function"){d(!0);return}if(window.YT){const q=setInterval(()=>{typeof window.YT.Player=="function"&&(clearInterval(q),d(!0))},100);setTimeout(()=>clearInterval(q),1e4);return}const ee=document.createElement("script");ee.src="https://www.youtube.com/iframe_api";const J=document.getElementsByTagName("script")[0];(Ce=J.parentNode)==null||Ce.insertBefore(ee,J),window.onYouTubeIframeAPIReady=()=>{d(!0)}},[]),re.useEffect(()=>{if(!(!u||!t.current||n.current))return n.current=new window.YT.Player(t.current,{height:"100%",width:"100%",playerVars:{autoplay:0,controls:0,modestbranding:1,rel:0,disablekb:1,iv_load_policy:3},events:{onReady:R,onStateChange:P}}),()=>{var ee;i.current&&(clearInterval(i.current),i.current=null),(ee=n.current)==null||ee.destroy(),n.current=null}},[u]);const R=()=>{console.log("[Player] YouTube player ready"),V()},P=ee=>{var q;const J=ee.data;let Ce="idle";switch(J){case window.YT.PlayerState.PLAYING:Ce="playing";break;case window.YT.PlayerState.PAUSED:Ce="paused";break;case window.YT.PlayerState.BUFFERING:Ce="loading";break;case window.YT.PlayerState.CUED:console.log("[Player] Video cued, starting playback"),(q=n.current)==null||q.playVideo(),Ce="loading";break;case window.YT.PlayerState.ENDED:Ce="idle",F();break}X(Ce)},X=async(ee,J,Ce)=>{try{await Me("update_player_state",{status:ee||void 0,currentTime:J!==void 0?J:void 0,duration:Ce!==void 0?Ce:void 0})}catch(q){console.error("[Player] Failed to update player state:",q)}},V=()=>{i.current&&(clearInterval(i.current),i.current=null);let ee=0;i.current=setInterval(()=>{if(n.current)try{const J=n.current.getCurrentTime(),Ce=n.current.getDuration();if(J>0){const q=Date.now();q-ee>=5e3&&(ee=q,X(void 0,J,Ce))}}catch{}},1e3)},F=re.useCallback(async()=>{var Ce;const ee=((Ce=a==null?void 0:a.player.currentSong)==null?void 0:Ce.title)||"";M(ee);const J=aS();N(J),v(!0)},[(ye=a==null?void 0:a.player.currentSong)==null?void 0:ye.title]),$=re.useCallback(async()=>{v(!1);try{await Me("process_command",{command:{type:"SKIP"}})}catch(ee){console.error("[Player] Failed to skip song:",ee)}},[]);re.useEffect(()=>{var J;const ee=a==null?void 0:a.player.currentSong;ee&&ee.id!==((J=m.current)==null?void 0:J.id)?(m.current=ee,n.current&&(console.log("[Player] Loading video:",ee.youtubeId),n.current.loadVideoById(ee.youtubeId))):!ee&&m.current&&(m.current=null,n.current&&(console.log("[Player] Stopping video - no current song"),n.current.stopVideo()))},[a==null?void 0:a.player.currentSong]),re.useEffect(()=>{if(!n.current)return;const ee=a==null?void 0:a.player.status;ee==="playing"?n.current.playVideo():ee==="paused"&&n.current.pauseVideo()},[a==null?void 0:a.player.status]);const H=a==null?void 0:a.player.currentSong,se=_.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:u?_.jsxs(_.Fragment,{children:[_.jsx("div",{ref:t,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0}}),!H&&_.jsxs("div",{className:"player-idle",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,background:"var(--bg-primary, #000)"},children:[_.jsx("div",{className:"player-idle-icon",children:Ud.music}),_.jsx("div",{className:"player-idle-text",children:"No song playing"}),_.jsx("p",{style:{color:"var(--text-muted)",marginTop:8},children:"Add songs from the remote or control panel"})]})]}):_.jsxs("div",{className:"player-idle",children:[_.jsx("div",{className:"spinner",style:{width:40,height:40}}),_.jsx("span",{children:"Loading player..."})]})});return _.jsx(dr.FocusContext.Provider,{value:I,children:_.jsxs("div",{ref:ee=>{e.current=ee,z&&"current"in z&&(z.current=ee)},className:"player-container",style:g?{width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column"}:void 0,children:[_.jsx("button",{className:"btn-icon btn-fullscreen",onClick:T,title:g?"Exit fullscreen":"Enter fullscreen",tabIndex:0,style:g?{position:"absolute",top:16,right:16,zIndex:100}:void 0,children:g?Ud.minimize:Ud.maximize}),_.jsx("div",{className:"player-inner",style:g?{flex:1}:void 0,children:se}),H&&!g&&_.jsxs("div",{className:"player-song-info",children:[_.jsx("h3",{className:"player-song-title",children:H.title}),_.jsxs("p",{className:"player-song-meta",children:[H.artist||"Unknown Artist","  Added by ",H.addedBy]})]}),C&&_.jsx(oS,{score:S,onComplete:$,songTitle:D})]})})};var cS=Object.defineProperty,vl=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,bv=Object.prototype.propertyIsEnumerable,iy=(t,e,n)=>e in t?cS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uS=(t,e)=>{for(var n in e||(e={}))Sv.call(e,n)&&iy(t,n,e[n]);if(vl)for(var n of vl(e))bv.call(e,n)&&iy(t,n,e[n]);return t},fS=(t,e)=>{var n={};for(var i in t)Sv.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&vl)for(var i of vl(t))e.indexOf(i)<0&&bv.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bi;(t=>{const e=class{constructor(y,m,C,v){if(this.version=y,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],y<e.MIN_VERSION||y>e.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=y*4+17;let S=[];for(let D=0;D<this.size;D++)S.push(!1);for(let D=0;D<this.size;D++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const N=this.addEccAndInterleave(C);if(this.drawCodewords(N),v==-1){let D=1e9;for(let M=0;M<8;M++){this.applyMask(M),this.drawFormatBits(M);const z=this.getPenaltyScore();z<D&&(v=M,D=z),this.applyMask(M)}}u(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(y,m){const C=t.QrSegment.makeSegments(y);return e.encodeSegments(C,m)}static encodeBinary(y,m){const C=t.QrSegment.makeBytes(y);return e.encodeSegments([C],m)}static encodeSegments(y,m,C=1,v=40,S=-1,N=!0){if(!(e.MIN_VERSION<=C&&C<=v&&v<=e.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let D,M;for(D=C;;D++){const R=e.getNumDataCodewords(D,m)*8,P=g.getTotalBits(y,D);if(P<=R){M=P;break}if(D>=v)throw new RangeError("Data too long")}for(const R of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])N&&M<=e.getNumDataCodewords(D,R)*8&&(m=R);let z=[];for(const R of y){i(R.mode.modeBits,4,z),i(R.numChars,R.mode.numCharCountBits(D),z);for(const P of R.getData())z.push(P)}u(z.length==M);const I=e.getNumDataCodewords(D,m)*8;u(z.length<=I),i(0,Math.min(4,I-z.length),z),i(0,(8-z.length%8)%8,z),u(z.length%8==0);for(let R=236;z.length<I;R^=253)i(R,8,z);let T=[];for(;T.length*8<z.length;)T.push(0);return z.forEach((R,P)=>T[P>>>3]|=R<<7-(P&7)),new e(D,m,T,S)}getModule(y,m){return 0<=y&&y<this.size&&0<=m&&m<this.size&&this.modules[m][y]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const y=this.getAlignmentPatternPositions(),m=y.length;for(let C=0;C<m;C++)for(let v=0;v<m;v++)C==0&&v==0||C==0&&v==m-1||C==m-1&&v==0||this.drawAlignmentPattern(y[C],y[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(y){const m=this.errorCorrectionLevel.formatBits<<3|y;let C=m;for(let S=0;S<10;S++)C=C<<1^(C>>>9)*1335;const v=(m<<10|C)^21522;u(v>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,a(v,S));this.setFunctionModule(8,7,a(v,6)),this.setFunctionModule(8,8,a(v,7)),this.setFunctionModule(7,8,a(v,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,a(v,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,a(v,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,a(v,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let y=this.version;for(let C=0;C<12;C++)y=y<<1^(y>>>11)*7973;const m=this.version<<12|y;u(m>>>18==0);for(let C=0;C<18;C++){const v=a(m,C),S=this.size-11+C%3,N=Math.floor(C/3);this.setFunctionModule(S,N,v),this.setFunctionModule(N,S,v)}}drawFinderPattern(y,m){for(let C=-4;C<=4;C++)for(let v=-4;v<=4;v++){const S=Math.max(Math.abs(v),Math.abs(C)),N=y+v,D=m+C;0<=N&&N<this.size&&0<=D&&D<this.size&&this.setFunctionModule(N,D,S!=2&&S!=4)}}drawAlignmentPattern(y,m){for(let C=-2;C<=2;C++)for(let v=-2;v<=2;v++)this.setFunctionModule(y+v,m+C,Math.max(Math.abs(v),Math.abs(C))!=1)}setFunctionModule(y,m,C){this.modules[m][y]=C,this.isFunction[m][y]=!0}addEccAndInterleave(y){const m=this.version,C=this.errorCorrectionLevel;if(y.length!=e.getNumDataCodewords(m,C))throw new RangeError("Invalid argument");const v=e.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][m],S=e.ECC_CODEWORDS_PER_BLOCK[C.ordinal][m],N=Math.floor(e.getNumRawDataModules(m)/8),D=v-N%v,M=Math.floor(N/v);let z=[];const I=e.reedSolomonComputeDivisor(S);for(let R=0,P=0;R<v;R++){let X=y.slice(P,P+M-S+(R<D?0:1));P+=X.length;const V=e.reedSolomonComputeRemainder(X,I);R<D&&X.push(0),z.push(X.concat(V))}let T=[];for(let R=0;R<z[0].length;R++)z.forEach((P,X)=>{(R!=M-S||X>=D)&&T.push(P[R])});return u(T.length==N),T}drawCodewords(y){if(y.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let v=0;v<this.size;v++)for(let S=0;S<2;S++){const N=C-S,M=(C+1&2)==0?this.size-1-v:v;!this.isFunction[M][N]&&m<y.length*8&&(this.modules[M][N]=a(y[m>>>3],7-(m&7)),m++)}}u(m==y.length*8)}applyMask(y){if(y<0||y>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let C=0;C<this.size;C++){let v;switch(y){case 0:v=(C+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=C%3==0;break;case 3:v=(C+m)%3==0;break;case 4:v=(Math.floor(C/3)+Math.floor(m/2))%2==0;break;case 5:v=C*m%2+C*m%3==0;break;case 6:v=(C*m%2+C*m%3)%2==0;break;case 7:v=((C+m)%2+C*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][C]&&v&&(this.modules[m][C]=!this.modules[m][C])}}getPenaltyScore(){let y=0;for(let S=0;S<this.size;S++){let N=!1,D=0,M=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[S][z]==N?(D++,D==5?y+=e.PENALTY_N1:D>5&&y++):(this.finderPenaltyAddHistory(D,M),N||(y+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),N=this.modules[S][z],D=1);y+=this.finderPenaltyTerminateAndCount(N,D,M)*e.PENALTY_N3}for(let S=0;S<this.size;S++){let N=!1,D=0,M=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][S]==N?(D++,D==5?y+=e.PENALTY_N1:D>5&&y++):(this.finderPenaltyAddHistory(D,M),N||(y+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),N=this.modules[z][S],D=1);y+=this.finderPenaltyTerminateAndCount(N,D,M)*e.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let N=0;N<this.size-1;N++){const D=this.modules[S][N];D==this.modules[S][N+1]&&D==this.modules[S+1][N]&&D==this.modules[S+1][N+1]&&(y+=e.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((N,D)=>N+(D?1:0),m);const C=this.size*this.size,v=Math.ceil(Math.abs(m*20-C*10)/C)-1;return u(0<=v&&v<=9),y+=v*e.PENALTY_N4,u(0<=y&&y<=2568888),y}getAlignmentPatternPositions(){if(this.version==1)return[];{const y=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(y*2-2))*2;let C=[6];for(let v=this.size-7;C.length<y;v-=m)C.splice(1,0,v);return C}}static getNumRawDataModules(y){if(y<e.MIN_VERSION||y>e.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*y+128)*y+64;if(y>=2){const C=Math.floor(y/7)+2;m-=(25*C-10)*C-55,y>=7&&(m-=36)}return u(208<=m&&m<=29648),m}static getNumDataCodewords(y,m){return Math.floor(e.getNumRawDataModules(y)/8)-e.ECC_CODEWORDS_PER_BLOCK[m.ordinal][y]*e.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][y]}static reedSolomonComputeDivisor(y){if(y<1||y>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<y-1;v++)m.push(0);m.push(1);let C=1;for(let v=0;v<y;v++){for(let S=0;S<m.length;S++)m[S]=e.reedSolomonMultiply(m[S],C),S+1<m.length&&(m[S]^=m[S+1]);C=e.reedSolomonMultiply(C,2)}return m}static reedSolomonComputeRemainder(y,m){let C=m.map(v=>0);for(const v of y){const S=v^C.shift();C.push(0),m.forEach((N,D)=>C[D]^=e.reedSolomonMultiply(N,S))}return C}static reedSolomonMultiply(y,m){if(y>>>8||m>>>8)throw new RangeError("Byte out of range");let C=0;for(let v=7;v>=0;v--)C=C<<1^(C>>>7)*285,C^=(m>>>v&1)*y;return u(C>>>8==0),C}finderPenaltyCountPatterns(y){const m=y[1];u(m<=this.size*3);const C=m>0&&y[2]==m&&y[3]==m*3&&y[4]==m&&y[5]==m;return(C&&y[0]>=m*4&&y[6]>=m?1:0)+(C&&y[6]>=m*4&&y[0]>=m?1:0)}finderPenaltyTerminateAndCount(y,m,C){return y&&(this.finderPenaltyAddHistory(m,C),m=0),m+=this.size,this.finderPenaltyAddHistory(m,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(y,m){m[0]==0&&(y+=this.size),m.pop(),m.unshift(y)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function i(y,m,C){if(m<0||m>31||y>>>m)throw new RangeError("Value out of range");for(let v=m-1;v>=0;v--)C.push(y>>>v&1)}function a(y,m){return(y>>>m&1)!=0}function u(y){if(!y)throw new Error("Assertion error")}const d=class{constructor(y,m,C){if(this.mode=y,this.numChars=m,this.bitData=C,m<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(y){let m=[];for(const C of y)i(C,8,m);return new d(d.Mode.BYTE,y.length,m)}static makeNumeric(y){if(!d.isNumeric(y))throw new RangeError("String contains non-numeric characters");let m=[];for(let C=0;C<y.length;){const v=Math.min(y.length-C,3);i(parseInt(y.substr(C,v),10),v*3+1,m),C+=v}return new d(d.Mode.NUMERIC,y.length,m)}static makeAlphanumeric(y){if(!d.isAlphanumeric(y))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],C;for(C=0;C+2<=y.length;C+=2){let v=d.ALPHANUMERIC_CHARSET.indexOf(y.charAt(C))*45;v+=d.ALPHANUMERIC_CHARSET.indexOf(y.charAt(C+1)),i(v,11,m)}return C<y.length&&i(d.ALPHANUMERIC_CHARSET.indexOf(y.charAt(C)),6,m),new d(d.Mode.ALPHANUMERIC,y.length,m)}static makeSegments(y){return y==""?[]:d.isNumeric(y)?[d.makeNumeric(y)]:d.isAlphanumeric(y)?[d.makeAlphanumeric(y)]:[d.makeBytes(d.toUtf8ByteArray(y))]}static makeEci(y){let m=[];if(y<0)throw new RangeError("ECI assignment value out of range");if(y<128)i(y,8,m);else if(y<16384)i(2,2,m),i(y,14,m);else if(y<1e6)i(6,3,m),i(y,21,m);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,m)}static isNumeric(y){return d.NUMERIC_REGEX.test(y)}static isAlphanumeric(y){return d.ALPHANUMERIC_REGEX.test(y)}getData(){return this.bitData.slice()}static getTotalBits(y,m){let C=0;for(const v of y){const S=v.mode.numCharCountBits(m);if(v.numChars>=1<<S)return 1/0;C+=4+S+v.bitData.length}return C}static toUtf8ByteArray(y){y=encodeURI(y);let m=[];for(let C=0;C<y.length;C++)y.charAt(C)!="%"?m.push(y.charCodeAt(C)):(m.push(parseInt(y.substr(C+1,2),16)),C+=2);return m}};let g=d;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=g})(Bi||(Bi={}));(t=>{(e=>{const n=class{constructor(a,u){this.ordinal=a,this.formatBits=u}};let i=n;i.LOW=new n(0,1),i.MEDIUM=new n(1,0),i.QUARTILE=new n(2,3),i.HIGH=new n(3,2),e.Ecc=i})(t.QrCode||(t.QrCode={}))})(Bi||(Bi={}));(t=>{(e=>{const n=class{constructor(a,u){this.modeBits=a,this.numBitsCharCount=u}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};let i=n;i.NUMERIC=new n(1,[10,12,14]),i.ALPHANUMERIC=new n(2,[9,11,13]),i.BYTE=new n(4,[8,16,16]),i.KANJI=new n(8,[8,10,12]),i.ECI=new n(7,[0,0,0]),e.Mode=i})(t.QrSegment||(t.QrSegment={}))})(Bi||(Bi={}));var ao=Bi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var dS={L:ao.QrCode.Ecc.LOW,M:ao.QrCode.Ecc.MEDIUM,Q:ao.QrCode.Ecc.QUARTILE,H:ao.QrCode.Ecc.HIGH},hS=128,pS="L",gS="#FFFFFF",mS="#000000",yS=!1,Tv=4,xS=.1;function CS(t,e=0){const n=[];return t.forEach(function(i,a){let u=null;i.forEach(function(d,g){if(!d&&u!==null){n.push(`M${u+e} ${a+e}h${g-u}v1H${u+e}z`),u=null;return}if(g===i.length-1){if(!d)return;u===null?n.push(`M${g+e},${a+e} h1v1H${g+e}z`):n.push(`M${u+e},${a+e} h${g+1-u}v1H${u+e}z`);return}d&&u===null&&(u=g)})}),n.join("")}function vS(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((a,u)=>u<e.x||u>=e.x+e.w?a:!1))}function wS(t,e,n,i){if(i==null)return null;const a=n?Tv:0,u=t.length+a*2,d=Math.floor(e*xS),g=u/e,y=(i.width||d)*g,m=(i.height||d)*g,C=i.x==null?t.length/2-y/2:i.x*g,v=i.y==null?t.length/2-m/2:i.y*g;let S=null;if(i.excavate){let N=Math.floor(C),D=Math.floor(v),M=Math.ceil(y+C-N),z=Math.ceil(m+v-D);S={x:N,y:D,w:M,h:z}}return{x:C,y:v,h:m,w:y,excavation:S}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function _S(t){const e=t,{value:n,size:i=hS,level:a=pS,bgColor:u=gS,fgColor:d=mS,includeMargin:g=yS,imageSettings:y}=e,m=fS(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=ao.QrCode.encodeText(n,dS[a]).getModules();const v=g?Tv:0,S=C.length+v*2,N=wS(C,i,g,y);let D=null;y!=null&&N!=null&&(N.excavation!=null&&(C=vS(C,N.excavation)),D=eo.createElement("image",{xlinkHref:y.src,height:N.h,width:N.w,x:N.x+v,y:N.y+v,preserveAspectRatio:"none"}));const M=CS(C,v);return eo.createElement("svg",uS({height:i,width:i,viewBox:`0 0 ${S} ${S}`},m),eo.createElement("path",{fill:u,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),eo.createElement("path",{fill:d,d:M,shapeRendering:"crispEdges"}),D)}const ES=({url:t,roomId:e})=>{const[n,i]=re.useState(""),[a,u]=re.useState(!0),[d,g]=re.useState(!1);re.useEffect(()=>{(async()=>{try{const C=await Me("get_qr_url");i(C),u(!1)}catch(C){console.error("Failed to get QR URL:",C);try{const v=await Me("get_server_port");i(t||`http://localhost:${v}`)}catch{i(t||window.location.origin)}u(!1)}})()},[t]);const y=async()=>{try{await navigator.clipboard.writeText(n),g(!0),setTimeout(()=>g(!1),2e3)}catch(m){console.error("Failed to copy:",m)}};return a||!n?_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"24px",background:"var(--bg-tertiary)",borderRadius:"12px"},children:[_.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid var(--bg-hover)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),_.jsx("p",{style:{marginTop:"12px",color:"var(--text-secondary)",fontSize:"14px"},children:"Loading..."})]}):_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[_.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(_S,{value:n,size:180,level:"M"})}),_.jsx("div",{style:{width:"100%",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:"var(--text-secondary)",textAlign:"center",wordBreak:"break-all"},children:n}),_.jsx("button",{onClick:y,style:{width:"100%",padding:"10px 16px",background:d?"var(--success)":"var(--bg-tertiary)",color:d?"white":"var(--text-primary)",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"14px",transition:"all 0.2s"},children:d?" Copied!":"Copy Link"}),_.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",textAlign:"center",margin:0},children:"Scan QR code or share link to join"})]})},zd={chevronUp:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"18 15 12 9 6 15"})}),chevronDown:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("polyline",{points:"6 9 12 15 18 9"})}),trash:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("polyline",{points:"3 6 5 6 21 6"}),_.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})},Hd=({children:t,onClick:e,disabled:n,className:i,title:a})=>{const{ref:u,focused:d}=dr.useFocusable({onEnterPress:()=>{n||e()}});return _.jsx("button",{ref:u,className:`queue-action-btn ${i||""} ${d?"dpad-focused":""}`,onClick:e,disabled:n,title:a,tabIndex:0,children:t})},AS=({songs:t})=>{const{ref:e,focusKey:n}=dr.useFocusable(),i=async d=>{try{await Me("process_command",{command:{type:"MOVE_SONG_UP",songId:d}})}catch(g){console.error("[Queue] Failed to move song up:",g)}},a=async d=>{try{await Me("process_command",{command:{type:"MOVE_SONG_DOWN",songId:d}})}catch(g){console.error("[Queue] Failed to move song down:",g)}},u=async d=>{try{await Me("process_command",{command:{type:"REMOVE_SONG",songId:d}})}catch(g){console.error("[Queue] Failed to remove song:",g)}};return t.length===0?_.jsxs("div",{className:"queue-display",children:[_.jsx("h2",{className:"queue-header",children:"Up Next"}),_.jsxs("div",{className:"queue-empty",children:[_.jsx("p",{children:"No songs in queue"}),_.jsx("p",{className:"queue-empty-hint",children:"Add songs from your remote"})]})]}):_.jsx(dr.FocusContext.Provider,{value:n,children:_.jsxs("div",{ref:e,className:"queue-display",children:[_.jsxs("h2",{className:"queue-header",children:["Up Next ",_.jsx("span",{className:"queue-count",children:t.length})]}),_.jsx("div",{className:"queue-list",children:t.map((d,g)=>_.jsxs("div",{className:"queue-item-compact",children:[_.jsx("div",{className:"queue-number",children:g+1}),_.jsx("img",{src:d.thumbnailUrl,alt:d.title,className:"queue-thumb-compact"}),_.jsxs("div",{className:"queue-info-compact",children:[_.jsx("div",{className:"queue-title-compact",children:d.title}),_.jsxs("div",{className:"queue-meta-compact",children:[d.addedBy,"  ",SS(d.duration)]})]}),_.jsxs("div",{className:"queue-actions",children:[_.jsx(Hd,{onClick:()=>i(d.id),disabled:g===0,title:"Move up",children:zd.chevronUp}),_.jsx(Hd,{onClick:()=>a(d.id),disabled:g===t.length-1,title:"Move down",children:zd.chevronDown}),_.jsx(Hd,{className:"queue-action-btn-danger",onClick:()=>u(d.id),title:"Remove",children:zd.trash})]})]},d.id))})]})})};function SS(t){if(t===0)return"--:--";const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=t=>{const e=TS(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=re.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:u,iconNode:d,...g},y)=>re.createElement("svg",{ref:y,...IS,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Iv("lucide",a),...!u&&!RS(g)&&{"aria-hidden":"true"},...g},[...d.map(([m,C])=>re.createElement(m,C)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=re.forwardRef(({className:i,...a},u)=>re.createElement(NS,{ref:u,iconNode:e,className:Iv(`lucide-${bS(sy(t))}`,`lucide-${t}`,i),...a}));return n.displayName=sy(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],w0=ot("arrow-left",OS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qh=ot("chevron-down",kS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],DS=ot("chevron-left",PS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],LS=ot("chevron-right",MS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]],FS=ot("clapperboard",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],oy=ot("clipboard-paste",jS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zS=ot("download",US);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Rv=ot("globe",HS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],qS=ot("library",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nv=ot("lock",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],KS=ot("mic-vocal",WS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],YS=ot("monitor",XS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ov=ot("moon",ZS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Gh=ot("music",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],JS=ot("pause",$S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kv=ot("pencil",e4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],n4=ot("play",t4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$r=ot("plus",r4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],s4=ot("qr-code",i4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pv=ot("search",o4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],l4=ot("skip-forward",a4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],u4=ot("sliders-horizontal",c4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],d4=ot("smartphone",f4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],p4=ot("star",h4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Dv=ot("sun",g4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wl=ot("trash-2",m4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]],x4=ot("unplug",y4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Mv=ot("upload",C4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],w4=ot("user-plus",v4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],E4=ot("users",_4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S4=ot("x",A4),Qt=({children:t,onClick:e,className:n,style:i,title:a,disabled:u})=>{const{ref:d,focused:g}=dr.useFocusable({onEnterPress:()=>{!u&&e&&e()}});return _.jsx("button",{ref:d,className:`${n||""} ${g?"dpad-focused":""}`,style:i,onClick:e,title:a,disabled:u,tabIndex:0,children:t})},b4=({connectionUrl:t,roomId:e,queue:n,playlists:i,connectedClients:a,isCollapsed:u,onToggle:d,onSearch:g,searchResults:y,searching:m,onAddToPlaylist:C,isPlaying:v,currentSong:S,isMobile:N,onBack:D})=>{const[M,z]=re.useState(""),[I,T]=re.useState("dark"),[R,P]=re.useState(!1),[X,V]=re.useState(new Set),[F,$]=re.useState(new Set),[H,se]=re.useState(new Set),[ye,ee]=re.useState(new Set),[J,Ce]=re.useState([]),[q,Ve]=re.useState(null),[Re,ge]=re.useState(new Set),[Te,Ee]=re.useState(new Set),[Ke,Pe]=re.useState(null),ft=re.useRef(null),We=re.useRef(null),[It,ve]=re.useState(!1),[Ft,ze]=re.useState(""),[En,ae]=re.useState(!1),[Y,B]=re.useState(""),[U,K]=re.useState(null),[te,xe]=re.useState(null),[pe,he]=re.useState(""),{ref:me,focusKey:Ye}=dr.useFocusable();re.useEffect(()=>{oe()},[]);const oe=async()=>{try{const ne=await mv();Ce(ne)}catch(ne){console.error("[ControlPanel] Failed to load local playlists:",ne)}};re.useEffect(()=>{const ne=be=>{ft.current&&!ft.current.contains(be.target)&&(Pe(null),ve(!1)),We.current&&!We.current.contains(be.target)&&(Ve(null),ae(!1))};if(Ke||q)return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[Ke,q]),re.useEffect(()=>{!U&&J.length>0&&K(J[0].id)},[J,U]);const Be=ne=>{ne.preventDefault(),M.trim()&&(V(new Set),$(new Set),se(new Set),ee(new Set),ge(new Set),Ee(new Set),g(M))},Fe=()=>{const ne=I==="dark"?"light":"dark";T(ne),document.documentElement.classList.toggle("light",ne==="light")},Ne=async()=>{try{await Me("process_command",{command:{type:v?"PAUSE":"PLAY"}})}catch(ne){console.error("[ControlPanel] Play/Pause failed:",ne)}},yt=async()=>{try{await Me("process_command",{command:{type:"SKIP"}})}catch(ne){console.error("[ControlPanel] Skip failed:",ne)}},tt=async ne=>{V(be=>new Set(be).add(ne));try{await Me("process_command",{command:{type:"ADD_SONG",youtubeUrl:ne,addedBy:"Host"}}),$(be=>new Set(be).add(ne))}catch(be){console.error("[ControlPanel] Add to queue failed:",be)}finally{V(be=>{const at=new Set(be);return at.delete(ne),at})}},Pt=async(ne,be)=>{Pe(null),se(at=>new Set(at).add(ne));try{await C(ne,be),ee(at=>new Set(at).add(ne))}catch(at){console.error("[ControlPanel] Add to playlist failed:",at)}finally{se(at=>{const jt=new Set(at);return jt.delete(ne),jt})}},Dt=async ne=>{if(Ft.trim())try{const be=await xl(Ft.trim(),"personal");ze(""),ve(!1),await oe(),ne&&ne&&(await Vh(ne,be,"Host"),await oe())}catch(be){console.error("[ControlPanel] Create collection failed:",be)}},He=async(ne,be)=>{Ve(null),ge(at=>new Set(at).add(ne));try{await Vh(ne,be,"Host"),Ee(at=>new Set(at).add(ne)),await oe()}catch(at){console.error("[ControlPanel] Add to library failed:",at)}finally{ge(at=>{const jt=new Set(at);return jt.delete(ne),jt})}},Xt=async ne=>{if(Y.trim())try{const be=await xl(Y.trim(),"personal");B(""),ae(!1),await oe(),ne&&await He(ne,be),Ve(null)}catch(be){console.error("[ControlPanel] Create library collection failed:",be)}},mn=async(ne,be)=>{try{await Me("process_command",{command:{type:"PLAYLIST_TO_QUEUE",songId:be,collectionId:ne}})}catch(at){console.error("[ControlPanel] Playlist to queue failed:",at)}},An=async(ne,be)=>{try{await vv(ne,be),await oe()}catch(at){console.error("[ControlPanel] Remove from playlist failed:",at)}},Qe=async ne=>{if(confirm("Are you sure you want to delete this collection?"))try{if(await yv(ne),await oe(),U===ne){const be=J.find(at=>at.id!==ne);K(be?be.id:null)}}catch(be){console.error("[ControlPanel] Delete collection failed:",be)}},de=async ne=>{if(!pe.trim()){xe(null);return}try{await xv(ne,pe.trim()),await oe()}catch(be){console.error("[ControlPanel] Rename failed:",be)}finally{xe(null)}},je=async ne=>{try{const be=ne.visibility==="public"?"private":"public";await Cv(ne.id,be==="public"?"public":"personal"),await oe()}catch(be){console.error("[ControlPanel] Toggle visibility failed:",be)}},Le=async ne=>{try{const be=await gv(ne);await navigator.clipboard.writeText(be),alert("Collection copied to clipboard!")}catch(be){console.error("[ControlPanel] Export failed:",be),alert("Export failed")}},dt=async()=>{try{const ne=await navigator.clipboard.readText();await Me("process_command",{command:{type:"IMPORT_COLLECTION",data:ne}})}catch(ne){console.error("[ControlPanel] Import failed:",ne),alert("Import failed. Make sure you have a valid collection JSON in your clipboard.")}},Tr=async ne=>{try{await wv(ne)}catch(be){if(console.error("[ControlPanel] Save to file failed:",be),typeof be=="string"&&be.includes("cancelled"))return;alert("Failed to save file")}},Ur=async()=>{try{const ne=await _v();await Me("process_command",{command:{type:"IMPORT_COLLECTION",data:ne}})}catch(ne){if(console.error("[ControlPanel] Load from file failed:",ne),typeof ne=="string"&&ne.includes("cancelled"))return;alert("Failed to load file")}},Mt=J.find(ne=>ne.id===U),$e=J.reduce((ne,be)=>ne+be.songs.length,0);return _.jsxs(dr.FocusContext.Provider,{value:Ye,children:[!N&&_.jsx("button",{className:"panel-toggle",onClick:d,style:{right:u?"0px":"var(--panel-width)",transition:"right 0.3s ease"},tabIndex:0,children:u?_.jsx(DS,{size:20}):_.jsx(LS,{size:20})}),_.jsxs("div",{ref:me,className:`control-panel ${u?"collapsed":""} ${N?"control-panel-mobile":""}`,children:[_.jsxs("div",{className:"control-panel-header",children:[_.jsx("span",{className:"control-panel-title",children:"KaraokeNatin"}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[D&&_.jsx(Qt,{className:"btn-icon",onClick:D,title:"Back to mode selection",children:_.jsx(w0,{size:18})}),_.jsx(Qt,{className:"btn-icon",onClick:Fe,children:I==="dark"?_.jsx(Dv,{size:18}):_.jsx(Ov,{size:18})})]})]}),_.jsxs("div",{className:"control-panel-content",children:[_.jsxs("div",{className:"control-panel-section",children:[_.jsxs(Qt,{onClick:()=>P(!R),className:"invite-btn",style:{background:R?"var(--accent)":"var(--bg-tertiary)",color:R?"white":"var(--text-primary)"},children:[_.jsx(w4,{size:18})," Invite Friends"]}),R&&_.jsx("div",{style:{marginTop:"12px"},children:_.jsx(ES,{url:t,roomId:e!=null?e:null})})]}),_.jsxs("div",{className:"control-panel-section",children:[_.jsx("div",{className:"section-label",children:"Now Playing"}),S?_.jsxs("div",{className:"now-playing-card",children:[_.jsx("div",{className:"now-playing-title",children:S.title}),_.jsx("div",{className:"now-playing-artist",children:S.artist||"Unknown Artist"})]}):_.jsx("div",{className:"now-playing-empty",children:"No song playing"}),_.jsxs("div",{className:"player-controls-row",children:[_.jsx(Qt,{className:"btn-icon btn-accent",onClick:Ne,title:v?"Pause":"Play",children:v?_.jsx(JS,{size:20}):_.jsx(n4,{size:20})}),_.jsx(Qt,{className:"btn-icon",onClick:yt,title:"Skip",children:_.jsx(l4,{size:20})})]})]}),_.jsx("div",{className:"control-panel-section",children:_.jsxs("div",{className:"status-item",children:[_.jsx(E4,{size:16}),_.jsxs("span",{children:[a," connected"]})]})}),_.jsxs("div",{className:"control-panel-section",children:[_.jsx("div",{className:"section-label",children:"Add Songs"}),_.jsx("form",{onSubmit:Be,className:"search-container",children:_.jsxs("div",{className:"search-row",children:[_.jsx("input",{type:"text",className:"search-input",placeholder:"Search for songs...",value:M,onChange:ne=>z(ne.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1),onKeyDown:ne=>{ne.key==="Enter"&&(ne.preventDefault(),ne.stopPropagation(),M.trim()&&g(M))},tabIndex:0}),_.jsx(Qt,{className:"btn-icon search-btn",onClick:()=>Be({preventDefault:()=>{}}),children:_.jsx(Pv,{size:18})})]})}),m&&_.jsxs("div",{className:"search-loading",children:[_.jsx("div",{className:"spinner"}),_.jsx("p",{children:"Searching..."})]}),!m&&y.length>0&&_.jsx("div",{className:"search-results",children:y.map((ne,be)=>{const at=X.has(ne.url),jt=F.has(ne.url),Gi=H.has(ne.url),Vt=ye.has(ne.url),Ir=Re.has(ne.url),yi=Te.has(ne.url);return _.jsxs("div",{className:"search-result-item",children:[_.jsx("img",{src:ne.thumbnail,alt:"",className:"search-result-thumb"}),_.jsxs("div",{className:"search-result-info",children:[_.jsx("div",{className:"search-result-title",children:ne.title}),_.jsxs("div",{className:"search-result-meta",children:[ne.channel,"  ",ne.duration]}),_.jsxs("div",{className:"search-result-actions",children:[_.jsx(Qt,{className:`btn-sm ${jt?"btn-success":"btn-primary"}`,onClick:()=>tt(ne.url),disabled:at,children:at?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-tiny"})," Adding..."]}):jt?_.jsx(_.Fragment,{children:" Queued"}):_.jsxs(_.Fragment,{children:[_.jsx($r,{size:14})," Queue"]})}),_.jsxs("div",{className:"playlist-picker-wrapper",style:{position:"relative"},children:[_.jsx(Qt,{className:`btn-sm ${Vt?"btn-success":"btn-secondary"}`,onClick:()=>Pe(Ke===ne.url?null:ne.url),disabled:Gi,children:Gi?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-tiny"})," Adding..."]}):Vt?_.jsx(_.Fragment,{children:" Saved"}):_.jsxs(_.Fragment,{children:[_.jsx(Gh,{size:14})," Playlist ",_.jsx(qh,{size:12})]})}),Ke===ne.url&&_.jsxs("div",{ref:ft,className:"collection-picker",children:[_.jsx("div",{className:"collection-picker-title",children:"Add to Collection"}),i.map(nt=>_.jsxs("button",{className:"collection-picker-item",onClick:()=>Pt(ne.url,nt.id),children:[_.jsx("span",{className:`visibility-dot ${nt.visibility}`}),nt.name,_.jsx("span",{className:"collection-picker-count",children:nt.songs.length})]},nt.id)),_.jsx("div",{className:"collection-picker-divider"}),It?_.jsxs("div",{className:"collection-picker-new",children:[_.jsx("input",{type:"text",placeholder:"Collection name...",value:Ft,onChange:nt=>ze(nt.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1),onKeyDown:nt=>{nt.key==="Enter"&&(nt.preventDefault(),Dt(ne.url)),nt.stopPropagation()},autoFocus:!0,className:"collection-picker-input"}),_.jsx("button",{className:"btn-sm btn-primary",onClick:()=>Dt(ne.url),children:"Create"})]}):_.jsxs("button",{className:"collection-picker-item collection-picker-create",onClick:()=>ve(!0),children:[_.jsx($r,{size:14})," New Collection"]})]})]}),_.jsxs("div",{className:"playlist-picker-wrapper",style:{position:"relative"},children:[_.jsx(Qt,{className:`btn-sm ${yi?"btn-success":"btn-secondary"}`,onClick:()=>Ve(q===ne.url?null:ne.url),disabled:Ir,children:Ir?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner-tiny"})," Saving..."]}):yi?_.jsx(_.Fragment,{children:" In Library"}):_.jsxs(_.Fragment,{children:[_.jsx(p4,{size:14})," Library ",_.jsx(qh,{size:12})]})}),q===ne.url&&_.jsxs("div",{ref:We,className:"collection-picker",children:[_.jsx("div",{className:"collection-picker-title",children:"Save to Library"}),J.map(nt=>_.jsxs("button",{className:"collection-picker-item",onClick:()=>He(ne.url,nt.id),children:[_.jsx("span",{className:`visibility-dot ${nt.visibility}`}),nt.name,_.jsx("span",{className:"collection-picker-count",children:nt.songs.length})]},nt.id)),_.jsx("div",{className:"collection-picker-divider"}),En?_.jsxs("div",{className:"collection-picker-new",children:[_.jsx("input",{type:"text",placeholder:"Collection name...",value:Y,onChange:nt=>B(nt.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1),onKeyDown:nt=>{nt.key==="Enter"&&(nt.preventDefault(),Xt(ne.url)),nt.stopPropagation()},autoFocus:!0,className:"collection-picker-input"}),_.jsx("button",{className:"btn-sm btn-primary",onClick:()=>Xt(ne.url),children:"Create"})]}):_.jsxs("button",{className:"collection-picker-item collection-picker-create",onClick:()=>ae(!0),children:[_.jsx($r,{size:14})," New Collection"]})]})]})]})]})]},be)})})]}),_.jsxs("div",{className:"control-panel-section",children:[_.jsxs("div",{className:"section-label",children:["Queue (",n.length,")"]}),_.jsx(AS,{songs:n})]}),_.jsxs("div",{className:"control-panel-section",children:[_.jsxs("div",{className:"section-label",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("span",{children:[_.jsx(Gh,{size:16,style:{display:"inline",verticalAlign:"-2px"}})," Playlists (",$e,")"]}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsxs(Qt,{className:"btn-sm btn-secondary",onClick:Ur,title:"Open playlist file",children:[_.jsx("span",{style:{fontSize:"14px"},children:""})," Open"]}),_.jsxs(Qt,{className:"btn-sm btn-secondary",onClick:dt,title:"Import collection from clipboard",children:[_.jsx(zS,{size:13})," Import"]})]})]}),J.length>0&&_.jsxs("div",{className:"collection-tabs",children:[J.map(ne=>_.jsxs("button",{className:`collection-tab ${U===ne.id?"active":""}`,onClick:()=>K(ne.id),title:`${ne.name} (${ne.visibility})`,children:[_.jsx("span",{className:`visibility-dot ${ne.visibility}`}),te===ne.id?_.jsx("input",{className:"collection-rename-input",value:pe,onChange:be=>he(be.target.value),onFocus:()=>fn(!0),onBlur:()=>{fn(!1),de(ne.id)},onKeyDown:be=>{be.key==="Enter"&&de(ne.id),be.key==="Escape"&&xe(null),be.stopPropagation()},autoFocus:!0,onClick:be=>be.stopPropagation()}):_.jsxs("span",{children:[ne.name," (",ne.songs.length,")"]})]},ne.id)),_.jsx("button",{className:"collection-tab collection-tab-add",onClick:()=>{Me("process_command",{command:{type:"CREATE_COLLECTION",name:"New Collection",visibility:"public"}})},title:"Create new collection",children:_.jsx($r,{size:14})})]}),Mt&&_.jsxs("div",{className:"collection-actions-bar",children:[_.jsx(Qt,{className:"btn-sm btn-secondary",onClick:()=>je(Mt),title:Mt.visibility==="public"?"Make personal":"Make public",children:Mt.visibility==="public"?_.jsxs(_.Fragment,{children:[_.jsx(Rv,{size:13})," Public"]}):_.jsxs(_.Fragment,{children:[_.jsx(Nv,{size:13})," Personal"]})}),_.jsx(Qt,{className:"btn-sm btn-secondary",onClick:()=>{xe(Mt.id),he(Mt.name)},title:"Rename",children:_.jsx(kv,{size:13})}),_.jsxs(Qt,{className:"btn-sm btn-secondary",onClick:()=>Le(Mt.id),title:"Export to clipboard",children:[_.jsx(Mv,{size:13})," Export"]}),_.jsxs(Qt,{className:"btn-sm btn-secondary",onClick:()=>Tr(Mt.id),title:"Save to file",children:[_.jsx("span",{style:{fontSize:"14px"},children:""})," Save"]}),i.length>1&&_.jsx(Qt,{className:"btn-sm btn-danger-text",onClick:()=>{confirm(`Delete "${Mt.name}"?`)&&Qe(Mt.id)},title:"Delete collection",children:_.jsx(wl,{size:13})})]}),!Mt||Mt.songs.length===0?_.jsxs("div",{className:"playlist-empty",children:[_.jsx("p",{children:J.length===0?"No collections yet":"No songs in this collection"}),_.jsx("p",{className:"playlist-empty-hint",children:"Add songs from search results"})]}):_.jsx("div",{className:"playlist-list",children:Mt.songs.map((ne,be)=>_.jsxs("div",{className:"playlist-item",children:[_.jsx("span",{className:"playlist-number",children:be+1}),_.jsx("img",{src:ne.thumbnailUrl,alt:"",className:"playlist-thumb"}),_.jsx("div",{className:"playlist-info",children:_.jsx("div",{className:"playlist-title",children:ne.title})}),_.jsxs(Qt,{className:"btn-sm btn-primary",onClick:()=>mn(Mt.id,ne.id),children:[_.jsx($r,{size:14})," Queue"]}),_.jsx(Qt,{className:"playlist-remove-btn",onClick:()=>An(Mt.id,ne.id),title:"Remove from playlist",children:_.jsx(wl,{size:14})})]},ne.id))})]})]})]})]})};var _e;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(_e||(_e={}));var ay=new Map([[_e.QR_CODE,"QR_CODE"],[_e.AZTEC,"AZTEC"],[_e.CODABAR,"CODABAR"],[_e.CODE_39,"CODE_39"],[_e.CODE_93,"CODE_93"],[_e.CODE_128,"CODE_128"],[_e.DATA_MATRIX,"DATA_MATRIX"],[_e.MAXICODE,"MAXICODE"],[_e.ITF,"ITF"],[_e.EAN_13,"EAN_13"],[_e.EAN_8,"EAN_8"],[_e.PDF_417,"PDF_417"],[_e.RSS_14,"RSS_14"],[_e.RSS_EXPANDED,"RSS_EXPANDED"],[_e.UPC_A,"UPC_A"],[_e.UPC_E,"UPC_E"],[_e.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ly;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(ly||(ly={}));function T4(t){return Object.values(_e).includes(t)}var _l;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_l||(_l={}));var I4=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_l.SCAN_TYPE_CAMERA,_l.SCAN_TYPE_FILE],t}(),Lv=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!ay.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,ay.get(e))},t}(),cy=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Wh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Wh||(Wh={}));var R4=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Wh.UNKWOWN_ERROR}},t}(),N4=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Rr(t){return typeof t>"u"||t===null}var gs=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Bv=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(a),d=Object.keys(e),g=0,y=d;g<y.length;g++){var m=y[g];if(u.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),Kh={exports:{}};(function(t,e){(function(n,i){i(e)})(vr,function(n){function i(E){return E==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,r){E.__proto__=r}||function(E,r){for(var s in r)r.hasOwnProperty(s)&&(E[s]=r[s])};function u(E,r){a(E,r);function s(){this.constructor=E}E.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function d(E,r){var s=Object.setPrototypeOf;s?s(E,r):E.__proto__=r}function g(E,r){r===void 0&&(r=E.constructor);var s=Error.captureStackTrace;s&&s(E,r)}var y=function(E){u(r,E);function r(s){var o=this.constructor,l=E.call(this,s)||this;return Object.defineProperty(l,"name",{value:o.name,enumerable:!1}),d(l,o.prototype),g(l),l}return r}(Error);class m extends y{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}m.kind="Exception";class C extends m{}C.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,l){const c=this.binarizer.getLuminanceSource().crop(r,s,o,l);return new S(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends m{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class D{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(r,s,o,l,c){for(;c--;)o[l++]=r[s++]}static currentTimeMillis(){return Date.now()}}class z extends m{}z.kind="IndexOutOfBoundsException";class I extends z{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}I.kind="ArrayIndexOutOfBoundsException";class T{static fill(r,s){for(let o=0,l=r.length;o<l;o++)r[o]=s}static fillWithin(r,s,o,l){T.rangeCheck(r.length,s,o);for(let c=s;c<o;c++)r[c]=l}static rangeCheck(r,s,o){if(s>o)throw new v("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new I(s);if(o>r)throw new I(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(c=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(c=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,l=r.length;o<l;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const l=o-s,c=new Int32Array(l);return M.arraycopy(r,s,c,0,l),c}static binarySearch(r,s,o){o===void 0&&(o=T.numberComparator);let l=0,c=r.length-1;for(;l<=c;){const f=c+l>>1,h=o(s,r[f]);if(h>0)l=f+1;else if(h<0)c=f-1;else return f}return-l-1}static numberComparator(r,s){return r-s}}class R{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=P.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=P.makeArray(r);M.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),c=o[l];c&=~((1<<(r&31))-1);const f=o.length;for(;c===0;){if(++l===f)return s;c=o[l]}const h=l*32+R.numberOfTrailingZeros(c);return h>s?s:h}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),c=~o[l];c&=~((1<<(r&31))-1);const f=o.length;for(;c===0;){if(++l===f)return s;c=~o[l]}const h=l*32+R.numberOfTrailingZeros(c);return h>s?s:h}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new v;if(s===r)return;s--;const o=Math.floor(r/32),l=Math.floor(s/32),c=this.bits;for(let f=o;f<=l;f++){const h=f>o?0:r&31,x=(2<<(f<l?31:s&31))-(1<<h);c[f]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new v;if(s===r)return!0;s--;const l=Math.floor(r/32),c=Math.floor(s/32),f=this.bits;for(let h=l;h<=c;h++){const p=h>l?0:r&31,w=(2<<(h<c?31:s&31))-(1<<p)&4294967295;if((f[h]&w)!==(o?w:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new v("Sizes don't match");const s=this.bits;for(let o=0,l=s.length;o<l;o++)s[o]^=r.bits[o]}toBytes(r,s,o,l){for(let c=0;c<l;c++){let f=0;for(let h=0;h<8;h++)this.get(r)&&(f|=1<<7-h),r++;s[o+c]=f}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,l=this.bits;for(let c=0;c<o;c++){let f=l[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,r[s-c]=f}if(this.size!==o*32){const c=o*32-this.size;let f=r[0]>>>c;for(let h=1;h<o;h++){const p=r[h];f|=p<<32-c,r[h-1]=f,f=p>>>c}r[o-1]=f}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof P))return!1;const s=r;return this.size===s.size&&T.equals(this.bits,s.bits)}hashCode(){return 31*this.size+T.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new P(this.size,this.bits.slice())}}var X;(function(E){E[E.OTHER=0]="OTHER",E[E.PURE_BARCODE=1]="PURE_BARCODE",E[E.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",E[E.TRY_HARDER=3]="TRY_HARDER",E[E.CHARACTER_SET=4]="CHARACTER_SET",E[E.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",E[E.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",E[E.ASSUME_GS1=7]="ASSUME_GS1",E[E.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",E[E.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",E[E.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(X||(X={}));var V=X;class F extends m{static getFormatInstance(){return new F}}F.kind="FormatException";var $;(function(E){E[E.Cp437=0]="Cp437",E[E.ISO8859_1=1]="ISO8859_1",E[E.ISO8859_2=2]="ISO8859_2",E[E.ISO8859_3=3]="ISO8859_3",E[E.ISO8859_4=4]="ISO8859_4",E[E.ISO8859_5=5]="ISO8859_5",E[E.ISO8859_6=6]="ISO8859_6",E[E.ISO8859_7=7]="ISO8859_7",E[E.ISO8859_8=8]="ISO8859_8",E[E.ISO8859_9=9]="ISO8859_9",E[E.ISO8859_10=10]="ISO8859_10",E[E.ISO8859_11=11]="ISO8859_11",E[E.ISO8859_13=12]="ISO8859_13",E[E.ISO8859_14=13]="ISO8859_14",E[E.ISO8859_15=14]="ISO8859_15",E[E.ISO8859_16=15]="ISO8859_16",E[E.SJIS=16]="SJIS",E[E.Cp1250=17]="Cp1250",E[E.Cp1251=18]="Cp1251",E[E.Cp1252=19]="Cp1252",E[E.Cp1256=20]="Cp1256",E[E.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",E[E.UTF8=22]="UTF8",E[E.ASCII=23]="ASCII",E[E.Big5=24]="Big5",E[E.GB18030=25]="GB18030",E[E.EUC_KR=26]="EUC_KR"})($||($={}));class H{constructor(r,s,o,...l){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=l,H.VALUE_IDENTIFIER_TO_ECI.set(r,this),H.NAME_TO_ECI.set(o,this);const c=this.values;for(let f=0,h=c.length;f!==h;f++){const p=c[f];H.VALUES_TO_ECI.set(p,this)}for(const f of l)H.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const s=H.VALUES_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(r){const s=H.NAME_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}equals(r){if(!(r instanceof H))return!1;const s=r;return this.getName()===s.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H($.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H($.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H($.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H($.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H($.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H($.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H($.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H($.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H($.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H($.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H($.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H($.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H($.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H($.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H($.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H($.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H($.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H($.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H($.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H($.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H($.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H($.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H($.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H($.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H($.Big5,28,"Big5"),H.GB18030=new H($.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H($.EUC_KR,30,"EUC_KR","EUC-KR");class se extends m{}se.kind="UnsupportedOperationException";class ye{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!ye.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof H?r:H.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(ye.isDecodeFallbackSupported(o)){let l="";for(let c=0,f=r.length;c<f;c++){let h=r[c].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(o.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new se(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(H.UTF8)||r.equals(H.ISO8859_1)||r.equals(H.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),l=[];for(let c=0;c<o.length;c++)l.push(o[c].charCodeAt(0));return new Uint8Array(l)}}class ee{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return ye.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(V.CHARACTER_SET)!==void 0)return s.get(V.CHARACTER_SET).toString();const o=r.length;let l=!0,c=!0,f=!0,h=0,p=0,x=0,w=0,A=0,b=0,k=0,L=0,j=0,G=0,Q=0;const ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let fe=0;fe<o&&(l||c||f);fe++){const le=r[fe]&255;f&&(h>0?le&128?h--:f=!1:le&128&&(le&64?(h++,le&32?(h++,le&16?(h++,le&8?f=!1:w++):x++):p++):f=!1)),l&&(le>127&&le<160?l=!1:le>159&&(le<192||le===215||le===247)&&Q++),c&&(A>0?le<64||le===127||le>252?c=!1:A--:le===128||le===160||le>239?c=!1:le>160&&le<224?(b++,L=0,k++,k>j&&(j=k)):le>127?(A++,k=0,L++,L>G&&(G=L)):(k=0,L=0))}return f&&h>0&&(f=!1),c&&A>0&&(c=!1),f&&(ue||p+x+w>0)?ee.UTF8:c&&(ee.ASSUME_SHIFT_JIS||j>=3||G>=3)?ee.SHIFT_JIS:l&&c?j===2&&b===2||Q*10>=o?ee.SHIFT_JIS:ee.ISO88591:l?ee.ISO88591:c?ee.SHIFT_JIS:f?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function l(f,h,p,x,w,A){if(f==="%%")return"%";if(s[++o]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let b=w?parseInt(w.substr(1)):void 0,k;switch(A){case"s":k=s[o];break;case"c":k=s[o][0];break;case"f":k=parseFloat(s[o]).toFixed(f);break;case"p":k=parseFloat(s[o]).toPrecision(f);break;case"e":k=parseFloat(s[o]).toExponential(f);break;case"x":k=parseInt(s[o]).toString(b||16);break;case"d":k=parseFloat(parseInt(s[o],b||10).toPrecision(f)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(b);let L=parseInt(p),j=p&&p[0]+""=="0"?"0":" ";for(;k.length<L;)k=h!==void 0?k+j:j+k;return k}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,l)}static getBytes(r,s){return ye.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}ee.SHIFT_JIS=H.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=H.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=H.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class J{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let l=s;s<s+o;l++)this.append(r[l]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class Ce{constructor(r,s,o,l){if(this.width=r,this.height=s,this.rowSize=o,this.bits=l,s==null&&(s=r),this.height=s,r<1||s<1)throw new v("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,l=new Ce(o,s);for(let c=0;c<s;c++){const f=r[c];for(let h=0;h<o;h++)f[h]&&l.set(h,c)}return l}static parseFromString(r,s,o){if(r===null)throw new v("stringRepresentation cannot be null");const l=new Array(r.length);let c=0,f=0,h=-1,p=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(c>f){if(h===-1)h=c-f;else if(c-f!==h)throw new v("row lengths do not match");f=c,p++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,l[c]=!0,c++;else if(r.substring(x,x+o.length)===o)x+=o.length,l[c]=!1,c++;else throw new v("illegal character encountered: "+r.substring(x));if(c>f){if(h===-1)h=c-f;else if(c-f!==h)throw new v("row lengths do not match");p++}const w=new Ce(h,p);for(let A=0;A<c;A++)l[A]&&w.set(Math.floor(A%h),Math.floor(A/h));return w}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new v("input matrix dimensions do not match");const s=new P(Math.floor(this.width/32)+1),o=this.rowSize,l=this.bits;for(let c=0,f=this.height;c<f;c++){const h=c*o,p=r.getRow(c,s).getBitArray();for(let x=0;x<o;x++)l[h+x]^=p[x]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,l){if(s<0||r<0)throw new v("Left and top must be nonnegative");if(l<1||o<1)throw new v("Height and width must be at least 1");const c=r+o,f=s+l;if(f>this.height||c>this.width)throw new v("The region must fit inside the matrix");const h=this.rowSize,p=this.bits;for(let x=s;x<f;x++){const w=x*h;for(let A=r;A<c;A++)p[w+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new P(this.width):s.clear();const o=this.rowSize,l=this.bits,c=r*o;for(let f=0;f<o;f++)s.setBulk(f*32,l[c+f]);return s}setRow(r,s){M.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new P(r),l=new P(r);for(let c=0,f=Math.floor((s+1)/2);c<f;c++)o=this.getRow(c,o),l=this.getRow(s-1-c,l),o.reverse(),l.reverse(),this.setRow(c,l),this.setRow(s-1-c,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,l=this.bits;let c=r,f=s,h=-1,p=-1;for(let x=0;x<s;x++)for(let w=0;w<o;w++){const A=l[x*o+w];if(A!==0){if(x<f&&(f=x),x>p&&(p=x),w*32<c){let b=0;for(;!(A<<31-b&4294967295);)b++;w*32+b<c&&(c=w*32+b)}if(w*32+31>h){let b=31;for(;!(A>>>b);)b--;w*32+b>h&&(h=w*32+b)}}}return h<c||p<f?null:Int32Array.from([c,f,h-c+1,p-f+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const l=o/r;let c=o%r*32;const f=s[o];let h=0;for(;!(f<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,l])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const l=Math.floor(o/r);let c=Math.floor(o%r)*32;const f=s[o];let h=31;for(;!(f>>>h);)h--;return c+=h,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ce))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&T.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+T.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let l=new J;for(let c=0,f=this.height;c<f;c++){for(let h=0,p=this.width;h<p;h++)l.append(this.get(h,c)?r:s);l.append(o)}return l.toString()}clone(){return new Ce(this.width,this.height,this.rowSize,this.bits.slice())}}class q extends m{static getNotFoundInstance(){return new q}}q.kind="NotFoundException";class Ve extends D{constructor(r){super(r),this.luminances=Ve.EMPTY,this.buckets=new Int32Array(Ve.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),l=o.getWidth();s==null||s.getSize()<l?s=new P(l):s.clear(),this.initArrays(l);const c=o.getRow(r,this.luminances),f=this.buckets;for(let p=0;p<l;p++)f[(c[p]&255)>>Ve.LUMINANCE_SHIFT]++;const h=Ve.estimateBlackPoint(f);if(l<3)for(let p=0;p<l;p++)(c[p]&255)<h&&s.set(p);else{let p=c[0]&255,x=c[1]&255;for(let w=1;w<l-1;w++){const A=c[w+1]&255;(x*4-p-A)/2<h&&s.set(w),p=x,x=A}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),l=new Ce(s,o);this.initArrays(s);const c=this.buckets;for(let p=1;p<5;p++){const x=Math.floor(o*p/5),w=r.getRow(x,this.luminances),A=Math.floor(s*4/5);for(let b=Math.floor(s/5);b<A;b++){const k=w[b]&255;c[k>>Ve.LUMINANCE_SHIFT]++}}const f=Ve.estimateBlackPoint(c),h=r.getMatrix();for(let p=0;p<o;p++){const x=p*s;for(let w=0;w<s;w++)(h[x+w]&255)<f&&l.set(w,p)}return l}createBinarizer(r){return new Ve(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<Ve.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,l=0,c=0;for(let w=0;w<s;w++)r[w]>c&&(l=w,c=r[w]),r[w]>o&&(o=r[w]);let f=0,h=0;for(let w=0;w<s;w++){const A=w-l,b=r[w]*A*A;b>h&&(f=w,h=b)}if(l>f){const w=l;l=f,f=w}if(f-l<=s/16)throw new q;let p=f-1,x=-1;for(let w=f-1;w>l;w--){const A=w-l,b=A*A*(f-w)*(o-r[w]);b>x&&(p=w,x=b)}return p<<Ve.LUMINANCE_SHIFT}}Ve.LUMINANCE_BITS=5,Ve.LUMINANCE_SHIFT=8-Ve.LUMINANCE_BITS,Ve.LUMINANCE_BUCKETS=1<<Ve.LUMINANCE_BITS,Ve.EMPTY=Uint8ClampedArray.from([0]);class Re extends Ve{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=Re.MINIMUM_DIMENSION&&o>=Re.MINIMUM_DIMENSION){const l=r.getMatrix();let c=s>>Re.BLOCK_SIZE_POWER;s&Re.BLOCK_SIZE_MASK&&c++;let f=o>>Re.BLOCK_SIZE_POWER;o&Re.BLOCK_SIZE_MASK&&f++;const h=Re.calculateBlackPoints(l,c,f,s,o),p=new Ce(s,o);Re.calculateThresholdForBlock(l,c,f,s,o,h,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Re(r)}static calculateThresholdForBlock(r,s,o,l,c,f,h){const p=c-Re.BLOCK_SIZE,x=l-Re.BLOCK_SIZE;for(let w=0;w<o;w++){let A=w<<Re.BLOCK_SIZE_POWER;A>p&&(A=p);const b=Re.cap(w,2,o-3);for(let k=0;k<s;k++){let L=k<<Re.BLOCK_SIZE_POWER;L>x&&(L=x);const j=Re.cap(k,2,s-3);let G=0;for(let ue=-2;ue<=2;ue++){const fe=f[b+ue];G+=fe[j-2]+fe[j-1]+fe[j]+fe[j+1]+fe[j+2]}const Q=G/25;Re.thresholdBlock(r,L,A,Q,l,h)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,l,c,f){for(let h=0,p=o*c+s;h<Re.BLOCK_SIZE;h++,p+=c)for(let x=0;x<Re.BLOCK_SIZE;x++)(r[p+x]&255)<=l&&f.set(s+x,o+h)}static calculateBlackPoints(r,s,o,l,c){const f=c-Re.BLOCK_SIZE,h=l-Re.BLOCK_SIZE,p=new Array(o);for(let x=0;x<o;x++){p[x]=new Int32Array(s);let w=x<<Re.BLOCK_SIZE_POWER;w>f&&(w=f);for(let A=0;A<s;A++){let b=A<<Re.BLOCK_SIZE_POWER;b>h&&(b=h);let k=0,L=255,j=0;for(let Q=0,ue=w*l+b;Q<Re.BLOCK_SIZE;Q++,ue+=l){for(let fe=0;fe<Re.BLOCK_SIZE;fe++){const le=r[ue+fe]&255;k+=le,le<L&&(L=le),le>j&&(j=le)}if(j-L>Re.MIN_DYNAMIC_RANGE)for(Q++,ue+=l;Q<Re.BLOCK_SIZE;Q++,ue+=l)for(let fe=0;fe<Re.BLOCK_SIZE;fe++)k+=r[ue+fe]&255}let G=k>>Re.BLOCK_SIZE_POWER*2;if(j-L<=Re.MIN_DYNAMIC_RANGE&&(G=L/2,x>0&&A>0)){const Q=(p[x-1][A]+2*p[x][A-1]+p[x-1][A-1])/4;L<Q&&(G=Q)}p[x][A]=G}}return p}}Re.BLOCK_SIZE_POWER=3,Re.BLOCK_SIZE=1<<Re.BLOCK_SIZE_POWER,Re.BLOCK_SIZE_MASK=Re.BLOCK_SIZE-1,Re.MINIMUM_DIMENSION=Re.BLOCK_SIZE*5,Re.MIN_DYNAMIC_RANGE=24;class ge{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,l){throw new se("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new se("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new se("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new J;for(let o=0;o<this.height;o++){const l=this.getRow(o,r);for(let c=0;c<this.width;c++){const f=l[c]&255;let h;f<64?h="#":f<128?h="+":f<192?h=".":h=" ",s.append(h)}s.append(`
`)}return s.toString()}}class Te extends ge{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),l=this.getWidth();for(let c=0;c<l;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let l=0;l<s;l++)o[l]=255-(r[l]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,l){return new Te(this.delegate.crop(r,s,o,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Ee extends ge{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Ee.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const l=new Uint8ClampedArray(s*o);for(let c=0,f=0,h=r.length;c<h;c+=4,f++){let p;if(r[c+3]===0)p=255;else{const w=r[c],A=r[c+1],b=r[c+2];p=306*w+601*A+117*b+512>>10}l[f]=p}return l}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const o=this.getWidth(),l=r*o;return s===null?s=this.buffer.slice(l,l+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(l,l+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,l){return super.crop(r,s,o,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),l=r*Ee.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*f),p=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*f);return s.width=h,s.height=p,o.translate(h/2,p/2),o.rotate(l),o.drawImage(this.canvas,c/-2,f/-2),this.buffer=Ee.makeBufferFromCanvasImageData(s),this}invert(){return new Te(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class Ke{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Pe=(globalThis||vr||self||window||void 0)&&(globalThis||vr||self||window||void 0).__awaiter||function(E,r,s,o){function l(c){return c instanceof s?c:new s(function(f){f(c)})}return new(s||(s=Promise))(function(c,f){function h(w){try{x(o.next(w))}catch(A){f(A)}}function p(w){try{x(o.throw(w))}catch(A){f(A)}}function x(w){w.done?c(w.value):l(w.value).then(h,p)}x((o=o.apply(E,r||[])).next())})};class ft{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const l=o.kind==="video"?"videoinput":o.kind;if(l!=="videoinput")continue;const c=o.deviceId||o.id,f=o.label||`Video device ${s.length+1}`,h=o.groupId,p={deviceId:c,label:f,kind:l,groupId:h};s.push(p)}return s})}getVideoInputDevices(){return Pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Ke(s.deviceId,s.label))})}findDeviceById(r){return Pe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Pe(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeOnceFromConstraints(l,s)})}decodeOnceFromConstraints(r,s){return Pe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return Pe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return Pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return Pe(this,void 0,void 0,function*(){let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,s,o)})}decodeFromConstraints(r,s,o){return Pe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(l,s,o)})}decodeFromStream(r,s,o){return Pe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(l,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Pe(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new C(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new C(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new C("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new C("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(o,s);return o.src=r,l}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const l=(c,f)=>{if(this._stopAsyncDecode){f(new q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);c(h)}catch(h){const p=s&&h instanceof q,w=(h instanceof N||h instanceof F)&&o;if(p||w)return setTimeout(l,this._timeBetweenDecodingAttempts,c,f);f(h)}};return new Promise((c,f)=>l(c,f))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(r);s(l,null),setTimeout(o,this.timeBetweenScansMillis)}catch(l){s(null,l);const c=l instanceof N||l instanceof F,f=l instanceof q;(c||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new Ee(s),l=new Re(o);return new S(l)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,l;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,l=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,l=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=l+"px",s.width=o,s.height=l,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class We{constructor(r,s,o=s==null?0:8*s.length,l,c,f=M.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=l,this.format=c,this.timestamp=f,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=l,this.format=c,this.resultMetadata=null,f==null?this.timestamp=M.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);M.arraycopy(s,0,o,0,s.length),M.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var It;(function(E){E[E.AZTEC=0]="AZTEC",E[E.CODABAR=1]="CODABAR",E[E.CODE_39=2]="CODE_39",E[E.CODE_93=3]="CODE_93",E[E.CODE_128=4]="CODE_128",E[E.DATA_MATRIX=5]="DATA_MATRIX",E[E.EAN_8=6]="EAN_8",E[E.EAN_13=7]="EAN_13",E[E.ITF=8]="ITF",E[E.MAXICODE=9]="MAXICODE",E[E.PDF_417=10]="PDF_417",E[E.QR_CODE=11]="QR_CODE",E[E.RSS_14=12]="RSS_14",E[E.RSS_EXPANDED=13]="RSS_EXPANDED",E[E.UPC_A=14]="UPC_A",E[E.UPC_E=15]="UPC_E",E[E.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(It||(It={}));var ve=It,Ft;(function(E){E[E.OTHER=0]="OTHER",E[E.ORIENTATION=1]="ORIENTATION",E[E.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",E[E.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",E[E.ISSUE_NUMBER=4]="ISSUE_NUMBER",E[E.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",E[E.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",E[E.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",E[E.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",E[E.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",E[E.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ft||(Ft={}));var ze=Ft;class En{constructor(r,s,o,l,c=-1,f=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ae{exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Y{constructor(r,s){if(s.length===0)throw new v;this.field=r;const o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-l),M.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let f=0,h=s.length;f!==h;f++){const p=s[f];o=ae.addOrSubtract(o,p)}return o}o=s[0];const l=s.length,c=this.field;for(let f=1;f<l;f++)o=ae.addOrSubtract(c.multiply(r,o),s[f]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const f=s;s=o,o=f}let l=new Int32Array(o.length);const c=o.length-s.length;M.arraycopy(o,0,l,0,c);for(let f=c;f<o.length;f++)l[f]=ae.addOrSubtract(s[f-c],o[f]);return new Y(this.field,l)}multiply(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,l=r.coefficients,c=l.length,f=new Int32Array(o+c-1),h=this.field;for(let p=0;p<o;p++){const x=s[p];for(let w=0;w<c;w++)f[p+w]=ae.addOrSubtract(f[p+w],h.multiply(x,l[w]))}return new Y(h,f)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,l=new Int32Array(s),c=this.coefficients;for(let f=0;f<s;f++)l[f]=o.multiply(c[f],r);return new Y(o,l)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return this.field.getZero();const o=this.coefficients,l=o.length,c=new Int32Array(l+r),f=this.field;for(let h=0;h<l;h++)c[h]=f.multiply(o[h],s);return new Y(f,c)}divide(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new v("Divide by 0");const s=this.field;let o=s.getZero(),l=this;const c=r.getCoefficient(r.getDegree()),f=s.inverse(c);for(;l.getDegree()>=r.getDegree()&&!l.isZero();){const h=l.getDegree()-r.getDegree(),p=s.multiply(l.getCoefficient(l.getDegree()),f),x=r.multiplyByMonomial(h,p),w=s.buildMonomial(h,p);o=o.addOrSubtract(w),l=l.addOrSubtract(x)}return[o,l]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const l=this.field.log(o);l===0?r+="1":l===1?r+="a":(r+="a^",r+=l)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class B extends m{}B.kind="ArithmeticException";class U extends ae{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const l=new Int32Array(s);let c=1;for(let h=0;h<s;h++)l[h]=c,c*=2,c>=s&&(c^=r,c&=s-1);this.expTable=l;const f=new Int32Array(s);for(let h=0;h<s-1;h++)f[l[h]]=h;this.logTable=f,this.zero=new Y(this,Int32Array.from([0])),this.one=new Y(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new Y(this,o)}inverse(r){if(r===0)throw new B;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}U.AZTEC_DATA_12=new U(4201,4096,1),U.AZTEC_DATA_10=new U(1033,1024,1),U.AZTEC_DATA_6=new U(67,64,1),U.AZTEC_PARAM=new U(19,16,1),U.QR_CODE_FIELD_256=new U(285,256,0),U.DATA_MATRIX_FIELD_256=new U(301,256,1),U.AZTEC_DATA_8=U.DATA_MATRIX_FIELD_256,U.MAXICODE_FIELD_64=U.AZTEC_DATA_6;class K extends m{}K.kind="ReedSolomonException";class te extends m{}te.kind="IllegalStateException";class xe{constructor(r){this.field=r}decode(r,s){const o=this.field,l=new Y(o,r),c=new Int32Array(s);let f=!0;for(let k=0;k<s;k++){const L=l.evaluateAt(o.exp(k+o.getGeneratorBase()));c[c.length-1-k]=L,L!==0&&(f=!1)}if(f)return;const h=new Y(o,c),p=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),x=p[0],w=p[1],A=this.findErrorLocations(x),b=this.findErrorMagnitudes(w,A);for(let k=0;k<A.length;k++){const L=r.length-1-o.log(A[k]);if(L<0)throw new K("Bad error location");r[L]=U.addOrSubtract(r[L],b[k])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const k=r;r=s,s=k}const l=this.field;let c=r,f=s,h=l.getZero(),p=l.getOne();for(;f.getDegree()>=(o/2|0);){let k=c,L=h;if(c=f,h=p,c.isZero())throw new K("r_{i-1} was zero");f=k;let j=l.getZero();const G=c.getCoefficient(c.getDegree()),Q=l.inverse(G);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const ue=f.getDegree()-c.getDegree(),fe=l.multiply(f.getCoefficient(f.getDegree()),Q);j=j.addOrSubtract(l.buildMonomial(ue,fe)),f=f.addOrSubtract(c.multiplyByMonomial(ue,fe))}if(p=j.multiply(h).addOrSubtract(L),f.getDegree()>=c.getDegree())throw new te("Division algorithm failed to reduce polynomial?")}const x=p.getCoefficient(0);if(x===0)throw new K("sigmaTilde(0) was zero");const w=l.inverse(x),A=p.multiplyScalar(w),b=f.multiplyScalar(w);return[A,b]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let l=0;const c=this.field;for(let f=1;f<c.getSize()&&l<s;f++)r.evaluateAt(f)===0&&(o[l]=c.inverse(f),l++);if(l!==s)throw new K("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,l=new Int32Array(o),c=this.field;for(let f=0;f<o;f++){const h=c.inverse(s[f]);let p=1;for(let x=0;x<o;x++)if(f!==x){const w=c.multiply(s[x],h),A=w&1?w&-2:w|1;p=c.multiply(p,A)}l[f]=c.multiply(r.evaluateAt(h),c.inverse(p)),c.getGeneratorBase()!==0&&(l[f]=c.multiply(l[f],h))}return l}}var pe;(function(E){E[E.UPPER=0]="UPPER",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.DIGIT=3]="DIGIT",E[E.PUNCT=4]="PUNCT",E[E.BINARY=5]="BINARY"})(pe||(pe={}));class he{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),l=this.correctBits(o),c=he.convertBoolArrayToByteArray(l),f=he.getEncodedData(l),h=new En(c,f,null,null);return h.setNumBits(l.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=pe.UPPER,l=pe.UPPER,c="",f=0;for(;f<s;)if(l===pe.BINARY){if(s-f<5)break;let h=he.readCode(r,f,5);if(f+=5,h===0){if(s-f<11)break;h=he.readCode(r,f,11)+31,f+=11}for(let p=0;p<h;p++){if(s-f<8){f=s;break}const x=he.readCode(r,f,8);c+=ee.castAsNonUtf8Char(x),f+=8}l=o}else{let h=l===pe.DIGIT?4:5;if(s-f<h)break;let p=he.readCode(r,f,h);f+=h;let x=he.getCharacter(l,p);x.startsWith("CTRL_")?(o=l,l=he.getTable(x.charAt(5)),x.charAt(6)==="L"&&(o=l)):(c+=x,l=o)}return c}static getTable(r){switch(r){case"L":return pe.LOWER;case"P":return pe.PUNCT;case"M":return pe.MIXED;case"D":return pe.DIGIT;case"B":return pe.BINARY;case"U":default:return pe.UPPER}}static getCharacter(r,s){switch(r){case pe.UPPER:return he.UPPER_TABLE[s];case pe.LOWER:return he.LOWER_TABLE[s];case pe.MIXED:return he.MIXED_TABLE[s];case pe.PUNCT:return he.PUNCT_TABLE[s];case pe.DIGIT:return he.DIGIT_TABLE[s];default:throw new te("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=U.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=U.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=U.AZTEC_DATA_10):(o=12,s=U.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=r.length/o;if(c<l)throw new F;let f=r.length%o,h=new Int32Array(c);for(let b=0;b<c;b++,f+=o)h[b]=he.readCode(r,f,o);try{new xe(s).decode(h,c-l)}catch(b){throw new F(b)}let p=(1<<o)-1,x=0;for(let b=0;b<l;b++){let k=h[b];if(k===0||k===p)throw new F;(k===1||k===p-1)&&x++}let w=new Array(l*o-x),A=0;for(let b=0;b<l;b++){let k=h[b];if(k===1||k===p-1)w.fill(k>1,A,A+o-1),A+=o-1;else for(let L=o-1;L>=0;--L)w[A++]=(k&1<<L)!==0}return w}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),l=(s?11:14)+o*4,c=new Int32Array(l),f=new Array(this.totalBitsInLayer(o,s));if(s)for(let h=0;h<c.length;h++)c[h]=h;else{let h=l+1+2*R.truncDivision(R.truncDivision(l,2)-1,15),p=l/2,x=R.truncDivision(h,2);for(let w=0;w<p;w++){let A=w+R.truncDivision(w,15);c[p-w-1]=x-A-1,c[p+w]=x+A+1}}for(let h=0,p=0;h<o;h++){let x=(o-h)*4+(s?9:12),w=h*2,A=l-1-w;for(let b=0;b<x;b++){let k=b*2;for(let L=0;L<2;L++)f[p+k+L]=r.get(c[w+L],c[w+b]),f[p+2*x+k+L]=r.get(c[w+b],c[A-L]),f[p+4*x+k+L]=r.get(c[A-L],c[A-b]),f[p+6*x+k+L]=r.get(c[A-b],c[w+L])}p+=x*8}return f}static readCode(r,s,o){let l=0;for(let c=s;c<s+o;c++)l<<=1,r[c]&&(l|=1);return l}static readByte(r,s){let o=r.length-s;return o>=8?he.readCode(r,s,8):he.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=he.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}he.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],he.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],he.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],he.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],he.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class me{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,l){const c=r-o,f=s-l;return Math.sqrt(c*c+f*f)}static sum(r){let s=0;for(let o=0,l=r.length;o!==l;o++){const c=r[o];s+=c}return s}}class Ye{static floatToIntBits(r){return r}}Ye.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof oe){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ye.floatToIntBits(this.x)+Ye.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),l=this.distance(r[0],r[2]);let c,f,h;if(o>=s&&o>=l?(f=r[0],c=r[1],h=r[2]):l>=o&&l>=s?(f=r[1],c=r[0],h=r[2]):(f=r[2],c=r[0],h=r[1]),this.crossProductZ(c,f,h)<0){const p=c;c=h,h=p}r[0]=c,r[1]=f,r[2]=h}static distance(r,s){return me.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const l=s.x,c=s.y;return(o.x-l)*(r.y-c)-(o.y-c)*(r.x-l)}}class Be{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Fe extends Be{constructor(r,s,o,l,c){super(r,s),this.compact=o,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ne{constructor(r,s,o,l){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Ne.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),l==null&&(l=r.getHeight()/2|0);const c=s/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new q}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,l=this.downInit,c=!1,f=!0,h=!1,p=!1,x=!1,w=!1,A=!1;const b=this.width,k=this.height;for(;f;){f=!1;let L=!0;for(;(L||!p)&&s<b;)L=this.containsBlackPoint(o,l,s,!1),L?(s++,f=!0,p=!0):p||s++;if(s>=b){c=!0;break}let j=!0;for(;(j||!x)&&l<k;)j=this.containsBlackPoint(r,s,l,!0),j?(l++,f=!0,x=!0):x||l++;if(l>=k){c=!0;break}let G=!0;for(;(G||!w)&&r>=0;)G=this.containsBlackPoint(o,l,r,!1),G?(r--,f=!0,w=!0):w||r--;if(r<0){c=!0;break}let Q=!0;for(;(Q||!A)&&o>=0;)Q=this.containsBlackPoint(r,s,o,!0),Q?(o--,f=!0,A=!0):A||o--;if(o<0){c=!0;break}f&&(h=!0)}if(!c&&h){const L=s-r;let j=null;for(let fe=1;j===null&&fe<L;fe++)j=this.getBlackPointOnSegment(r,l-fe,r+fe,l);if(j==null)throw new q;let G=null;for(let fe=1;G===null&&fe<L;fe++)G=this.getBlackPointOnSegment(r,o+fe,r+fe,o);if(G==null)throw new q;let Q=null;for(let fe=1;Q===null&&fe<L;fe++)Q=this.getBlackPointOnSegment(s,o+fe,s-fe,o);if(Q==null)throw new q;let ue=null;for(let fe=1;ue===null&&fe<L;fe++)ue=this.getBlackPointOnSegment(s,l-fe,s-fe,l);if(ue==null)throw new q;return this.centerEdges(ue,j,Q,G)}else throw new q}getBlackPointOnSegment(r,s,o,l){const c=me.round(me.distance(r,s,o,l)),f=(o-r)/c,h=(l-s)/c,p=this.image;for(let x=0;x<c;x++){const w=me.round(r+x*f),A=me.round(s+x*h);if(p.get(w,A))return new oe(w,A)}return null}centerEdges(r,s,o,l){const c=r.getX(),f=r.getY(),h=s.getX(),p=s.getY(),x=o.getX(),w=o.getY(),A=l.getX(),b=l.getY(),k=Ne.CORR;return c<this.width/2?[new oe(A-k,b+k),new oe(h+k,p+k),new oe(x-k,w-k),new oe(c+k,f-k)]:[new oe(A+k,b+k),new oe(h+k,p-k),new oe(x-k,w+k),new oe(c-k,f-k)]}containsBlackPoint(r,s,o,l){const c=this.image;if(l){for(let f=r;f<=s;f++)if(c.get(f,o))return!0}else for(let f=r;f<=s;f++)if(c.get(o,f))return!0;return!1}}Ne.INIT_SIZE=10,Ne.CORR=1;class yt{static checkAndNudgePoints(r,s){const o=r.getWidth(),l=r.getHeight();let c=!0;for(let f=0;f<s.length&&c;f+=2){const h=Math.floor(s[f]),p=Math.floor(s[f+1]);if(h<-1||h>o||p<-1||p>l)throw new q;c=!1,h===-1?(s[f]=0,c=!0):h===o&&(s[f]=o-1,c=!0),p===-1?(s[f+1]=0,c=!0):p===l&&(s[f+1]=l-1,c=!0)}c=!0;for(let f=s.length-2;f>=0&&c;f-=2){const h=Math.floor(s[f]),p=Math.floor(s[f+1]);if(h<-1||h>o||p<-1||p>l)throw new q;c=!1,h===-1?(s[f]=0,c=!0):h===o&&(s[f]=o-1,c=!0),p===-1?(s[f+1]=0,c=!0):p===l&&(s[f+1]=l-1,c=!0)}}}class tt{constructor(r,s,o,l,c,f,h,p,x){this.a11=r,this.a21=s,this.a31=o,this.a12=l,this.a22=c,this.a32=f,this.a13=h,this.a23=p,this.a33=x}static quadrilateralToQuadrilateral(r,s,o,l,c,f,h,p,x,w,A,b,k,L,j,G){const Q=tt.quadrilateralToSquare(r,s,o,l,c,f,h,p);return tt.squareToQuadrilateral(x,w,A,b,k,L,j,G).times(Q)}transformPoints(r){const s=r.length,o=this.a11,l=this.a12,c=this.a13,f=this.a21,h=this.a22,p=this.a23,x=this.a31,w=this.a32,A=this.a33;for(let b=0;b<s;b+=2){const k=r[b],L=r[b+1],j=c*k+p*L+A;r[b]=(o*k+f*L+x)/j,r[b+1]=(l*k+h*L+w)/j}}transformPointsWithValues(r,s){const o=this.a11,l=this.a12,c=this.a13,f=this.a21,h=this.a22,p=this.a23,x=this.a31,w=this.a32,A=this.a33,b=r.length;for(let k=0;k<b;k++){const L=r[k],j=s[k],G=c*L+p*j+A;r[k]=(o*L+f*j+x)/G,s[k]=(l*L+h*j+w)/G}}static squareToQuadrilateral(r,s,o,l,c,f,h,p){const x=r-o+c-h,w=s-l+f-p;if(x===0&&w===0)return new tt(o-r,c-o,r,l-s,f-l,s,0,0,1);{const A=o-c,b=h-c,k=l-f,L=p-f,j=A*L-b*k,G=(x*L-b*w)/j,Q=(A*w-x*k)/j;return new tt(o-r+G*o,h-r+Q*h,r,l-s+G*l,p-s+Q*p,s,G,Q,1)}}static quadrilateralToSquare(r,s,o,l,c,f,h,p){return tt.squareToQuadrilateral(r,s,o,l,c,f,h,p).buildAdjoint()}buildAdjoint(){return new tt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new tt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Pt extends yt{sampleGrid(r,s,o,l,c,f,h,p,x,w,A,b,k,L,j,G,Q,ue,fe){const le=tt.quadrilateralToQuadrilateral(l,c,f,h,p,x,w,A,b,k,L,j,G,Q,ue,fe);return this.sampleGridWithTransform(r,s,o,le)}sampleGridWithTransform(r,s,o,l){if(s<=0||o<=0)throw new q;const c=new Ce(s,o),f=new Float32Array(2*s);for(let h=0;h<o;h++){const p=f.length,x=h+.5;for(let w=0;w<p;w+=2)f[w]=w/2+.5,f[w+1]=x;l.transformPoints(f),yt.checkAndNudgePoints(r,f);try{for(let w=0;w<p;w+=2)r.get(Math.floor(f[w]),Math.floor(f[w+1]))&&c.set(w/2,h)}catch{throw new q}}return c}}class Dt{static setGridSampler(r){Dt.gridSampler=r}static getInstance(){return Dt.gridSampler}}Dt.gridSampler=new Pt;class He{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xt{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let l=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new Fe(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new q;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let l=0;for(let f=0;f<4;f++){let h=o[(this.shift+f)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(r,s){let o=0;r.forEach((l,c,f)=>{let h=(l>>s-2<<1)+(l&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let l=0;l<4;l++)if(R.bitCount(o^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new q}getCorrectedParameterData(r,s){let o,l;s?(o=7,l=2):(o=10,l=4);let c=o-l,f=new Int32Array(o);for(let p=o-1;p>=0;--p)f[p]=r&15,r>>=4;try{new xe(U.AZTEC_PARAM).decode(f,c)}catch{throw new q}let h=0;for(let p=0;p<l;p++)h=(h<<4)+f[p];return h}getBullsEyeCorners(r){let s=r,o=r,l=r,c=r,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(s,f,1,-1),b=this.getFirstDifferent(o,f,1,1),k=this.getFirstDifferent(l,f,-1,1),L=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let j=this.distancePoint(L,A)*this.nbCenterLayers/(this.distancePoint(c,s)*(this.nbCenterLayers+2));if(j<.75||j>1.25||!this.isWhiteOrBlackRectangle(A,b,k,L))break}s=A,o=b,l=k,c=L,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new q;this.compact=this.nbCenterLayers===5;let h=new oe(s.getX()+.5,s.getY()-.5),p=new oe(o.getX()+.5,o.getY()+.5),x=new oe(l.getX()-.5,l.getY()+.5),w=new oe(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,p,x,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,l;try{let h=new Ne(this.image).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{let p=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new He(p+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new He(p+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new He(p-7,x+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new He(p-7,x-7),!1,-1,-1).toResultPoint()}let c=me.round((r.getX()+l.getX()+s.getX()+o.getX())/4),f=me.round((r.getY()+l.getY()+s.getY()+o.getY())/4);try{let h=new Ne(this.image,15,c,f).detect();r=h[0],s=h[1],o=h[2],l=h[3]}catch{r=this.getFirstDifferent(new He(c+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new He(c+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new He(c-7,f+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new He(c-7,f-7),!1,-1,-1).toResultPoint()}return c=me.round((r.getX()+l.getX()+s.getX()+o.getX())/4),f=me.round((r.getY()+l.getY()+s.getY()+o.getY())/4),new He(c,f)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,l,c){let f=Dt.getInstance(),h=this.getDimension(),p=h/2-this.nbCenterLayers,x=h/2+this.nbCenterLayers;return f.sampleGrid(r,h,h,p,p,x,p,x,x,p,x,s.getX(),s.getY(),o.getX(),o.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(r,s,o){let l=0,c=this.distanceResultPoint(r,s),f=c/o,h=r.getX(),p=r.getY(),x=f*(s.getX()-r.getX())/c,w=f*(s.getY()-r.getY())/c;for(let A=0;A<o;A++)this.image.get(me.round(h+A*x),me.round(p+A*w))&&(l|=1<<o-A-1);return l}isWhiteOrBlackRectangle(r,s,o,l){let c=3;r=new He(r.getX()-c,r.getY()+c),s=new He(s.getX()-c,s.getY()-c),o=new He(o.getX()+c,o.getY()-c),l=new He(l.getX()+c,l.getY()+c);let f=this.getColor(l,r);if(f===0)return!1;let h=this.getColor(r,s);return h!==f||(h=this.getColor(s,o),h!==f)?!1:(h=this.getColor(o,l),h===f)}getColor(r,s){let o=this.distancePoint(r,s),l=(s.getX()-r.getX())/o,c=(s.getY()-r.getY())/o,f=0,h=r.getX(),p=r.getY(),x=this.image.get(r.getX(),r.getY()),w=Math.ceil(o);for(let b=0;b<w;b++)h+=l,p+=c,this.image.get(me.round(h),me.round(p))!==x&&f++;let A=f/o;return A>.1&&A<.9?0:A<=.1===x?1:-1}getFirstDifferent(r,s,o,l){let c=r.getX()+o,f=r.getY()+l;for(;this.isValid(c,f)&&this.image.get(c,f)===s;)c+=o,f+=l;for(c-=o,f-=l;this.isValid(c,f)&&this.image.get(c,f)===s;)c+=o;for(c-=o;this.isValid(c,f)&&this.image.get(c,f)===s;)f+=l;return f-=l,new He(c,f)}expandSquare(r,s,o){let l=o/(2*s),c=r[0].getX()-r[2].getX(),f=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,x=new oe(h+l*c,p+l*f),w=new oe(h-l*c,p-l*f);c=r[1].getX()-r[3].getX(),f=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let A=new oe(h+l*c,p+l*f),b=new oe(h-l*c,p-l*f);return[x,A,w,b]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=me.round(r.getX()),o=me.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return me.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return me.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class mn{decode(r,s=null){let o=null,l=new Xt(r.getBlackMatrix()),c=null,f=null;try{let w=l.detectMirror(!1);c=w.getPoints(),this.reportFoundResultPoints(s,c),f=new he().decode(w)}catch(w){o=w}if(f==null)try{let w=l.detectMirror(!0);c=w.getPoints(),this.reportFoundResultPoints(s,c),f=new he().decode(w)}catch(w){throw o!=null?o:w}let h=new We(f.getText(),f.getRawBytes(),f.getNumBits(),c,ve.AZTEC,M.currentTimeMillis()),p=f.getByteSegments();p!=null&&h.putMetadata(ze.BYTE_SEGMENTS,p);let x=f.getECLevel();return x!=null&&h.putMetadata(ze.ERROR_CORRECTION_LEVEL,x),h}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(V.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((l,c,f)=>{o.foundPossibleResultPoint(l)})}}reset(){}}class An extends ft{constructor(r=500){super(new mn,r)}}class Qe{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(V.TRY_HARDER)===!0&&r.isRotateSupported()){const c=r.rotateCounterClockwise(),f=this.doDecode(c,s),h=f.getResultMetadata();let p=270;h!==null&&h.get(ze.ORIENTATION)===!0&&(p=p+h.get(ze.ORIENTATION)%360),f.putMetadata(ze.ORIENTATION,p);const x=f.getResultPoints();if(x!==null){const w=c.getHeight();for(let A=0;A<x.length;A++)x[A]=new oe(w-x[A].getY()-1,x[A].getX())}return f}else throw new q}}reset(){}doDecode(r,s){const o=r.getWidth(),l=r.getHeight();let c=new P(o);const f=s&&s.get(V.TRY_HARDER)===!0,h=Math.max(1,l>>(f?8:5));let p;f?p=l:p=15;const x=Math.trunc(l/2);for(let w=0;w<p;w++){const A=Math.trunc((w+1)/2),b=(w&1)===0,k=x+h*(b?A:-A);if(k<0||k>=l)break;try{c=r.getBlackRow(k,c)}catch{continue}for(let L=0;L<2;L++){if(L===1&&(c.reverse(),s&&s.get(V.NEED_RESULT_POINT_CALLBACK)===!0)){const j=new Map;s.forEach((G,Q)=>j.set(Q,G)),j.delete(V.NEED_RESULT_POINT_CALLBACK),s=j}try{const j=this.decodeRow(k,c,s);if(L===1){j.putMetadata(ze.ORIENTATION,180);const G=j.getResultPoints();G!==null&&(G[0]=new oe(o-G[0].getX()-1,G[0].getY()),G[1]=new oe(o-G[1].getX()-1,G[1].getY()))}return j}catch{}}}throw new q}static recordPattern(r,s,o){const l=o.length;for(let x=0;x<l;x++)o[x]=0;const c=r.getSize();if(s>=c)throw new q;let f=!r.get(s),h=0,p=s;for(;p<c;){if(r.get(p)!==f)o[h]++;else{if(++h===l)break;o[h]=1,f=!f}p++}if(!(h===l||h===l-1&&p===c))throw new q}static recordPatternInReverse(r,s,o){let l=o.length,c=r.get(s);for(;s>0&&l>=0;)r.get(--s)!==c&&(l--,c=!c);if(l>=0)throw new q;Qe.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const l=r.length;let c=0,f=0;for(let x=0;x<l;x++)c+=r[x],f+=s[x];if(c<f)return Number.POSITIVE_INFINITY;const h=c/f;o*=h;let p=0;for(let x=0;x<l;x++){const w=r[x],A=s[x]*h,b=w>A?w-A:A-w;if(b>o)return Number.POSITIVE_INFINITY;p+=b}return p/c}}class de extends Qe{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),f=o,h=!1;const p=6;for(let x=o;x<s;x++)if(r.get(x)!==h)c[l]++;else{if(l===p-1){let w=de.MAX_AVG_VARIANCE,A=-1;for(let b=de.CODE_START_A;b<=de.CODE_START_C;b++){const k=Qe.patternMatchVariance(c,de.CODE_PATTERNS[b],de.MAX_INDIVIDUAL_VARIANCE);k<w&&(w=k,A=b)}if(A>=0&&r.isRange(Math.max(0,f-(x-f)/2),f,!1))return Int32Array.from([f,x,A]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,h=!h}throw new q}static decodeCode(r,s,o){Qe.recordPattern(r,o,s);let l=de.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<de.CODE_PATTERNS.length;f++){const h=de.CODE_PATTERNS[f],p=this.patternMatchVariance(s,h,de.MAX_INDIVIDUAL_VARIANCE);p<l&&(l=p,c=f)}if(c>=0)return c;throw new q}decodeRow(r,s,o){const l=o&&o.get(V.ASSUME_GS1)===!0,c=de.findStartPattern(s),f=c[2];let h=0;const p=new Uint8Array(20);p[h++]=f;let x;switch(f){case de.CODE_START_A:x=de.CODE_CODE_A;break;case de.CODE_START_B:x=de.CODE_CODE_B;break;case de.CODE_START_C:x=de.CODE_CODE_C;break;default:throw new F}let w=!1,A=!1,b="",k=c[0],L=c[1];const j=Int32Array.from([0,0,0,0,0,0]);let G=0,Q=0,ue=f,fe=0,le=!0,Ze=!1,Ue=!1;for(;!w;){const Ji=A;switch(A=!1,G=Q,Q=de.decodeCode(s,j,L),p[h++]=Q,Q!==de.CODE_STOP&&(le=!0),Q!==de.CODE_STOP&&(fe++,ue+=fe*Q),k=L,L+=j.reduce((p3,g3)=>p3+g3,0),Q){case de.CODE_START_A:case de.CODE_START_B:case de.CODE_START_C:throw new F}switch(x){case de.CODE_CODE_A:if(Q<64)Ue===Ze?b+=String.fromCharCode(32+Q):b+=String.fromCharCode(32+Q+128),Ue=!1;else if(Q<96)Ue===Ze?b+=String.fromCharCode(Q-64):b+=String.fromCharCode(Q+64),Ue=!1;else switch(Q!==de.CODE_STOP&&(le=!1),Q){case de.CODE_FNC_1:l&&(b.length===0?b+="]C1":b+="");break;case de.CODE_FNC_2:case de.CODE_FNC_3:break;case de.CODE_FNC_4_A:!Ze&&Ue?(Ze=!0,Ue=!1):Ze&&Ue?(Ze=!1,Ue=!1):Ue=!0;break;case de.CODE_SHIFT:A=!0,x=de.CODE_CODE_B;break;case de.CODE_CODE_B:x=de.CODE_CODE_B;break;case de.CODE_CODE_C:x=de.CODE_CODE_C;break;case de.CODE_STOP:w=!0;break}break;case de.CODE_CODE_B:if(Q<96)Ue===Ze?b+=String.fromCharCode(32+Q):b+=String.fromCharCode(32+Q+128),Ue=!1;else switch(Q!==de.CODE_STOP&&(le=!1),Q){case de.CODE_FNC_1:l&&(b.length===0?b+="]C1":b+="");break;case de.CODE_FNC_2:case de.CODE_FNC_3:break;case de.CODE_FNC_4_B:!Ze&&Ue?(Ze=!0,Ue=!1):Ze&&Ue?(Ze=!1,Ue=!1):Ue=!0;break;case de.CODE_SHIFT:A=!0,x=de.CODE_CODE_A;break;case de.CODE_CODE_A:x=de.CODE_CODE_A;break;case de.CODE_CODE_C:x=de.CODE_CODE_C;break;case de.CODE_STOP:w=!0;break}break;case de.CODE_CODE_C:if(Q<100)Q<10&&(b+="0"),b+=Q;else switch(Q!==de.CODE_STOP&&(le=!1),Q){case de.CODE_FNC_1:l&&(b.length===0?b+="]C1":b+="");break;case de.CODE_CODE_A:x=de.CODE_CODE_A;break;case de.CODE_CODE_B:x=de.CODE_CODE_B;break;case de.CODE_STOP:w=!0;break}break}Ji&&(x=x===de.CODE_CODE_A?de.CODE_CODE_B:de.CODE_CODE_A)}const In=L-k;if(L=s.getNextUnset(L),!s.isRange(L,Math.min(s.getSize(),L+(L-k)/2),!1))throw new q;if(ue-=fe*G,ue%103!==G)throw new N;const rr=b.length;if(rr===0)throw new q;rr>0&&le&&(x===de.CODE_CODE_C?b=b.substring(0,rr-2):b=b.substring(0,rr-1));const Rn=(c[1]+c[0])/2,pt=k+In/2,nn=p.length,Ln=new Uint8Array(nn);for(let Ji=0;Ji<nn;Ji++)Ln[Ji]=p[Ji];const $i=[new oe(Rn,r),new oe(pt,r)];return new We(b,Ln,0,$i,ve.CODE_128,new Date().getTime())}}de.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],de.MAX_AVG_VARIANCE=.25,de.MAX_INDIVIDUAL_VARIANCE=.7,de.CODE_SHIFT=98,de.CODE_CODE_C=99,de.CODE_CODE_B=100,de.CODE_CODE_A=101,de.CODE_FNC_1=102,de.CODE_FNC_2=97,de.CODE_FNC_3=96,de.CODE_FNC_4_A=101,de.CODE_FNC_4_B=100,de.CODE_START_A=103,de.CODE_START_B=104,de.CODE_START_C=105,de.CODE_STOP=106;class je extends Qe{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=je.findAsteriskPattern(s,l),f=s.getNextSet(c[1]),h=s.getSize(),p,x;do{je.recordPattern(s,f,l);let j=je.toNarrowWidePattern(l);if(j<0)throw new q;p=je.patternToChar(j),this.decodeRowResult+=p,x=f;for(let G of l)f+=G;f=s.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let j of l)w+=j;let A=f-x-w;if(f!==h&&A*2<w)throw new q;if(this.usingCheckDigit){let j=this.decodeRowResult.length-1,G=0;for(let Q=0;Q<j;Q++)G+=je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Q));if(this.decodeRowResult.charAt(j)!==je.ALPHABET_STRING.charAt(G%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,j)}if(this.decodeRowResult.length===0)throw new q;let b;this.extendedMode?b=je.decodeExtended(this.decodeRowResult):b=this.decodeRowResult;let k=(c[1]+c[0])/2,L=x+w/2;return new We(b,null,0,[new oe(k,r),new oe(L,r)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),l=r.getNextSet(0),c=0,f=l,h=!1,p=s.length;for(let x=l;x<o;x++)if(r.get(x)!==h)s[c]++;else{if(c===p-1){if(this.toNarrowWidePattern(s)===je.ASTERISK_ENCODING&&r.isRange(Math.max(0,f-Math.floor((x-f)/2)),f,!1))return[f,x];f+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,h=!h}throw new q}static toNarrowWidePattern(r){let s=r.length,o=0,l;do{let c=2147483647;for(let p of r)p<c&&p>o&&(c=p);o=c,l=0;let f=0,h=0;for(let p=0;p<s;p++){let x=r[p];x>o&&(h|=1<<s-1-p,l++,f+=x)}if(l===3){for(let p=0;p<s&&l>0;p++){let x=r[p];if(x>o&&(l--,x*2>=f))return-1}return h}}while(l>3);return-1}static patternToChar(r){for(let s=0;s<je.CHARACTER_ENCODINGS.length;s++)if(je.CHARACTER_ENCODINGS[s]===r)return je.ALPHABET_STRING.charAt(s);if(r===je.ASTERISK_ENCODING)return"*";throw new q}static decodeExtended(r){let s=r.length,o="";for(let l=0;l<s;l++){let c=r.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=r.charAt(l+1),h="\0";switch(c){case"+":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)+32);else throw new F;break;case"$":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)-64);else throw new F;break;case"%":if(f>="A"&&f<="E")h=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")h=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")h=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")h="\0";else if(f==="V")h="@";else if(f==="W")h="`";else if(f==="X"||f==="Y"||f==="Z")h="";else throw new F;break;case"/":if(f>="A"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")h=":";else throw new F;break}o+=h,l++}else o+=c}return o}}je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],je.ASTERISK_ENCODING=148;class Le extends Qe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let l=this.decodeStart(s),c=this.decodeEnd(s),f=new J;Le.decodeMiddle(s,l[1],c[0],f);let h=f.toString(),p=null;o!=null&&(p=o.get(V.ALLOWED_LENGTHS)),p==null&&(p=Le.DEFAULT_ALLOWED_LENGTHS);let x=h.length,w=!1,A=0;for(let L of p){if(x===L){w=!0;break}L>A&&(A=L)}if(!w&&x>A&&(w=!0),!w)throw new F;const b=[new oe(l[1],r),new oe(c[0],r)];return new We(h,null,0,b,ve.ITF,new Date().getTime())}static decodeMiddle(r,s,o,l){let c=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),f.fill(0),h.fill(0);s<o;){Qe.recordPattern(r,s,c);for(let x=0;x<5;x++){let w=2*x;f[x]=c[w],h[x]=c[w+1]}let p=Le.decodeDigit(f);l.append(p.toString()),p=this.decodeDigit(h),l.append(p.toString()),c.forEach(function(x){s+=x})}}decodeStart(r){let s=Le.skipWhiteSpace(r),o=Le.findGuardPattern(r,s,Le.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let l=s-1;o>0&&l>=0&&!r.get(l);l--)o--;if(o!==0)throw new q}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new q;return o}decodeEnd(r){r.reverse();try{let s=Le.skipWhiteSpace(r),o;try{o=Le.findGuardPattern(r,s,Le.END_PATTERN_REVERSED[0])}catch(c){c instanceof q&&(o=Le.findGuardPattern(r,s,Le.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let l=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-l,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let l=o.length,c=new Int32Array(l),f=r.getSize(),h=!1,p=0,x=s;c.fill(0);for(let w=s;w<f;w++)if(r.get(w)!==h)c[p]++;else{if(p===l-1){if(Qe.patternMatchVariance(c,o,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return[x,w];x+=c[0]+c[1],M.arraycopy(c,2,c,0,p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,h=!h}throw new q}static decodeDigit(r){let s=Le.MAX_AVG_VARIANCE,o=-1,l=Le.PATTERNS.length;for(let c=0;c<l;c++){let f=Le.PATTERNS[c],h=Qe.patternMatchVariance(r,f,Le.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=c):h===s&&(o=-1)}if(o>=0)return o%10;throw new q}}Le.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Le.MAX_AVG_VARIANCE=.38,Le.MAX_INDIVIDUAL_VARIANCE=.5,Le.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Le.START_PATTERN=Int32Array.from([1,1,1,1]),Le.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class dt extends Qe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,l=0,c=Int32Array.from([0,0,0]);for(;!s;){c=Int32Array.from([0,0,0]),o=dt.findGuardPattern(r,l,!1,this.START_END_PATTERN,c);let f=o[0];l=o[1];let h=f-(l-f);h>=0&&(s=r.isRange(h,f,!1))}return o}static checkChecksum(r){return dt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return dt.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}o*=3;for(let l=s-2;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}return(1e3-o)%10}static decodeEnd(r,s){return dt.findGuardPattern(r,s,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,l){return this.findGuardPattern(r,s,o,l,new Int32Array(l.length))}static findGuardPattern(r,s,o,l,c){let f=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let h=0,p=s,x=l.length,w=o;for(let A=s;A<f;A++)if(r.get(A)!==w)c[h]++;else{if(h===x-1){if(Qe.patternMatchVariance(c,l,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return Int32Array.from([p,A]);p+=c[0]+c[1];let b=c.slice(2,c.length-1);for(let k=0;k<h-1;k++)c[k]=b[k];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,w=!w}throw new q}static decodeDigit(r,s,o,l){this.recordPattern(r,o,s);let c=this.MAX_AVG_VARIANCE,f=-1,h=l.length;for(let p=0;p<h;p++){let x=l[p],w=Qe.patternMatchVariance(s,x,dt.MAX_INDIVIDUAL_VARIANCE);w<c&&(c=w,f=p)}if(f>=0)return f;throw new q}}dt.MAX_AVG_VARIANCE=.48,dt.MAX_INDIVIDUAL_VARIANCE=.7,dt.START_END_PATTERN=Int32Array.from([1,1,1]),dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Tr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,l),f=l.toString(),h=Tr.parseExtensionString(f),p=[new oe((o[0]+o[1])/2,r),new oe(c,r)],x=new We(f,null,0,p,ve.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),f=s[1],h=0;for(let x=0;x<5&&f<c;x++){let w=dt.decodeDigit(r,l,f,dt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let A of l)f+=A;w>=10&&(h|=1<<4-x),x!==4&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==5)throw new q;let p=this.determineCheckDigit(h);if(Tr.extensionChecksum(o.toString())!==p)throw new q;return f}static extensionChecksum(r){let s=r.length,o=0;for(let l=s-2;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;o*=3;for(let l=s-1;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new q}static parseExtensionString(r){if(r.length!==5)return null;let s=Tr.parseExtension5String(r);return s==null?null:new Map([[ze.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),l=(o/100).toString(),c=o%100,f=c<10?"0"+c:c.toString();return s+l+"."+f}}class Ur{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,l),f=l.toString(),h=Ur.parseExtensionString(f),p=[new oe((o[0]+o[1])/2,r),new oe(c,r)],x=new We(f,null,0,p,ve.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&x.putAllMetadata(h),x}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),f=s[1],h=0;for(let p=0;p<2&&f<c;p++){let x=dt.decodeDigit(r,l,f,dt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let w of l)f+=w;x>=10&&(h|=1<<1-p),p!==1&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==2)throw new q;if(parseInt(o.toString())%4!==h)throw new q;return f}static parseExtensionString(r){return r.length!==2?null:new Map([[ze.ISSUE_NUMBER,parseInt(r)]])}}class Mt{static decodeRow(r,s,o){let l=dt.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Tr().decodeRow(r,s,l)}catch{return new Ur().decodeRow(r,s,l)}}}Mt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class $e extends dt{constructor(){super(),this.decodeRowStringBuffer="",$e.L_AND_G_PATTERNS=$e.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=$e.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let l=0;l<s.length;l++)o[l]=s[s.length-l-1];$e.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let l=$e.findStartGuardPattern(s),c=o==null?null:o.get(V.NEED_RESULT_POINT_CALLBACK);if(c!=null){const le=new oe((l[0]+l[1])/2,r);c.foundPossibleResultPoint(le)}let f=this.decodeMiddle(s,l,this.decodeRowStringBuffer),h=f.rowOffset,p=f.resultString;if(c!=null){const le=new oe(h,r);c.foundPossibleResultPoint(le)}let x=this.decodeEnd(s,h);if(c!=null){const le=new oe((x[0]+x[1])/2,r);c.foundPossibleResultPoint(le)}let w=x[1],A=w+(w-x[0]);if(A>=s.getSize()||!s.isRange(w,A,!1))throw new q;let b=p.toString();if(b.length<8)throw new F;if(!$e.checkChecksum(b))throw new N;let k=(l[1]+l[0])/2,L=(x[1]+x[0])/2,j=this.getBarcodeFormat(),G=[new oe(k,r),new oe(L,r)],Q=new We(b,null,0,G,j,new Date().getTime()),ue=0;try{let le=Mt.decodeRow(r,s,x[1]);Q.putMetadata(ze.UPC_EAN_EXTENSION,le.getText()),Q.putAllMetadata(le.getResultMetadata()),Q.addResultPoints(le.getResultPoints()),ue=le.getText().length}catch{}let fe=o==null?null:o.get(V.ALLOWED_EAN_EXTENSIONS);if(fe!=null){let le=!1;for(let Ze in fe)if(ue.toString()===Ze){le=!0;break}if(!le)throw new q}return Q}decodeEnd(r,s){return $e.findGuardPattern(r,s,!1,$e.START_END_PATTERN,new Int32Array($e.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return $e.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return $e.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}o*=3;for(let l=s-2;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}return(1e3-o)%10}}class ne extends $e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),f=s[1],h=0;for(let x=0;x<6&&f<c;x++){let w=$e.decodeDigit(r,l,f,$e.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let A of l)f+=A;w>=10&&(h|=1<<5-x)}o=ne.determineFirstDigit(o,h),f=$e.findGuardPattern(r,f,!0,$e.MIDDLE_PATTERN,new Int32Array($e.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&f<c;x++){let w=$e.decodeDigit(r,l,f,$e.L_PATTERNS);o+=String.fromCharCode(48+w);for(let A of l)f+=A}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new q}}ne.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class be extends $e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),f=s[1];for(let p=0;p<4&&f<c;p++){let x=$e.decodeDigit(r,l,f,$e.L_PATTERNS);o+=String.fromCharCode(48+x);for(let w of l)f+=w}f=$e.findGuardPattern(r,f,!0,$e.MIDDLE_PATTERN,new Int32Array($e.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&f<c;p++){let x=$e.decodeDigit(r,l,f,$e.L_PATTERNS);o+=String.fromCharCode(48+x);for(let w of l)f+=w}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ve.EAN_8}}class at extends $e{constructor(){super(...arguments),this.ean13Reader=new ne}getBarcodeFormat(){return ve.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new We(s.substring(1),null,null,r.getResultPoints(),ve.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new q}reset(){this.ean13Reader.reset()}}class jt extends $e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters.map(x=>x);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=r.getSize();let f=s[1],h=0;for(let x=0;x<6&&f<c;x++){const w=jt.decodeDigit(r,l,f,jt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let A of l)f+=A;w>=10&&(h|=1<<5-x)}let p=jt.determineNumSysAndCheckDigit(o,h);return{rowOffset:f,resultString:p}}decodeEnd(r,s){return jt.findGuardPatternWithoutCounters(r,s,!0,jt.MIDDLE_END_PATTERN)}checkChecksum(r){return $e.checkChecksum(jt.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][l]){let c=String.fromCharCode(48+o),f=String.fromCharCode(48+l);return c+r+f}throw q.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new J;o.append(r.charAt(0));let l=s[5];switch(l){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(l),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(l);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}jt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gi extends Qe{constructor(r){super();let s=r==null?null:r.get(V.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new ne),o.push(new at),o.push(new be),o.push(new jt)):(s.indexOf(ve.EAN_13)>-1&&o.push(new ne),s.indexOf(ve.UPC_A)>-1&&o.push(new at),s.indexOf(ve.EAN_8)>-1&&o.push(new be),s.indexOf(ve.UPC_E)>-1&&o.push(new jt)),this.readers=o}decodeRow(r,s,o){for(let l of this.readers)try{const c=l.decodeRow(r,s,o),f=c.getBarcodeFormat()===ve.EAN_13&&c.getText().charAt(0)==="0",h=o==null?null:o.get(V.POSSIBLE_FORMATS),p=h==null||h.includes(ve.UPC_A);if(f&&p){const x=c.getRawBytes(),w=new We(c.getText().substring(1),x,x?x.length:null,c.getResultPoints(),ve.UPC_A);return w.putAllMetadata(c.getResultMetadata()),w}return c}catch{}throw new q}reset(){for(let r of this.readers)r.reset()}}class Vt extends Qe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(Qe.patternMatchVariance(r,s[o],Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return o;throw new q}static count(r){return me.sum(new Int32Array(r))}static increment(r,s){let o=0,l=s[0];for(let c=1;c<r.length;c++)s[c]>l&&(l=s[c],o=c);r[o]++}static decrement(r,s){let o=0,l=s[0];for(let c=1;c<r.length;c++)s[c]<l&&(l=s[c],o=c);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=Vt.MIN_FINDER_PATTERN_RATIO&&l<=Vt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let h of r)h>f&&(f=h),h<c&&(c=h);return f<10*c}return!1}}Vt.MAX_AVG_VARIANCE=.2,Vt.MAX_INDIVIDUAL_VARIANCE=.45,Vt.MIN_FINDER_PATTERN_RATIO=9.5/12,Vt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Ir))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class yi{constructor(r,s,o,l,c){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new oe(o,c)),this.resultPoints.push(new oe(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof yi))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class nt{constructor(){}static getRSSvalue(r,s,o){let l=0;for(let p of r)l+=p;let c=0,f=0,h=r.length;for(let p=0;p<h-1;p++){let x;for(x=1,f|=1<<p;x<r[p];x++,f&=~(1<<p)){let w=nt.combins(l-x-1,h-p-2);if(o&&f===0&&l-x-(h-p-1)>=h-p-1&&(w-=nt.combins(l-x-(h-p),h-p-2)),h-p-1>1){let A=0;for(let b=l-x-(h-p-2);b>s;b--)A+=nt.combins(l-x-b-1,h-p-3);w-=A*(h-1-p)}else l-x>s&&w--;c+=w}l-=x}return c}static combins(r,s){let o,l;r-s>s?(l=s,o=r-s):(l=r-s,o=s);let c=1,f=1;for(let h=r;h>o;h--)c*=h,f<=l&&(c/=f,f++);for(;f<=l;)c/=f,f++;return c}}class Uw{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,l=new P(o),c=0,h=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)h&1<<p&&l.set(c),c++;for(let p=1;p<r.length;++p){let x=r[p],w=x.getLeftChar().getValue();for(let A=11;A>=0;--A)w&1<<A&&l.set(c),c++;if(x.getRightChar()!=null){let A=x.getRightChar().getValue();for(let b=11;b>=0;--b)A&1<<b&&l.set(c),c++}}return l}}class xi{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ql{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Sn extends Ql{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Sn.FNC1}}Sn.FNC1="$";class Ci extends Ql{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qn extends Ql{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new F;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===qn.FNC1}isAnyFNC1(){return this.firstDigit===qn.FNC1||this.secondDigit===qn.FNC1}}qn.FNC1=10;class we{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new q;let s=r.substring(0,2);for(let c of we.TWO_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===we.VARIABLE_LENGTH?we.processVariableAI(2,c[2],r):we.processFixedAI(2,c[1],r);if(r.length<3)throw new q;let o=r.substring(0,3);for(let c of we.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===we.VARIABLE_LENGTH?we.processVariableAI(3,c[2],r):we.processFixedAI(3,c[1],r);for(let c of we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,c[2],r):we.processFixedAI(4,c[1],r);if(r.length<4)throw new q;let l=r.substring(0,4);for(let c of we.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,c[2],r):we.processFixedAI(4,c[1],r);throw new q}static processFixedAI(r,s,o){if(o.length<r)throw new q;let l=o.substring(0,r);if(o.length<r+s)throw new q;let c=o.substring(r,r+s),f=o.substring(r+s),h="("+l+")"+c,p=we.parseFieldsInGeneralPurpose(f);return p==null?h:h+p}static processVariableAI(r,s,o){let l=o.substring(0,r),c;o.length<r+s?c=o.length:c=r+s;let f=o.substring(r,c),h=o.substring(c),p="("+l+")"+f,x=we.parseFieldsInGeneralPurpose(h);return x==null?p:p+x}}we.VARIABLE_LENGTH=[],we.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",we.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",we.VARIABLE_LENGTH,20],["22",we.VARIABLE_LENGTH,29],["30",we.VARIABLE_LENGTH,8],["37",we.VARIABLE_LENGTH,8],["90",we.VARIABLE_LENGTH,30],["91",we.VARIABLE_LENGTH,30],["92",we.VARIABLE_LENGTH,30],["93",we.VARIABLE_LENGTH,30],["94",we.VARIABLE_LENGTH,30],["95",we.VARIABLE_LENGTH,30],["96",we.VARIABLE_LENGTH,30],["97",we.VARIABLE_LENGTH,3],["98",we.VARIABLE_LENGTH,30],["99",we.VARIABLE_LENGTH,30]],we.THREE_DIGIT_DATA_LENGTH=[["240",we.VARIABLE_LENGTH,30],["241",we.VARIABLE_LENGTH,30],["242",we.VARIABLE_LENGTH,6],["250",we.VARIABLE_LENGTH,30],["251",we.VARIABLE_LENGTH,30],["253",we.VARIABLE_LENGTH,17],["254",we.VARIABLE_LENGTH,20],["400",we.VARIABLE_LENGTH,30],["401",we.VARIABLE_LENGTH,30],["402",17],["403",we.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",we.VARIABLE_LENGTH,20],["421",we.VARIABLE_LENGTH,15],["422",3],["423",we.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",we.VARIABLE_LENGTH,15],["391",we.VARIABLE_LENGTH,18],["392",we.VARIABLE_LENGTH,15],["393",we.VARIABLE_LENGTH,18],["703",we.VARIABLE_LENGTH,30]],we.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",we.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",we.VARIABLE_LENGTH,20],["8003",we.VARIABLE_LENGTH,30],["8004",we.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",we.VARIABLE_LENGTH,30],["8008",we.VARIABLE_LENGTH,12],["8018",18],["8020",we.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",we.VARIABLE_LENGTH,70],["8200",we.VARIABLE_LENGTH,70]];class Wi{constructor(r){this.buffer=new J,this.information=r}decodeAllCodes(r,s){let o=s,l=null;do{let c=this.decodeGeneralPurposeField(o,l),f=we.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&r.append(f),c.isRemaining()?l=""+c.getRemainingValue():l=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(r,4);return c===0?new qn(this.information.getSize(),qn.FNC1,qn.FNC1):new qn(this.information.getSize(),c-1,qn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,l=(s-8)%11;return new qn(r+7,o,l)}extractNumericValueFromBitArray(r,s){return Wi.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let l=0;for(let c=0;c<o;++c)r.get(s+c)&&(l|=1<<o-c-1);return l}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ci(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Ci(this.current.getPosition(),this.buffer.toString()):s=new Ci(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new xi(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Ci(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ci(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Ci(this.current.getPosition(),this.buffer.toString());return new xi(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xi(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,8);return l>=232&&l<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new Sn(r+7,""+(o+1));if(o>=90&&o<116)return new Sn(r+7,""+(o+7));let l=this.extractNumericValueFromBitArray(r,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new F}return new Sn(r+8,c)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Sn(r+5,Sn.FNC1);if(s>=5&&s<15)return new Sn(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new Sn(r+6,""+(o+33));let l;switch(o){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new te("Decoding invalid alphanumeric value: "+o)}return new Sn(r+6,l)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class $l{constructor(r){this.information=r,this.generalDecoder=new Wi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class bn extends $l{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);c/100===0&&r.append("0"),c/10===0&&r.append("0"),r.append(c)}bn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let l=0;l<13;l++){let c=r.charAt(l+s).charCodeAt(0)-48;o+=l&1?c:3*c}o=10-o%10,o===10&&(o=0),r.append(o)}}bn.GTIN_SIZE=40;class Ki extends bn{constructor(r){super(r)}parseInformation(){let r=new J;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Ki.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,Ki.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Ki.HEADER_SIZE+44)}}Ki.HEADER_SIZE=4;class Zo extends $l{constructor(r){super(r)}parseInformation(){let r=new J;return this.getGeneralDecoder().decodeAllCodes(r,Zo.HEADER_SIZE)}}Zo.HEADER_SIZE=5;class Qo extends bn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,l);let c=this.checkWeight(l),f=1e5;for(let h=0;h<5;++h)c/f===0&&r.append("0"),f/=10;r.append(c)}}class hr extends Qo{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=hr.HEADER_SIZE+Qo.GTIN_SIZE+hr.WEIGHT_SIZE)throw new q;let r=new J;return this.encodeCompressedGtin(r,hr.HEADER_SIZE),this.encodeCompressedWeight(r,hr.HEADER_SIZE+Qo.GTIN_SIZE,hr.WEIGHT_SIZE),r.toString()}}hr.HEADER_SIZE=5,hr.WEIGHT_SIZE=15;class zw extends hr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Hw extends hr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class pr extends bn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<pr.HEADER_SIZE+bn.GTIN_SIZE)throw new q;let r=new J;this.encodeCompressedGtin(r,pr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(pr.HEADER_SIZE+bn.GTIN_SIZE,pr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(pr.HEADER_SIZE+bn.GTIN_SIZE+pr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}pr.HEADER_SIZE=8,pr.LAST_DIGIT_SIZE=2;class yn extends bn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+bn.GTIN_SIZE)throw new q;let r=new J;this.encodeCompressedGtin(r,yn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+bn.GTIN_SIZE,yn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+bn.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let l=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+bn.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return r.append(l.getNewString()),r.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class wt extends Qo{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE+wt.DATE_SIZE)throw new q;let r=new J;return this.encodeCompressedGtin(r,wt.HEADER_SIZE),this.encodeCompressedWeight(r,wt.HEADER_SIZE+wt.GTIN_SIZE,wt.WEIGHT_SIZE),this.encodeCompressedDate(r,wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,wt.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let l=o%32;o/=32;let c=o%12+1;o/=12;let f=o;f/10==0&&r.append("0"),r.append(f),c/10==0&&r.append("0"),r.append(c),l/10==0&&r.append("0"),r.append(l)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}wt.HEADER_SIZE=8,wt.WEIGHT_SIZE=20,wt.DATE_SIZE=16;function k0(E){try{if(E.get(1))return new Ki(E);if(!E.get(2))return new Zo(E);switch(Wi.extractNumericValueFromBitArray(E,1,4)){case 4:return new zw(E);case 5:return new Hw(E)}switch(Wi.extractNumericValueFromBitArray(E,1,5)){case 12:return new pr(E);case 13:return new yn(E)}switch(Wi.extractNumericValueFromBitArray(E,1,7)){case 56:return new wt(E,"310","11");case 57:return new wt(E,"320","11");case 58:return new wt(E,"310","13");case 59:return new wt(E,"320","13");case 60:return new wt(E,"310","15");case 61:return new wt(E,"320","15");case 62:return new wt(E,"310","17");case 63:return new wt(E,"320","17")}}catch(r){throw console.log(r),new te("unknown decoder: "+E)}}class zr{constructor(r,s,o,l){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof zr?zr.equalsOrNull(r.leftchar,s.leftchar)&&zr.equalsOrNull(r.rightchar,s.rightchar)&&zr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:zr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Jl{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Jl?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((l,c)=>{s.forEach(f=>{l.getLeftChar().getValue()===f.getLeftChar().getValue()&&l.getRightChar().getValue()===f.getRightChar().getValue()&&l.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class ie extends Vt{constructor(r){super(...arguments),this.pairs=new Array(ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return ie.constructResult(this.decodeRow2pairs(r,s))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,ie.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(c){if(c instanceof q){if(!this.pairs.length)throw new q;o=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(r,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new q}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let l=this.rows[o];this.pairs.length=0;for(let f of r)this.pairs.push(f.getPairs());if(this.pairs.push(l.getPairs()),!ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(r);c.push(l);try{return this.checkRows(c,o+1)}catch(f){this.verbose&&console.log(f)}}throw new q}static isValidSequence(r){for(let s of ie.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!=s[l]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,l=!1,c=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>r){c=f.isEquivalent(this.pairs);break}l=f.isEquivalent(this.pairs),o++}c||l||ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Jl(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let l of o.getPairs())for(let c of r)if(zr.equals(l,c))break}}static isPartialRow(r,s){for(let o of s){let l=!0;for(let c of r){let f=!1;for(let h of o.getPairs())if(c.equals(h)){f=!0;break}if(!f){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Uw.buildBitArray(r),l=k0(s).parseInformation(),c=r[0].getFinderPattern().getResultPoints(),f=r[r.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],f[0],f[1]];return new We(l,null,null,h,ve.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let l=o.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let p=this.pairs.get(h);l+=p.getLeftChar().getChecksumPortion(),c++;let x=p.getRightChar();x!=null&&(l+=x.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let l=s.length%2==0;this.startFromEven&&(l=!l);let c,f=!0,h=-1;do this.findNextPair(r,s,h),c=this.parseFoundFinderPattern(r,o,l),c==null?h=ie.getNextSecondBar(r,this.startEnd[0]):f=!1;while(f);let p=this.decodeDataCharacter(r,c,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new q;let x;try{x=this.decodeDataCharacter(r,c,l,!1)}catch(w){x=null,this.verbose&&console.log(w)}return new zr(p,x,c,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),f;o>=0?f=o:this.isEmptyPair(s)?f=0:f=s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let p=!1;for(;f<c&&(p=!r.get(f),!!p);)f++;let x=0,w=f;for(let A=f;A<c;A++)if(r.get(A)!=p)l[x]++;else{if(x==3){if(h&&ie.reverseCounters(l),ie.isFinderPattern(l)){this.startEnd[0]=w,this.startEnd[1]=A;return}h&&ie.reverseCounters(l),w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,p=!p}throw new q}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let l=r[o];r[o]=r[s-o-1],r[s-o-1]=l}}parseFoundFinderPattern(r,s,o){let l,c,f;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,l=this.startEnd[0]-x,c=x,f=this.startEnd[1]}else c=this.startEnd[0],f=r.getNextUnset(this.startEnd[1]+1),l=f-this.startEnd[1];let h=this.getDecodeFinderCounters();M.arraycopy(h,0,h,1,h.length-1),h[0]=l;let p;try{p=this.parseFinderValue(h,ie.FINDER_PATTERNS)}catch{return null}return new yi(p,[c,f],c,f,s)}decodeDataCharacter(r,s,o,l){let c=this.getDataCharacterCounters();for(let pt=0;pt<c.length;pt++)c[pt]=0;if(l)ie.recordPatternInReverse(r,s.getStartEnd()[0],c);else{ie.recordPattern(r,s.getStartEnd()[1],c);for(let pt=0,nn=c.length-1;pt<nn;pt++,nn--){let Ln=c[pt];c[pt]=c[nn],c[nn]=Ln}}let f=17,h=me.sum(new Int32Array(c))/f,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new q;let x=this.getOddCounts(),w=this.getEvenCounts(),A=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let pt=0;pt<c.length;pt++){let nn=1*c[pt]/h,Ln=nn+.5;if(Ln<1){if(nn<.3)throw new q;Ln=1}else if(Ln>8){if(nn>8.7)throw new q;Ln=8}let $i=pt/2;pt&1?(w[$i]=Ln,b[$i]=nn-Ln):(x[$i]=Ln,A[$i]=nn-Ln)}this.adjustOddEvenCounts(f);let k=4*s.getValue()+(o?0:2)+(l?0:1)-1,L=0,j=0;for(let pt=x.length-1;pt>=0;pt--){if(ie.isNotA1left(s,o,l)){let nn=ie.WEIGHTS[k][2*pt];j+=x[pt]*nn}L+=x[pt]}let G=0;for(let pt=w.length-1;pt>=0;pt--)if(ie.isNotA1left(s,o,l)){let nn=ie.WEIGHTS[k][2*pt+1];G+=w[pt]*nn}let Q=j+G;if(L&1||L>13||L<4)throw new q;let ue=(13-L)/2,fe=ie.SYMBOL_WIDEST[ue],le=9-fe,Ze=nt.getRSSvalue(x,fe,!0),Ue=nt.getRSSvalue(w,le,!1),In=ie.EVEN_TOTAL_SUBSET[ue],rr=ie.GSUM[ue],Rn=Ze*In+Ue+rr;return new Ir(Rn,Q)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=me.sum(new Int32Array(this.getOddCounts())),o=me.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;s>13?c=!0:s<4&&(l=!0);let f=!1,h=!1;o>13?h=!0:o<4&&(f=!0);let p=s+o-r,x=(s&1)==1,w=(o&1)==0;if(p==1)if(x){if(w)throw new q;c=!0}else{if(!w)throw new q;h=!0}else if(p==-1)if(x){if(w)throw new q;l=!0}else{if(!w)throw new q;f=!0}else if(p==0){if(x){if(!w)throw new q;s<o?(l=!0,h=!0):(c=!0,f=!0)}else if(w)throw new q}else throw new q;if(l){if(c)throw new q;ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new q;ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ie.SYMBOL_WIDEST=[7,5,4,3,1],ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ie.GSUM=[0,348,1388,2948,3988],ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ie.FINDER_PAT_A=0,ie.FINDER_PAT_B=1,ie.FINDER_PAT_C=2,ie.FINDER_PAT_D=3,ie.FINDER_PAT_E=4,ie.FINDER_PAT_F=5,ie.FINDER_PATTERN_SEQUENCES=[[ie.FINDER_PAT_A,ie.FINDER_PAT_A],[ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B],[ie.FINDER_PAT_A,ie.FINDER_PAT_C,ie.FINDER_PAT_B,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_C],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F]],ie.MAX_PAIRS=11;class Vw extends Ir{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends Vt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const l=this.decodePair(s,!1,r,o);Rt.addOrTally(this.possibleLeftPairs,l),s.reverse();let c=this.decodePair(s,!0,r,o);Rt.addOrTally(this.possibleRightPairs,c),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Rt.checkChecksum(f,h))return Rt.constructResult(f,h)}throw new q}static addOrTally(r,s){if(s==null)return;let o=!1;for(let l of r)if(l.getValue()===s.getValue()){l.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),l=new String(o).toString(),c=new J;for(let x=13-l.length;x>0;x--)c.append("0");c.append(l);let f=0;for(let x=0;x<13;x++){let w=c.charAt(x).charCodeAt(0)-48;f+=x&1?w:3*w}f=10-f%10,f===10&&(f=0),c.append(f.toString());let h=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new We(c.toString(),null,0,[h[0],h[1],p[0],p[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,o===l}decodePair(r,s,o,l){try{let c=this.findFinderPattern(r,s),f=this.parseFoundFinderPattern(r,o,s,c),h=l==null?null:l.get(V.NEED_RESULT_POINT_CALLBACK);if(h!=null){let w=(c[0]+c[1])/2;s&&(w=r.getSize()-1-w),h.foundPossibleResultPoint(new oe(w,o))}let p=this.decodeDataCharacter(r,f,!0),x=this.decodeDataCharacter(r,f,!1);return new Vw(1597*p.getValue()+x.getValue(),p.getChecksumPortion()+4*x.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(r,s,o){let l=this.getDataCharacterCounters();for(let G=0;G<l.length;G++)l[G]=0;if(o)Qe.recordPatternInReverse(r,s.getStartEnd()[0],l);else{Qe.recordPattern(r,s.getStartEnd()[1]+1,l);for(let G=0,Q=l.length-1;G<Q;G++,Q--){let ue=l[G];l[G]=l[Q],l[Q]=ue}}let c=o?16:15,f=me.sum(new Int32Array(l))/c,h=this.getOddCounts(),p=this.getEvenCounts(),x=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let G=0;G<l.length;G++){let Q=l[G]/f,ue=Math.floor(Q+.5);ue<1?ue=1:ue>8&&(ue=8);let fe=Math.floor(G/2);G&1?(p[fe]=ue,w[fe]=Q-ue):(h[fe]=ue,x[fe]=Q-ue)}this.adjustOddEvenCounts(o,c);let A=0,b=0;for(let G=h.length-1;G>=0;G--)b*=9,b+=h[G],A+=h[G];let k=0,L=0;for(let G=p.length-1;G>=0;G--)k*=9,k+=p[G],L+=p[G];let j=b+3*k;if(o){if(A&1||A>12||A<4)throw new q;let G=(12-A)/2,Q=Rt.OUTSIDE_ODD_WIDEST[G],ue=9-Q,fe=nt.getRSSvalue(h,Q,!1),le=nt.getRSSvalue(p,ue,!0),Ze=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[G],Ue=Rt.OUTSIDE_GSUM[G];return new Ir(fe*Ze+le+Ue,j)}else{if(L&1||L>10||L<4)throw new q;let G=(10-L)/2,Q=Rt.INSIDE_ODD_WIDEST[G],ue=9-Q,fe=nt.getRSSvalue(h,Q,!0),le=nt.getRSSvalue(p,ue,!1),Ze=Rt.INSIDE_ODD_TOTAL_SUBSET[G],Ue=Rt.INSIDE_GSUM[G];return new Ir(le*Ze+fe+Ue,j)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=r.getSize(),c=!1,f=0;for(;f<l&&(c=!r.get(f),s!==c);)f++;let h=0,p=f;for(let x=f;x<l;x++)if(r.get(x)!==c)o[h]++;else{if(h===3){if(Vt.isFinderPattern(o))return[p,x];p+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,c=!c}throw new q}parseFoundFinderPattern(r,s,o,l){let c=r.get(l[0]),f=l[0]-1;for(;f>=0&&c!==r.get(f);)f--;f++;const h=l[0]-f,p=this.getDecodeFinderCounters(),x=new Int32Array(p.length);M.arraycopy(p,0,x,1,p.length-1),x[0]=h;const w=this.parseFinderValue(x,Rt.FINDER_PATTERNS);let A=f,b=l[1];return o&&(A=r.getSize()-1-A,b=r.getSize()-1-b),new yi(w,[f,l[1]],A,b,s)}adjustOddEvenCounts(r,s){let o=me.sum(new Int32Array(this.getOddCounts())),l=me.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,h=!1,p=!1;r?(o>12?f=!0:o<4&&(c=!0),l>12?p=!0:l<4&&(h=!0)):(o>11?f=!0:o<5&&(c=!0),l>10?p=!0:l<4&&(h=!0));let x=o+l-s,w=(o&1)===(r?1:0),A=(l&1)===1;if(x===1)if(w){if(A)throw new q;f=!0}else{if(!A)throw new q;p=!0}else if(x===-1)if(w){if(A)throw new q;c=!0}else{if(!A)throw new q;h=!0}else if(x===0){if(w){if(!A)throw new q;o<l?(c=!0,p=!0):(f=!0,h=!0)}else if(A)throw new q}else throw new q;if(c){if(f)throw new q;Vt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Vt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new q;Vt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Vt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Xi extends Qe{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(V.POSSIBLE_FORMATS):null,l=r&&r.get(V.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ve.EAN_13)||o.includes(ve.UPC_A)||o.includes(ve.EAN_8)||o.includes(ve.UPC_E))&&this.readers.push(new Gi(r)),o.includes(ve.CODE_39)&&this.readers.push(new je(l)),o.includes(ve.CODE_128)&&this.readers.push(new de),o.includes(ve.ITF)&&this.readers.push(new Le),o.includes(ve.RSS_14)&&this.readers.push(new Rt),o.includes(ve.RSS_EXPANDED)&&this.readers.push(new ie(this.verbose))):(this.readers.push(new Gi(r)),this.readers.push(new je),this.readers.push(new Gi(r)),this.readers.push(new de),this.readers.push(new Le),this.readers.push(new Rt),this.readers.push(new ie(this.verbose)))}decodeRow(r,s,o){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(r,s,o)}catch{}throw new q}reset(){this.readers.forEach(r=>r.reset())}}class qw extends ft{constructor(r=500,s){super(new Xi(s),r,s)}}class lt{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Je{constructor(r,s,o,l,c,f){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=f;let h=0;const p=f.getECCodewords(),x=f.getECBlocks();for(let w of x)h+=w.getCount()*(w.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new F;for(let o of Je.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Je(1,10,10,8,8,new lt(5,new st(1,3))),new Je(2,12,12,10,10,new lt(7,new st(1,5))),new Je(3,14,14,12,12,new lt(10,new st(1,8))),new Je(4,16,16,14,14,new lt(12,new st(1,12))),new Je(5,18,18,16,16,new lt(14,new st(1,18))),new Je(6,20,20,18,18,new lt(18,new st(1,22))),new Je(7,22,22,20,20,new lt(20,new st(1,30))),new Je(8,24,24,22,22,new lt(24,new st(1,36))),new Je(9,26,26,24,24,new lt(28,new st(1,44))),new Je(10,32,32,14,14,new lt(36,new st(1,62))),new Je(11,36,36,16,16,new lt(42,new st(1,86))),new Je(12,40,40,18,18,new lt(48,new st(1,114))),new Je(13,44,44,20,20,new lt(56,new st(1,144))),new Je(14,48,48,22,22,new lt(68,new st(1,174))),new Je(15,52,52,24,24,new lt(42,new st(2,102))),new Je(16,64,64,14,14,new lt(56,new st(2,140))),new Je(17,72,72,16,16,new lt(36,new st(4,92))),new Je(18,80,80,18,18,new lt(48,new st(4,114))),new Je(19,88,88,20,20,new lt(56,new st(4,144))),new Je(20,96,96,22,22,new lt(68,new st(4,174))),new Je(21,104,104,24,24,new lt(56,new st(6,136))),new Je(22,120,120,18,18,new lt(68,new st(6,175))),new Je(23,132,132,20,20,new lt(62,new st(8,163))),new Je(24,144,144,22,22,new lt(62,new st(8,156),new st(2,155))),new Je(25,8,18,6,16,new lt(7,new st(1,5))),new Je(26,8,32,6,14,new lt(11,new st(1,10))),new Je(27,12,26,10,24,new lt(14,new st(1,16))),new Je(28,12,36,10,16,new lt(18,new st(1,22))),new Je(29,16,36,14,16,new lt(24,new st(1,32))),new Je(30,16,48,14,22,new lt(28,new st(1,49)))]}}Je.VERSIONS=Je.buildVersions();class ec{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new F;this.version=ec.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return Je.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,l=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,p=!1,x=!1,w=!1;do if(o===c&&l===0&&!h)r[s++]=this.readCorner1(c,f)&255,o-=2,l+=2,h=!0;else if(o===c-2&&l===0&&f&3&&!p)r[s++]=this.readCorner2(c,f)&255,o-=2,l+=2,p=!0;else if(o===c+4&&l===2&&!(f&7)&&!x)r[s++]=this.readCorner3(c,f)&255,o-=2,l+=2,x=!0;else if(o===c-2&&l===0&&(f&7)===4&&!w)r[s++]=this.readCorner4(c,f)&255,o-=2,l+=2,w=!0;else{do o<c&&l>=0&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,c,f)&255),o-=2,l+=2;while(o>=0&&l<f);o+=1,l+=3;do o>=0&&l<f&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,c,f)&255),o+=2,l-=2;while(o<c&&l>=0);o+=3,l+=1}while(o<c||l<f);if(s!==this.version.getTotalCodewords())throw new F;return r}readModule(r,s,o,l){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=l,r+=4-(l+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,l){let c=0;return this.readModule(r-2,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r-2,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s,o,l)&&(c|=1),c<<=1,this.readModule(r,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r,s,o,l)&&(c|=1),c}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new v("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=s/l|0,h=o/c|0,p=f*l,x=h*c,w=new Ce(x,p);for(let A=0;A<f;++A){const b=A*l;for(let k=0;k<h;++k){const L=k*c;for(let j=0;j<l;++j){const G=A*(l+2)+1+j,Q=b+j;for(let ue=0;ue<c;++ue){const fe=k*(c+2)+1+ue;if(r.get(fe,G)){const le=L+ue;w.set(le,Q)}}}}}return w}}class tc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let l=0;const c=o.getECBlocks();for(let j of c)l+=j.getCount();const f=new Array(l);let h=0;for(let j of c)for(let G=0;G<j.getCount();G++){const Q=j.getDataCodewords(),ue=o.getECCodewords()+Q;f[h++]=new tc(Q,new Uint8Array(ue))}const x=f[0].codewords.length-o.getECCodewords(),w=x-1;let A=0;for(let j=0;j<w;j++)for(let G=0;G<h;G++)f[G].codewords[j]=r[A++];const b=s.getVersionNumber()===24,k=b?8:h;for(let j=0;j<k;j++)f[j].codewords[x-1]=r[A++];const L=f[0].codewords.length;for(let j=x;j<L;j++)for(let G=0;G<h;G++){const Q=b?(G+8)%h:G,ue=b&&Q>7?j-1:j;f[Q].codewords[ue]=r[A++]}if(A!==r.length)throw new v;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class nc{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new v(""+r);let s=0,o=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(o>0){const f=8-o,h=r<f?r:f,p=f-h,x=255>>8-h<<p;s=(c[l]&x)>>p,r-=h,o+=h,o===8&&(o=0,l++)}if(r>0){for(;r>=8;)s=s<<8|c[l]&255,l++,r-=8;if(r>0){const f=8-r,h=255>>f<<f;s=s<<r|(c[l]&h)>>f,o+=r}}return this.bitOffset=o,this.byteOffset=l,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(E){E[E.PAD_ENCODE=0]="PAD_ENCODE",E[E.ASCII_ENCODE=1]="ASCII_ENCODE",E[E.C40_ENCODE=2]="C40_ENCODE",E[E.TEXT_ENCODE=3]="TEXT_ENCODE",E[E.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",E[E.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",E[E.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class Hr{static decode(r){const s=new nc(r),o=new J,l=new J,c=new Array;let f=qt.ASCII_ENCODE;do if(f===qt.ASCII_ENCODE)f=this.decodeAsciiSegment(s,o,l);else{switch(f){case qt.C40_ENCODE:this.decodeC40Segment(s,o);break;case qt.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(s,o,c);break;default:throw new F}f=qt.ASCII_ENCODE}while(f!==qt.PAD_ENCODE&&s.available()>0);return l.length()>0&&o.append(l.toString()),new En(r,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(r,s,o){let l=!1;do{let c=r.readBits(8);if(c===0)throw new F;if(c<=128)return l&&(c+=128),s.append(String.fromCharCode(c-1)),qt.ASCII_ENCODE;if(c===129)return qt.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&s.append("0"),s.append(""+f)}else switch(c){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const l=[];let c=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let h=0;h<3;h++){const p=l[h];switch(c){case 0:if(p<3)c=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new F;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new F}c=0;break;case 3:o?(s.append(String.fromCharCode(p+224)),o=!1):s.append(String.fromCharCode(p+96)),c=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,l=[],c=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let h=0;h<3;h++){const p=l[h];switch(c){case 0:if(p<3)c=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else throw new F;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new F}c=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[p];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x),c=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const l=r.readBits(8);if(l===254)return;this.parseTwoBytes(l,r.readBits(8),o);for(let c=0;c<3;c++){const f=o[c];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else if(f<40)s.append(String.fromCharCode(f+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let l=(r<<8)+s-1,c=Math.floor(l/1600);o[0]=c,l-=c*1600,c=Math.floor(l/40),o[1]=c,o[2]=l-c*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let l=r.readBits(6);if(l===31){const c=8-r.getBitOffset();c!==8&&r.readBits(c);return}l&32||(l|=64),s.append(String.fromCharCode(l))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let l=1+r.getByteOffset();const c=this.unrandomize255State(r.readBits(8),l++);let f;if(c===0?f=r.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(r.readBits(8),l++),f<0)throw new F;const h=new Uint8Array(f);for(let p=0;p<f;p++){if(r.available()<8)throw new F;h[p]=this.unrandomize255State(r.readBits(8),l++)}o.push(h);try{s.append(ye.decode(h,ee.ISO88591))}catch(p){throw new te("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const o=149*s%255+1,l=r-o;return l>=0?l:l+256}}Hr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hr.TEXT_SHIFT2_SET_CHARS=Hr.C40_SHIFT2_SET_CHARS,Hr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Gw{constructor(){this.rsDecoder=new xe(U.DATA_MATRIX_FIELD_256)}decode(r){const s=new ec(r),o=s.getVersion(),l=s.readCodewords(),c=tc.getDataBlocks(l,o);let f=0;for(let x of c)f+=x.getNumDataCodewords();const h=new Uint8Array(f),p=c.length;for(let x=0;x<p;x++){const w=c[x],A=w.getCodewords(),b=w.getNumDataCodewords();this.correctErrors(A,b);for(let k=0;k<b;k++)h[k*p+x]=A[k]}return Hr.decode(h)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new N}for(let l=0;l<s;l++)r[l]=o[l]}}class Lt{constructor(r){this.image=r,this.rectangleDetector=new Ne(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new q;s=this.shiftToModuleCenter(s);const o=s[0],l=s[1],c=s[2],f=s[3];let h=this.transitionsBetween(o,f)+1,p=this.transitionsBetween(c,f)+1;(h&1)===1&&(h+=1),(p&1)===1&&(p+=1),4*h<7*p&&4*p<7*h&&(h=p=Math.max(h,p));let x=Lt.sampleGrid(this.image,o,l,c,f,h,p);return new Be(x,[o,l,c,f])}static shiftPoint(r,s,o){let l=(s.getX()-r.getX())/(o+1),c=(s.getY()-r.getY())/(o+1);return new oe(r.getX()+l,r.getY()+c)}static moveAway(r,s,o){let l=r.getX(),c=r.getY();return l<s?l-=1:l+=1,c<o?c-=1:c+=1,new oe(l,c)}detectSolid1(r){let s=r[0],o=r[1],l=r[3],c=r[2],f=this.transitionsBetween(s,o),h=this.transitionsBetween(o,l),p=this.transitionsBetween(l,c),x=this.transitionsBetween(c,s),w=f,A=[c,s,o,l];return w>h&&(w=h,A[0]=s,A[1]=o,A[2]=l,A[3]=c),w>p&&(w=p,A[0]=o,A[1]=l,A[2]=c,A[3]=s),w>x&&(A[0]=l,A[1]=c,A[2]=s,A[3]=o),A}detectSolid2(r){let s=r[0],o=r[1],l=r[2],c=r[3],f=this.transitionsBetween(s,c),h=Lt.shiftPoint(o,l,(f+1)*4),p=Lt.shiftPoint(l,o,(f+1)*4),x=this.transitionsBetween(h,s),w=this.transitionsBetween(p,c);return x<w?(r[0]=s,r[1]=o,r[2]=l,r[3]=c):(r[0]=o,r[1]=l,r[2]=c,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],l=r[2],c=r[3],f=this.transitionsBetween(s,c),h=this.transitionsBetween(o,c),p=Lt.shiftPoint(s,o,(h+1)*4),x=Lt.shiftPoint(l,o,(f+1)*4);f=this.transitionsBetween(p,c),h=this.transitionsBetween(x,c);let w=new oe(c.getX()+(l.getX()-o.getX())/(f+1),c.getY()+(l.getY()-o.getY())/(f+1)),A=new oe(c.getX()+(s.getX()-o.getX())/(h+1),c.getY()+(s.getY()-o.getY())/(h+1));if(!this.isValid(w))return this.isValid(A)?A:null;if(!this.isValid(A))return w;let b=this.transitionsBetween(p,w)+this.transitionsBetween(x,w),k=this.transitionsBetween(p,A)+this.transitionsBetween(x,A);return b>k?w:A}shiftToModuleCenter(r){let s=r[0],o=r[1],l=r[2],c=r[3],f=this.transitionsBetween(s,c)+1,h=this.transitionsBetween(l,c)+1,p=Lt.shiftPoint(s,o,h*4),x=Lt.shiftPoint(l,o,f*4);f=this.transitionsBetween(p,c)+1,h=this.transitionsBetween(x,c)+1,(f&1)===1&&(f+=1),(h&1)===1&&(h+=1);let w=(s.getX()+o.getX()+l.getX()+c.getX())/4,A=(s.getY()+o.getY()+l.getY()+c.getY())/4;s=Lt.moveAway(s,w,A),o=Lt.moveAway(o,w,A),l=Lt.moveAway(l,w,A),c=Lt.moveAway(c,w,A);let b,k;return p=Lt.shiftPoint(s,o,h*4),p=Lt.shiftPoint(p,c,f*4),b=Lt.shiftPoint(o,s,h*4),b=Lt.shiftPoint(b,l,f*4),x=Lt.shiftPoint(l,c,h*4),x=Lt.shiftPoint(x,o,f*4),k=Lt.shiftPoint(c,l,h*4),k=Lt.shiftPoint(k,s,f*4),[p,b,x,k]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,l,c,f,h){return Dt.getInstance().sampleGrid(r,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,s.getX(),s.getY(),c.getX(),c.getY(),l.getX(),l.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),l=Math.trunc(r.getY()),c=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.abs(f-l)>Math.abs(c-o);if(h){let j=o;o=l,l=j,j=c,c=f,f=j}let p=Math.abs(c-o),x=Math.abs(f-l),w=-p/2,A=l<f?1:-1,b=o<c?1:-1,k=0,L=this.image.get(h?l:o,h?o:l);for(let j=o,G=l;j!==c;j+=b){let Q=this.image.get(h?G:j,h?j:G);if(Q!==L&&(k++,L=Q),w+=x,w>0){if(G===f)break;G+=A,w-=p}}return k}}class Vr{constructor(){this.decoder=new Gw}decode(r,s=null){let o,l;if(s!=null&&s.has(V.PURE_BARCODE)){const x=Vr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(x),l=Vr.NO_POINTS}else{const x=new Lt(r.getBlackMatrix()).detect();o=this.decoder.decode(x.getBits()),l=x.getPoints()}const c=o.getRawBytes(),f=new We(o.getText(),c,8*c.length,l,ve.DATA_MATRIX,M.currentTimeMillis()),h=o.getByteSegments();h!=null&&f.putMetadata(ze.BYTE_SEGMENTS,h);const p=o.getECLevel();return p!=null&&f.putMetadata(ze.ERROR_CORRECTION_LEVEL,p),f}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new q;const l=this.moduleSize(s,r);let c=s[1];const f=o[1];let h=s[0];const x=(o[0]-h+1)/l,w=(f-c+1)/l;if(x<=0||w<=0)throw new q;const A=l/2;c+=A,h+=A;const b=new Ce(x,w);for(let k=0;k<w;k++){const L=c+k*l;for(let j=0;j<x;j++)r.get(h+j*l,L)&&b.set(j,k)}return b}static moduleSize(r,s){const o=s.getWidth();let l=r[0];const c=r[1];for(;l<o&&s.get(l,c);)l++;if(l===o)throw new q;const f=l-r[0];if(f===0)throw new q;return f}}Vr.NO_POINTS=[];class Ww extends ft{constructor(r=500){super(new Vr,r)}}var Yi;(function(E){E[E.L=0]="L",E[E.M=1]="M",E[E.Q=2]="Q",E[E.H=3]="H"})(Yi||(Yi={}));class gt{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,gt.FOR_BITS.set(o,this),gt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return gt.L;case"M":return gt.M;case"Q":return gt.Q;case"H":return gt.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof gt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=gt.FOR_BITS.size)throw new v;return gt.FOR_BITS.get(r)}}gt.FOR_BITS=new Map,gt.FOR_VALUE=new Map,gt.L=new gt(Yi.L,"L",1),gt.M=new gt(Yi.M,"M",0),gt.Q=new gt(Yi.Q,"Q",3),gt.H=new gt(Yi.H,"H",2);class ln{constructor(r){this.errorCorrectionLevel=gt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return R.bitCount(r^s)}static decodeFormatInformation(r,s){const o=ln.doDecodeFormatInformation(r,s);return o!==null?o:ln.doDecodeFormatInformation(r^ln.FORMAT_INFO_MASK_QR,s^ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,l=0;for(const c of ln.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===r||f===s)return new ln(c[1]);let h=ln.numBitsDiffering(r,f);h<o&&(l=c[1],o=h),r!==s&&(h=ln.numBitsDiffering(s,f),h<o&&(l=c[1],o=h))}return o<=3?new ln(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof ln))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}ln.FORMAT_INFO_MASK_QR=21522,ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ie{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let l=0;const c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const h of f)l+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new v;return Ie.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<Ie.VERSION_DECODE_INFO.length;l++){const c=Ie.VERSION_DECODE_INFO[l];if(c===r)return Ie.getVersionForNumber(l+7);const f=ln.numBitsDiffering(r,c);f<s&&(o=l+7,s=f)}return s<=3?Ie.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new Ce(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let l=0;l<o;l++){const c=this.alignmentPatternCenters[l]-2;for(let f=0;f<o;f++)l===0&&(f===0||f===o-1)||l===o-1&&f===0||s.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Ie.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ie.VERSIONS=[new Ie(1,new Int32Array(0),new W(7,new O(1,19)),new W(10,new O(1,16)),new W(13,new O(1,13)),new W(17,new O(1,9))),new Ie(2,Int32Array.from([6,18]),new W(10,new O(1,34)),new W(16,new O(1,28)),new W(22,new O(1,22)),new W(28,new O(1,16))),new Ie(3,Int32Array.from([6,22]),new W(15,new O(1,55)),new W(26,new O(1,44)),new W(18,new O(2,17)),new W(22,new O(2,13))),new Ie(4,Int32Array.from([6,26]),new W(20,new O(1,80)),new W(18,new O(2,32)),new W(26,new O(2,24)),new W(16,new O(4,9))),new Ie(5,Int32Array.from([6,30]),new W(26,new O(1,108)),new W(24,new O(2,43)),new W(18,new O(2,15),new O(2,16)),new W(22,new O(2,11),new O(2,12))),new Ie(6,Int32Array.from([6,34]),new W(18,new O(2,68)),new W(16,new O(4,27)),new W(24,new O(4,19)),new W(28,new O(4,15))),new Ie(7,Int32Array.from([6,22,38]),new W(20,new O(2,78)),new W(18,new O(4,31)),new W(18,new O(2,14),new O(4,15)),new W(26,new O(4,13),new O(1,14))),new Ie(8,Int32Array.from([6,24,42]),new W(24,new O(2,97)),new W(22,new O(2,38),new O(2,39)),new W(22,new O(4,18),new O(2,19)),new W(26,new O(4,14),new O(2,15))),new Ie(9,Int32Array.from([6,26,46]),new W(30,new O(2,116)),new W(22,new O(3,36),new O(2,37)),new W(20,new O(4,16),new O(4,17)),new W(24,new O(4,12),new O(4,13))),new Ie(10,Int32Array.from([6,28,50]),new W(18,new O(2,68),new O(2,69)),new W(26,new O(4,43),new O(1,44)),new W(24,new O(6,19),new O(2,20)),new W(28,new O(6,15),new O(2,16))),new Ie(11,Int32Array.from([6,30,54]),new W(20,new O(4,81)),new W(30,new O(1,50),new O(4,51)),new W(28,new O(4,22),new O(4,23)),new W(24,new O(3,12),new O(8,13))),new Ie(12,Int32Array.from([6,32,58]),new W(24,new O(2,92),new O(2,93)),new W(22,new O(6,36),new O(2,37)),new W(26,new O(4,20),new O(6,21)),new W(28,new O(7,14),new O(4,15))),new Ie(13,Int32Array.from([6,34,62]),new W(26,new O(4,107)),new W(22,new O(8,37),new O(1,38)),new W(24,new O(8,20),new O(4,21)),new W(22,new O(12,11),new O(4,12))),new Ie(14,Int32Array.from([6,26,46,66]),new W(30,new O(3,115),new O(1,116)),new W(24,new O(4,40),new O(5,41)),new W(20,new O(11,16),new O(5,17)),new W(24,new O(11,12),new O(5,13))),new Ie(15,Int32Array.from([6,26,48,70]),new W(22,new O(5,87),new O(1,88)),new W(24,new O(5,41),new O(5,42)),new W(30,new O(5,24),new O(7,25)),new W(24,new O(11,12),new O(7,13))),new Ie(16,Int32Array.from([6,26,50,74]),new W(24,new O(5,98),new O(1,99)),new W(28,new O(7,45),new O(3,46)),new W(24,new O(15,19),new O(2,20)),new W(30,new O(3,15),new O(13,16))),new Ie(17,Int32Array.from([6,30,54,78]),new W(28,new O(1,107),new O(5,108)),new W(28,new O(10,46),new O(1,47)),new W(28,new O(1,22),new O(15,23)),new W(28,new O(2,14),new O(17,15))),new Ie(18,Int32Array.from([6,30,56,82]),new W(30,new O(5,120),new O(1,121)),new W(26,new O(9,43),new O(4,44)),new W(28,new O(17,22),new O(1,23)),new W(28,new O(2,14),new O(19,15))),new Ie(19,Int32Array.from([6,30,58,86]),new W(28,new O(3,113),new O(4,114)),new W(26,new O(3,44),new O(11,45)),new W(26,new O(17,21),new O(4,22)),new W(26,new O(9,13),new O(16,14))),new Ie(20,Int32Array.from([6,34,62,90]),new W(28,new O(3,107),new O(5,108)),new W(26,new O(3,41),new O(13,42)),new W(30,new O(15,24),new O(5,25)),new W(28,new O(15,15),new O(10,16))),new Ie(21,Int32Array.from([6,28,50,72,94]),new W(28,new O(4,116),new O(4,117)),new W(26,new O(17,42)),new W(28,new O(17,22),new O(6,23)),new W(30,new O(19,16),new O(6,17))),new Ie(22,Int32Array.from([6,26,50,74,98]),new W(28,new O(2,111),new O(7,112)),new W(28,new O(17,46)),new W(30,new O(7,24),new O(16,25)),new W(24,new O(34,13))),new Ie(23,Int32Array.from([6,30,54,78,102]),new W(30,new O(4,121),new O(5,122)),new W(28,new O(4,47),new O(14,48)),new W(30,new O(11,24),new O(14,25)),new W(30,new O(16,15),new O(14,16))),new Ie(24,Int32Array.from([6,28,54,80,106]),new W(30,new O(6,117),new O(4,118)),new W(28,new O(6,45),new O(14,46)),new W(30,new O(11,24),new O(16,25)),new W(30,new O(30,16),new O(2,17))),new Ie(25,Int32Array.from([6,32,58,84,110]),new W(26,new O(8,106),new O(4,107)),new W(28,new O(8,47),new O(13,48)),new W(30,new O(7,24),new O(22,25)),new W(30,new O(22,15),new O(13,16))),new Ie(26,Int32Array.from([6,30,58,86,114]),new W(28,new O(10,114),new O(2,115)),new W(28,new O(19,46),new O(4,47)),new W(28,new O(28,22),new O(6,23)),new W(30,new O(33,16),new O(4,17))),new Ie(27,Int32Array.from([6,34,62,90,118]),new W(30,new O(8,122),new O(4,123)),new W(28,new O(22,45),new O(3,46)),new W(30,new O(8,23),new O(26,24)),new W(30,new O(12,15),new O(28,16))),new Ie(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new O(3,117),new O(10,118)),new W(28,new O(3,45),new O(23,46)),new W(30,new O(4,24),new O(31,25)),new W(30,new O(11,15),new O(31,16))),new Ie(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new O(7,116),new O(7,117)),new W(28,new O(21,45),new O(7,46)),new W(30,new O(1,23),new O(37,24)),new W(30,new O(19,15),new O(26,16))),new Ie(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new O(5,115),new O(10,116)),new W(28,new O(19,47),new O(10,48)),new W(30,new O(15,24),new O(25,25)),new W(30,new O(23,15),new O(25,16))),new Ie(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new O(13,115),new O(3,116)),new W(28,new O(2,46),new O(29,47)),new W(30,new O(42,24),new O(1,25)),new W(30,new O(23,15),new O(28,16))),new Ie(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new O(17,115)),new W(28,new O(10,46),new O(23,47)),new W(30,new O(10,24),new O(35,25)),new W(30,new O(19,15),new O(35,16))),new Ie(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new O(17,115),new O(1,116)),new W(28,new O(14,46),new O(21,47)),new W(30,new O(29,24),new O(19,25)),new W(30,new O(11,15),new O(46,16))),new Ie(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new O(13,115),new O(6,116)),new W(28,new O(14,46),new O(23,47)),new W(30,new O(44,24),new O(7,25)),new W(30,new O(59,16),new O(1,17))),new Ie(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new O(12,121),new O(7,122)),new W(28,new O(12,47),new O(26,48)),new W(30,new O(39,24),new O(14,25)),new W(30,new O(22,15),new O(41,16))),new Ie(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new O(6,121),new O(14,122)),new W(28,new O(6,47),new O(34,48)),new W(30,new O(46,24),new O(10,25)),new W(30,new O(2,15),new O(64,16))),new Ie(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new O(17,122),new O(4,123)),new W(28,new O(29,46),new O(14,47)),new W(30,new O(49,24),new O(10,25)),new W(30,new O(24,15),new O(46,16))),new Ie(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new O(4,122),new O(18,123)),new W(28,new O(13,46),new O(32,47)),new W(30,new O(48,24),new O(14,25)),new W(30,new O(42,15),new O(32,16))),new Ie(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new O(20,117),new O(4,118)),new W(28,new O(40,47),new O(7,48)),new W(30,new O(43,24),new O(22,25)),new W(30,new O(10,15),new O(67,16))),new Ie(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new O(19,118),new O(6,119)),new W(28,new O(18,47),new O(31,48)),new W(30,new O(34,24),new O(34,25)),new W(30,new O(20,15),new O(61,16)))];var Yt;(function(E){E[E.DATA_MASK_000=0]="DATA_MASK_000",E[E.DATA_MASK_001=1]="DATA_MASK_001",E[E.DATA_MASK_010=2]="DATA_MASK_010",E[E.DATA_MASK_011=3]="DATA_MASK_011",E[E.DATA_MASK_100=4]="DATA_MASK_100",E[E.DATA_MASK_101=5]="DATA_MASK_101",E[E.DATA_MASK_110=6]="DATA_MASK_110",E[E.DATA_MASK_111=7]="DATA_MASK_111"})(Yt||(Yt={}));class Gn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let l=0;l<s;l++)this.isMasked(o,l)&&r.flip(l,o)}}Gn.values=new Map([[Yt.DATA_MASK_000,new Gn(Yt.DATA_MASK_000,(E,r)=>(E+r&1)===0)],[Yt.DATA_MASK_001,new Gn(Yt.DATA_MASK_001,(E,r)=>(E&1)===0)],[Yt.DATA_MASK_010,new Gn(Yt.DATA_MASK_010,(E,r)=>r%3===0)],[Yt.DATA_MASK_011,new Gn(Yt.DATA_MASK_011,(E,r)=>(E+r)%3===0)],[Yt.DATA_MASK_100,new Gn(Yt.DATA_MASK_100,(E,r)=>(Math.floor(E/2)+Math.floor(r/3)&1)===0)],[Yt.DATA_MASK_101,new Gn(Yt.DATA_MASK_101,(E,r)=>E*r%6===0)],[Yt.DATA_MASK_110,new Gn(Yt.DATA_MASK_110,(E,r)=>E*r%6<3)],[Yt.DATA_MASK_111,new Gn(Yt.DATA_MASK_111,(E,r)=>(E+r+E*r%3&1)===0)]]);class Kw{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let c=0;c<6;c++)r=this.copyBit(c,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let c=5;c>=0;c--)r=this.copyBit(8,c,r);const s=this.bitMatrix.getHeight();let o=0;const l=s-7;for(let c=s-1;c>=l;c--)o=this.copyBit(8,c,o);for(let c=s-8;c<s;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=ln.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Ie.getVersionForNumber(s);let o=0;const l=r-11;for(let f=5;f>=0;f--)for(let h=r-9;h>=l;h--)o=this.copyBit(h,f,o);let c=Ie.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;o=0;for(let f=5;f>=0;f--)for(let h=r-9;h>=l;h--)o=this.copyBit(f,h,o);if(c=Ie.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;throw new F}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=Gn.values.get(r.getDataMask()),l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l);const c=s.buildFunctionPattern();let f=!0;const h=new Uint8Array(s.getTotalCodewords());let p=0,x=0,w=0;for(let A=l-1;A>0;A-=2){A===6&&A--;for(let b=0;b<l;b++){const k=f?l-1-b:b;for(let L=0;L<2;L++)c.get(A-L,k)||(w++,x<<=1,this.bitMatrix.get(A-L,k)&&(x|=1),w===8&&(h[p++]=x,w=0,x=0))}f=!f}if(p!==s.getTotalCodewords())throw new F;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Gn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let l=s+1,c=r.getHeight();l<c;l++)r.get(s,l)!==r.get(l,s)&&(r.flip(l,s),r.flip(s,l))}}class rc{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new v;const l=s.getECBlocksForLevel(o);let c=0;const f=l.getECBlocks();for(const L of f)c+=L.getCount();const h=new Array(c);let p=0;for(const L of f)for(let j=0;j<L.getCount();j++){const G=L.getDataCodewords(),Q=l.getECCodewordsPerBlock()+G;h[p++]=new rc(G,new Uint8Array(Q))}const x=h[0].codewords.length;let w=h.length-1;for(;w>=0&&h[w].codewords.length!==x;)w--;w++;const A=x-l.getECCodewordsPerBlock();let b=0;for(let L=0;L<A;L++)for(let j=0;j<p;j++)h[j].codewords[L]=r[b++];for(let L=w;L<p;L++)h[L].codewords[A]=r[b++];const k=h[0].codewords.length;for(let L=A;L<k;L++)for(let j=0;j<p;j++){const G=j<w?L:L+1;h[j].codewords[G]=r[b++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wn;(function(E){E[E.TERMINATOR=0]="TERMINATOR",E[E.NUMERIC=1]="NUMERIC",E[E.ALPHANUMERIC=2]="ALPHANUMERIC",E[E.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",E[E.BYTE=4]="BYTE",E[E.ECI=5]="ECI",E[E.KANJI=6]="KANJI",E[E.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",E[E.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",E[E.HANZI=9]="HANZI"})(Wn||(Wn={}));class Oe{constructor(r,s,o,l){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=l,Oe.FOR_BITS.set(l,this),Oe.FOR_VALUE.set(r,this)}static forBits(r){const s=Oe.FOR_BITS.get(r);if(s===void 0)throw new v;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Oe))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Oe.FOR_BITS=new Map,Oe.FOR_VALUE=new Map,Oe.TERMINATOR=new Oe(Wn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Oe.NUMERIC=new Oe(Wn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Oe.ALPHANUMERIC=new Oe(Wn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Oe.STRUCTURED_APPEND=new Oe(Wn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Oe.BYTE=new Oe(Wn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Oe.ECI=new Oe(Wn.ECI,"ECI",Int32Array.from([0,0,0]),7),Oe.KANJI=new Oe(Wn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Oe.FNC1_FIRST_POSITION=new Oe(Wn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Oe.FNC1_SECOND_POSITION=new Oe(Wn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Oe.HANZI=new Oe(Wn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Et{static decode(r,s,o,l){const c=new nc(r);let f=new J;const h=new Array;let p=-1,x=-1;try{let w=null,A=!1,b;do{if(c.available()<4)b=Oe.TERMINATOR;else{const k=c.readBits(4);b=Oe.forBits(k)}switch(b){case Oe.TERMINATOR:break;case Oe.FNC1_FIRST_POSITION:case Oe.FNC1_SECOND_POSITION:A=!0;break;case Oe.STRUCTURED_APPEND:if(c.available()<16)throw new F;p=c.readBits(8),x=c.readBits(8);break;case Oe.ECI:const k=Et.parseECIValue(c);if(w=H.getCharacterSetECIByValue(k),w===null)throw new F;break;case Oe.HANZI:const L=c.readBits(4),j=c.readBits(b.getCharacterCountBits(s));L===Et.GB2312_SUBSET&&Et.decodeHanziSegment(c,f,j);break;default:const G=c.readBits(b.getCharacterCountBits(s));switch(b){case Oe.NUMERIC:Et.decodeNumericSegment(c,f,G);break;case Oe.ALPHANUMERIC:Et.decodeAlphanumericSegment(c,f,G,A);break;case Oe.BYTE:Et.decodeByteSegment(c,f,G,w,h,l);break;case Oe.KANJI:Et.decodeKanjiSegment(c,f,G);break;default:throw new F}break}}while(b!==Oe.TERMINATOR)}catch{throw new F}return new En(r,f.toString(),h.length===0?null:h,o===null?null:o.toString(),p,x)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new F;const l=new Uint8Array(2*o);let c=0;for(;o>0;){const f=r.readBits(13);let h=f/96<<8&4294967295|f%96;h<959?h+=41377:h+=42657,l[c]=h>>8&255,l[c+1]=h&255,c+=2,o--}try{s.append(ye.decode(l,ee.GB2312))}catch(f){throw new F(f)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new F;const l=new Uint8Array(2*o);let c=0;for(;o>0;){const f=r.readBits(13);let h=f/192<<8&4294967295|f%192;h<7936?h+=33088:h+=49472,l[c]=h>>8,l[c+1]=h,c+=2,o--}try{s.append(ye.decode(l,ee.SHIFT_JIS))}catch(f){throw new F(f)}}static decodeByteSegment(r,s,o,l,c,f){if(8*o>r.available())throw new F;const h=new Uint8Array(o);for(let x=0;x<o;x++)h[x]=r.readBits(8);let p;l===null?p=ee.guessEncoding(h,f):p=l.getName();try{s.append(ye.decode(h,p))}catch(x){throw new F(x)}c.push(h)}static toAlphaNumericChar(r){if(r>=Et.ALPHANUMERIC_CHARS.length)throw new F;return Et.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,l){const c=s.length();for(;o>1;){if(r.available()<11)throw new F;const f=r.readBits(11);s.append(Et.toAlphaNumericChar(Math.floor(f/45))),s.append(Et.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(r.available()<6)throw new F;s.append(Et.toAlphaNumericChar(r.readBits(6)))}if(l)for(let f=c;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new F;const l=r.readBits(10);if(l>=1e3)throw new F;s.append(Et.toAlphaNumericChar(Math.floor(l/100))),s.append(Et.toAlphaNumericChar(Math.floor(l/10)%10)),s.append(Et.toAlphaNumericChar(l%10)),o-=3}if(o===2){if(r.available()<7)throw new F;const l=r.readBits(7);if(l>=100)throw new F;s.append(Et.toAlphaNumericChar(Math.floor(l/10))),s.append(Et.toAlphaNumericChar(l%10))}else if(o===1){if(r.available()<4)throw new F;const l=r.readBits(4);if(l>=10)throw new F;s.append(Et.toAlphaNumericChar(l))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new F}}Et.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Et.GB2312_SUBSET=1;class P0{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Xw{constructor(){this.rsDecoder=new xe(U.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(Ce.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new Kw(r);let l=null;try{return this.decodeBitMatrixParser(o,s)}catch(c){l=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,s);return c.setOther(new P0(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(r,s){const o=r.readVersion(),l=r.readFormatInformation().getErrorCorrectionLevel(),c=r.readCodewords(),f=rc.getDataBlocks(c,o,l);let h=0;for(const w of f)h+=w.getNumDataCodewords();const p=new Uint8Array(h);let x=0;for(const w of f){const A=w.getCodewords(),b=w.getNumDataCodewords();this.correctErrors(A,b);for(let k=0;k<b;k++)p[x++]=A[k]}return Et.decode(p,o,l,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new N}for(let l=0;l<s;l++)r[l]=o[l]}}class ic extends oe{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=(this.getX()+s)/2,c=(this.getY()+r)/2,f=(this.estimatedModuleSize+o)/2;return new ic(l,c,f)}}class $o{constructor(r,s,o,l,c,f,h){this.image=r,this.startX=s,this.startY=o,this.width=l,this.height=c,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,l=r+o,c=this.startY+s/2,f=new Int32Array(3),h=this.image;for(let p=0;p<s;p++){const x=c+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=r;for(;w<l&&!h.get(w,x);)w++;let A=0;for(;w<l;){if(h.get(w,x))if(A===1)f[1]++;else if(A===2){if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,x,w);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,A=1}else f[++A]++;else A===1&&A++,f[A]++;w++}if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,x,l);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new q}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let l=0;l<3;l++)if(Math.abs(s-r[l])>=o)return!1;return!0}crossCheckVertical(r,s,o,l){const c=this.image,f=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let p=r;for(;p>=0&&c.get(s,p)&&h[1]<=o;)h[1]++,p--;if(p<0||h[1]>o)return NaN;for(;p>=0&&!c.get(s,p)&&h[0]<=o;)h[0]++,p--;if(h[0]>o)return NaN;for(p=r+1;p<f&&c.get(s,p)&&h[1]<=o;)h[1]++,p++;if(p===f||h[1]>o)return NaN;for(;p<f&&!c.get(s,p)&&h[2]<=o;)h[2]++,p++;if(h[2]>o)return NaN;const x=h[0]+h[1]+h[2];return 5*Math.abs(x-l)>=2*l?NaN:this.foundPatternCross(h)?$o.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,o){const l=r[0]+r[1]+r[2],c=$o.centerFromEnd(r,o),f=this.crossCheckVertical(s,c,2*r[1],l);if(!isNaN(f)){const h=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(h,f,c))return x.combineEstimate(f,c,h);const p=new ic(c,f,h);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class sc extends oe{constructor(r,s,o,l){super(r,s),this.estimatedModuleSize=o,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=this.count+1,c=(this.count*this.getX()+s)/l,f=(this.count*this.getY()+r)/l,h=(this.count*this.estimatedModuleSize+o)/l;return new sc(c,f,h,l)}}class Yw{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Zt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(V.TRY_HARDER)!==void 0,o=r!=null&&r.get(V.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),f=l.getWidth();let h=Math.floor(3*c/(4*Zt.MAX_MODULES));(h<Zt.MIN_SKIP||s)&&(h=Zt.MIN_SKIP);let p=!1;const x=new Int32Array(5);for(let A=h-1;A<c&&!p;A+=h){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let b=0;for(let k=0;k<f;k++)if(l.get(k,A))(b&1)===1&&b++,x[b]++;else if(b&1)x[b]++;else if(b===4)if(Zt.foundPatternCross(x)){if(this.handlePossibleCenter(x,A,k,o)===!0)if(h=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const j=this.findRowSkip();j>x[2]&&(A+=j-x[2]-h,k=f-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,b=3;continue}b=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,b=3;else x[++b]++;Zt.foundPatternCross(x)&&this.handlePossibleCenter(x,A,f,o)===!0&&(h=x[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const w=this.selectBestPatterns();return oe.orderBestPatterns(w),new Yw(w)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let c=0;c<5;c++){const f=r[c];if(f===0)return!1;s+=f}if(s<7)return!1;const o=s/7,l=o/2;return Math.abs(o-r[0])<l&&Math.abs(o-r[1])<l&&Math.abs(3*o-r[2])<3*l&&Math.abs(o-r[3])<l&&Math.abs(o-r[4])<l}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,l){const c=this.getCrossCheckStateCount();let f=0;const h=this.image;for(;r>=f&&s>=f&&h.get(s-f,r-f);)c[2]++,f++;if(r<f||s<f)return!1;for(;r>=f&&s>=f&&!h.get(s-f,r-f)&&c[1]<=o;)c[1]++,f++;if(r<f||s<f||c[1]>o)return!1;for(;r>=f&&s>=f&&h.get(s-f,r-f)&&c[0]<=o;)c[0]++,f++;if(c[0]>o)return!1;const p=h.getHeight(),x=h.getWidth();for(f=1;r+f<p&&s+f<x&&h.get(s+f,r+f);)c[2]++,f++;if(r+f>=p||s+f>=x)return!1;for(;r+f<p&&s+f<x&&!h.get(s+f,r+f)&&c[3]<o;)c[3]++,f++;if(r+f>=p||s+f>=x||c[3]>=o)return!1;for(;r+f<p&&s+f<x&&h.get(s+f,r+f)&&c[4]<o;)c[4]++,f++;if(c[4]>=o)return!1;const w=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(w-l)<2*l&&Zt.foundPatternCross(c)}crossCheckVertical(r,s,o,l){const c=this.image,f=c.getHeight(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(s,p);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(s,p)&&h[1]<=o;)h[1]++,p--;if(p<0||h[1]>o)return NaN;for(;p>=0&&c.get(s,p)&&h[0]<=o;)h[0]++,p--;if(h[0]>o)return NaN;for(p=r+1;p<f&&c.get(s,p);)h[2]++,p++;if(p===f)return NaN;for(;p<f&&!c.get(s,p)&&h[3]<o;)h[3]++,p++;if(p===f||h[3]>=o)return NaN;for(;p<f&&c.get(s,p)&&h[4]<o;)h[4]++,p++;if(h[4]>=o)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-l)>=2*l?NaN:Zt.foundPatternCross(h)?Zt.centerFromEnd(h,p):NaN}crossCheckHorizontal(r,s,o,l){const c=this.image,f=c.getWidth(),h=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(p,s);)h[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(p,s)&&h[1]<=o;)h[1]++,p--;if(p<0||h[1]>o)return NaN;for(;p>=0&&c.get(p,s)&&h[0]<=o;)h[0]++,p--;if(h[0]>o)return NaN;for(p=r+1;p<f&&c.get(p,s);)h[2]++,p++;if(p===f)return NaN;for(;p<f&&!c.get(p,s)&&h[3]<o;)h[3]++,p++;if(p===f||h[3]>=o)return NaN;for(;p<f&&c.get(p,s)&&h[4]<o;)h[4]++,p++;if(h[4]>=o)return NaN;const x=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(x-l)>=l?NaN:Zt.foundPatternCross(h)?Zt.centerFromEnd(h,p):NaN}handlePossibleCenter(r,s,o,l){const c=r[0]+r[1]+r[2]+r[3]+r[4];let f=Zt.centerFromEnd(r,o),h=this.crossCheckVertical(s,Math.floor(f),r[2],c);if(!isNaN(h)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(h),r[2],c),!isNaN(f)&&(!l||this.crossCheckDiagonal(Math.floor(h),Math.floor(f),r[2],c)))){const p=c/7;let x=!1;const w=this.possibleCenters;for(let A=0,b=w.length;A<b;A++){const k=w[A];if(k.aboutEquals(p,h,f)){w[A]=k.combineEstimate(h,f,p),x=!0;break}}if(!x){const A=new sc(f,h,p);w.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Zt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Zt.CENTER_QUORUM&&(r++,s+=f.getEstimatedModuleSize());if(r<3)return!1;const l=s/o;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-l);return c<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new q;const s=this.possibleCenters;let o;if(r>3){let l=0,c=0;for(const p of this.possibleCenters){const x=p.getEstimatedModuleSize();l+=x,c+=x*x}o=l/r;let f=Math.sqrt(c/r-o*o);s.sort((p,x)=>{const w=Math.abs(x.getEstimatedModuleSize()-o),A=Math.abs(p.getEstimatedModuleSize()-o);return w<A?-1:w>A?1:0});const h=Math.max(.2*o,f);for(let p=0;p<s.length&&s.length>3;p++){const x=s[p];Math.abs(x.getEstimatedModuleSize()-o)>h&&(s.splice(p,1),p--)}}if(s.length>3){let l=0;for(const c of s)l+=c.getEstimatedModuleSize();o=l/s.length,s.sort((c,f)=>{if(f.getCount()===c.getCount()){const h=Math.abs(f.getEstimatedModuleSize()-o),p=Math.abs(c.getEstimatedModuleSize()-o);return h<p?1:h>p?-1:0}else return f.getCount()-c.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Zt.CENTER_QUORUM=2,Zt.MIN_SKIP=3,Zt.MAX_MODULES=57;class Ms{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(V.NEED_RESULT_POINT_CALLBACK);const o=new Zt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),l=r.getBottomLeft(),c=this.calculateModuleSize(s,o,l);if(c<1)throw new q("No pattern found in proccess finder.");const f=Ms.computeDimension(s,o,l,c),h=Ie.getProvisionalVersionForDimension(f),p=h.getDimensionForVersion()-7;let x=null;if(h.getAlignmentPatternCenters().length>0){const k=o.getX()-s.getX()+l.getX(),L=o.getY()-s.getY()+l.getY(),j=1-3/p,G=Math.floor(s.getX()+j*(k-s.getX())),Q=Math.floor(s.getY()+j*(L-s.getY()));for(let ue=4;ue<=16;ue<<=1)try{x=this.findAlignmentInRegion(c,G,Q,ue);break}catch(fe){if(!(fe instanceof q))throw fe}}const w=Ms.createTransform(s,o,l,x,f),A=Ms.sampleGrid(this.image,w,f);let b;return x===null?b=[l,s,o]:b=[l,s,o,x],new Be(A,b)}static createTransform(r,s,o,l,c){const f=c-3.5;let h,p,x,w;return l!==null?(h=l.getX(),p=l.getY(),x=f-3,w=x):(h=s.getX()-r.getX()+o.getX(),p=s.getY()-r.getY()+o.getY(),x=f,w=f),tt.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,x,w,3.5,f,r.getX(),r.getY(),s.getX(),s.getY(),h,p,o.getX(),o.getY())}static sampleGrid(r,s,o){return Dt.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,l){const c=me.round(oe.distance(r,s)/l),f=me.round(oe.distance(r,o)/l);let h=Math.floor((c+f)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new q("Dimensions could be not found.")}return h}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?l/7:isNaN(l)?o/7:(o+l)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,l){let c=this.sizeOfBlackWhiteBlackRun(r,s,o,l),f=1,h=r-(o-r);h<0?(f=r/(r-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let p=Math.floor(s-(l-s)*f);return f=1,p<0?(f=s/(s-p),p=0):p>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),h=Math.floor(r+(h-r)*f),c+=this.sizeOfBlackWhiteBlackRun(r,s,h,p),c-1}sizeOfBlackWhiteBlackRun(r,s,o,l){const c=Math.abs(l-s)>Math.abs(o-r);if(c){let k=r;r=s,s=k,k=o,o=l,l=k}const f=Math.abs(o-r),h=Math.abs(l-s);let p=-f/2;const x=r<o?1:-1,w=s<l?1:-1;let A=0;const b=o+x;for(let k=r,L=s;k!==b;k+=x){const j=c?L:k,G=c?k:L;if(A===1===this.image.get(j,G)){if(A===2)return me.distance(k,L,r,s);A++}if(p+=h,p>0){if(L===l)break;L+=w,p-=f}}return A===2?me.distance(o+x,l,r,s):NaN}findAlignmentInRegion(r,s,o,l){const c=Math.floor(l*r),f=Math.max(0,s-c),h=Math.min(this.image.getWidth()-1,s+c);if(h-f<r*3)throw new q("Alignment top exceeds estimated module size.");const p=Math.max(0,o-c),x=Math.min(this.image.getHeight()-1,o+c);if(x-p<r*3)throw new q("Alignment bottom exceeds estimated module size.");return new $o(this.image,f,p,h-f,x-p,r,this.resultPointCallback).find()}}class qr{constructor(){this.decoder=new Xw}getDecoder(){return this.decoder}decode(r,s){let o,l;if(s!=null&&s.get(V.PURE_BARCODE)!==void 0){const p=qr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(p,s),l=qr.NO_POINTS}else{const p=new Ms(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(p.getBits(),s),l=p.getPoints()}o.getOther()instanceof P0&&o.getOther().applyMirroredCorrection(l);const c=new We(o.getText(),o.getRawBytes(),void 0,l,ve.QR_CODE,void 0),f=o.getByteSegments();f!==null&&c.putMetadata(ze.BYTE_SEGMENTS,f);const h=o.getECLevel();return h!==null&&c.putMetadata(ze.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(c.putMetadata(ze.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(ze.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new q;const l=this.moduleSize(s,r);let c=s[1],f=o[1],h=s[0],p=o[0];if(h>=p||c>=f)throw new q;if(f-c!==p-h&&(p=h+(f-c),p>=r.getWidth()))throw new q;const x=Math.round((p-h+1)/l),w=Math.round((f-c+1)/l);if(x<=0||w<=0)throw new q;if(w!==x)throw new q;const A=Math.floor(l/2);c+=A,h+=A;const b=h+Math.floor((x-1)*l)-p;if(b>0){if(b>A)throw new q;h-=b}const k=c+Math.floor((w-1)*l)-f;if(k>0){if(k>A)throw new q;c-=k}const L=new Ce(x,w);for(let j=0;j<w;j++){const G=c+Math.floor(j*l);for(let Q=0;Q<x;Q++)r.get(h+Math.floor(Q*l),G)&&L.set(Q,j)}return L}static moduleSize(r,s){const o=s.getHeight(),l=s.getWidth();let c=r[0],f=r[1],h=!0,p=0;for(;c<l&&f<o;){if(h!==s.get(c,f)){if(++p===5)break;h=!h}c++,f++}if(c===l||f===o)throw new q;return(c-r[0])/7}}qr.NO_POINTS=new Array;class De{PDF417Common(){}static getBitCountSum(r){return me.sum(r)}static toIntArray(r){if(r==null||!r.length)return De.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const l of r)s[o++]=l;return s}static getCodeword(r){const s=T.binarySearch(De.SYMBOL_TABLE,r&262143);return s<0?-1:(De.CODEWORD_TABLE[s]-1)%De.NUMBER_OF_CODEWORDS}}De.NUMBER_OF_CODEWORDS=929,De.MAX_CODEWORDS_IN_BARCODE=De.NUMBER_OF_CODEWORDS-1,De.MIN_ROWS_IN_BARCODE=3,De.MAX_ROWS_IN_BARCODE=90,De.MODULES_IN_CODEWORD=17,De.MODULES_IN_STOP_PATTERN=18,De.BARS_IN_MODULE=8,De.EMPTY_INT_ARRAY=new Int32Array([]),De.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),De.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Zw{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class qe{static detectMultiple(r,s,o){let l=r.getBlackMatrix(),c=qe.detect(o,l);return c.length||(l=l.clone(),l.rotate180(),c=qe.detect(o,l)),new Zw(l,c)}static detect(r,s){const o=new Array;let l=0,c=0,f=!1;for(;l<s.getHeight();){const h=qe.findVertices(s,l,c);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,c=0;for(const p of o)p[1]!=null&&(l=Math.trunc(Math.max(l,p[1].getY()))),p[3]!=null&&(l=Math.max(l,Math.trunc(p[3].getY())));l+=qe.ROW_STEP;continue}if(f=!0,o.push(h),!r)break;h[2]!=null?(c=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}return o}static findVertices(r,s,o){const l=r.getHeight(),c=r.getWidth(),f=new Array(8);return qe.copyToResult(f,qe.findRowsWithPattern(r,l,c,s,o,qe.START_PATTERN),qe.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),qe.copyToResult(f,qe.findRowsWithPattern(r,l,c,s,o,qe.STOP_PATTERN),qe.INDEXES_STOP_PATTERN),f}static copyToResult(r,s,o){for(let l=0;l<o.length;l++)r[o[l]]=s[l]}static findRowsWithPattern(r,s,o,l,c,f){const h=new Array(4);let p=!1;const x=new Int32Array(f.length);for(;l<s;l+=qe.ROW_STEP){let A=qe.findGuardPattern(r,c,l,o,!1,f,x);if(A!=null){for(;l>0;){const b=qe.findGuardPattern(r,c,--l,o,!1,f,x);if(b!=null)A=b;else{l++;break}}h[0]=new oe(A[0],l),h[1]=new oe(A[1],l),p=!0;break}}let w=l+1;if(p){let A=0,b=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;w<s;w++){const k=qe.findGuardPattern(r,b[0],w,o,!1,f,x);if(k!=null&&Math.abs(b[0]-k[0])<qe.MAX_PATTERN_DRIFT&&Math.abs(b[1]-k[1])<qe.MAX_PATTERN_DRIFT)b=k,A=0;else{if(A>qe.SKIPPED_ROW_COUNT_MAX)break;A++}}w-=A+1,h[2]=new oe(b[0],w),h[3]=new oe(b[1],w)}return w-l<qe.BARCODE_MIN_HEIGHT&&T.fill(h,null),h}static findGuardPattern(r,s,o,l,c,f,h){T.fillWithin(h,0,h.length,0);let p=s,x=0;for(;r.get(p,o)&&p>0&&x++<qe.MAX_PIXEL_DRIFT;)p--;let w=p,A=0,b=f.length;for(let k=c;w<l;w++)if(r.get(w,o)!==k)h[A]++;else{if(A===b-1){if(qe.patternMatchVariance(h,f,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE)return new Int32Array([p,w]);p+=h[0]+h[1],M.arraycopy(h,2,h,0,A-1),h[A-1]=0,h[A]=0,A--}else A++;h[A]=1,k=!k}return A===b-1&&qe.patternMatchVariance(h,f,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE?new Int32Array([p,w-1]):null}static patternMatchVariance(r,s,o){let l=r.length,c=0,f=0;for(let x=0;x<l;x++)c+=r[x],f+=s[x];if(c<f)return 1/0;let h=c/f;o*=h;let p=0;for(let x=0;x<l;x++){let w=r[x],A=s[x]*h,b=w>A?w-A:A-w;if(b>o)return 1/0;p+=b}return p/c}}qe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),qe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),qe.MAX_AVG_VARIANCE=.42,qe.MAX_INDIVIDUAL_VARIANCE=.8,qe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),qe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),qe.MAX_PIXEL_DRIFT=3,qe.MAX_PATTERN_DRIFT=5,qe.SKIPPED_ROW_COUNT_MAX=25,qe.ROW_STEP=5,qe.BARCODE_MIN_HEIGHT=10;class en{constructor(r,s){if(s.length===0)throw new v;this.field=r;let o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-l),M.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let s=this.coefficients[0],o=this.coefficients.length;for(let l=1;l<o;l++)s=this.field.add(this.field.multiply(r,s),this.coefficients[l]);return s}add(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let f=s;s=o,o=f}let l=new Int32Array(o.length),c=o.length-s.length;M.arraycopy(o,0,l,0,c);for(let f=c;f<o.length;f++)l[f]=this.field.add(s[f-c],o[f]);return new en(this.field,l)}subtract(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof en?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new en(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,l=r.coefficients,c=l.length,f=new Int32Array(o+c-1);for(let h=0;h<o;h++){let p=s[h];for(let x=0;x<c;x++)f[h+x]=this.field.add(f[h+x],this.field.multiply(p,l[x]))}return new en(this.field,f)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new en(this.field,s)}multiplyScalar(r){if(r===0)return new en(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.multiply(this.coefficients[l],r);return new en(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return new en(this.field,new Int32Array([0]));let o=this.coefficients.length,l=new Int32Array(o+r);for(let c=0;c<o;c++)l[c]=this.field.multiply(this.coefficients[c],s);return new en(this.field,l)}toString(){let r=new J;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class Qw{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}inverse(r){if(r===0)throw new B;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class oc extends Qw{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let l=0;l<r;l++)this.expTable[l]=o,o=o*s%r;for(let l=0;l<r-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new en(this,o)}}oc.PDF417_GF=new oc(De.NUMBER_OF_CODEWORDS,3);class D0{constructor(){this.field=oc.PDF417_GF}decode(r,s,o){let l=new en(this.field,r),c=new Int32Array(s),f=!1;for(let L=s;L>0;L--){let j=l.evaluateAt(this.field.exp(L));c[s-L]=j,j!==0&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(o!=null)for(const L of o){let j=this.field.exp(r.length-1-L),G=new en(this.field,new Int32Array([this.field.subtract(0,j),1]));h=h.multiply(G)}let p=new en(this.field,c),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),w=x[0],A=x[1],b=this.findErrorLocations(w),k=this.findErrorMagnitudes(A,w,b);for(let L=0;L<b.length;L++){let j=r.length-1-this.field.log(b[L]);if(j<0)throw N.getChecksumInstance();r[j]=this.field.subtract(r[j],k[L])}return b.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let b=r;r=s,s=b}let l=r,c=s,f=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let b=l,k=f;if(l=c,f=h,l.isZero())throw N.getChecksumInstance();c=b;let L=this.field.getZero(),j=l.getCoefficient(l.getDegree()),G=this.field.inverse(j);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let Q=c.getDegree()-l.getDegree(),ue=this.field.multiply(c.getCoefficient(c.getDegree()),G);L=L.add(this.field.buildMonomial(Q,ue)),c=c.subtract(l.multiplyByMonomial(Q,ue))}h=L.multiply(f).subtract(k).negative()}let p=h.getCoefficient(0);if(p===0)throw N.getChecksumInstance();let x=this.field.inverse(p),w=h.multiply(x),A=c.multiply(x);return[w,A]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),l=0;for(let c=1;c<this.field.getSize()&&l<s;c++)r.evaluateAt(c)===0&&(o[l]=this.field.inverse(c),l++);if(l!==s)throw N.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let l=s.getDegree(),c=new Int32Array(l);for(let x=1;x<=l;x++)c[l-x]=this.field.multiply(x,s.getCoefficient(x));let f=new en(this.field,c),h=o.length,p=new Int32Array(h);for(let x=0;x<h;x++){let w=this.field.inverse(o[x]),A=this.field.subtract(0,r.evaluateAt(w)),b=this.field.inverse(f.evaluateAt(w));p[x]=this.field.multiply(A,b)}return p}}class vi{constructor(r,s,o,l,c){r instanceof vi?this.constructor_2(r):this.constructor_1(r,s,o,l,c)}constructor_1(r,s,o,l,c){const f=s==null||o==null,h=l==null||c==null;if(f&&h)throw new q;f?(s=new oe(0,l.getY()),o=new oe(0,c.getY())):h&&(l=new oe(r.getWidth()-1,s.getY()),c=new oe(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(s.getY(),l.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new vi(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let l=this.topLeft,c=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(r>0){let p=o?this.topLeft:this.topRight,x=Math.trunc(p.getY()-r);x<0&&(x=0);let w=new oe(p.getX(),x);o?l=w:f=w}if(s>0){let p=o?this.bottomLeft:this.bottomRight,x=Math.trunc(p.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let w=new oe(p.getX(),x);o?c=w:h=w}return new vi(this.image,l,c,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class $w{constructor(r,s,o,l){this.columnCount=r,this.errorCorrectionLevel=l,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ls{constructor(){this.buffer=""}static form(r,s){let o=-1;function l(f,h,p,x,w,A){if(f==="%%")return"%";if(s[++o]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let b=w?parseInt(w.substr(1)):void 0,k;switch(A){case"s":k=s[o];break;case"c":k=s[o][0];break;case"f":k=parseFloat(s[o]).toFixed(f);break;case"p":k=parseFloat(s[o]).toPrecision(f);break;case"e":k=parseFloat(s[o]).toExponential(f);break;case"x":k=parseInt(s[o]).toString(b||16);break;case"d":k=parseFloat(parseInt(s[o],b||10).toPrecision(f)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(b);let L=parseInt(p),j=p&&p[0]+""=="0"?"0":" ";for(;k.length<L;)k=h!==void 0?k+j:j+k;return k}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,l)}format(r,...s){this.buffer+=Ls.form(r,s)}toString(){return this.buffer}}class Bs{constructor(r){this.boundingBox=new vi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<Bs.MAX_NEARBY_DISTANCE;o++){let l=this.imageRowToCodewordIndex(r)-o;if(l>=0&&(s=this.codewords[l],s!=null)||(l=this.imageRowToCodewordIndex(r)+o,l<this.codewords.length&&(s=this.codewords[l],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Ls;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}Bs.MAX_NEARBY_DISTANCE=5;class Fs{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,l]of this.values.entries()){const c={getKey:()=>o,getValue:()=>l};c.getValue()>r?(r=c.getValue(),s=[],s.push(c.getKey())):c.getValue()===r&&s.push(c.getKey())}return De.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class M0 extends Bs{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=-1,x=1,w=0;for(let A=f;A<h;A++){if(s[A]==null)continue;let b=s[A],k=b.getRowNumber()-p;if(k===0)w++;else if(k===1)x=Math.max(x,w),w=1,p=b.getRowNumber();else if(k<0||b.getRowNumber()>=r.getRowCount()||k>A)s[A]=null;else{let L;x>2?L=(x-2)*k:L=k;let j=L>=A;for(let G=1;G<=L&&!j;G++)j=s[A-G]!=null;j?s[A]=null:(p=b.getRowNumber(),w=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let l=o.getRowNumber();if(l>=s.length)continue;s[l]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),p=-1;for(let x=c;x<f;x++){if(h[x]==null)continue;let w=h[x];w.setRowNumberAsRowIndicatorColumn();let A=w.getRowNumber()-p;A===0||(A===1?p=w.getRowNumber():w.getRowNumber()>=r.getRowCount()?h[x]=null:p=w.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new Fs,o=new Fs,l=new Fs,c=new Fs;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let p=h.getValue()%30,x=h.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(p*3+1);break;case 1:c.setValue(p/3),l.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<De.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>De.MAX_ROWS_IN_BARCODE)return null;let f=new $w(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(r,f),f}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let l=r[o];if(r[o]==null)continue;let c=l.getValue()%30,f=l.getRowNumber();if(f>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(c/3)!==s.getErrorCorrectionLevel()||c%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:c+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class js{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=De.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let l=0;l<o.length;l++)o[l]!=null&&(o[l].hasValidRowNumber()||this.adjustRowNumbers(s,l,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[o];c!=null&&(c.setRowNumber(r[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(c=js.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(c=js.adjustRowNumberIfValid(l,c,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let l=o[s],c=this.detectionResultColumns[r-1].getCodewords(),f=c;this.detectionResultColumns[r+1]!=null&&(f=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=c[s],h[3]=f[s],s>0&&(h[0]=o[s-1],h[4]=c[s-1],h[5]=f[s-1]),s>1&&(h[8]=o[s-2],h[10]=c[s-2],h[11]=f[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=c[s+1],h[7]=f[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=c[s+2],h[13]=f[s+2]);for(let p of h)if(js.adjustRowNumber(l,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Ls;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){s.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[o];if(c==null){s.format("    |   ");continue}s.format(" %3d|%3d",c.getRowNumber(),c.getValue())}s.format("%n")}return s.toString()}}class Us{constructor(r,s,o,l){this.rowNumber=Us.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Us.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Us.BARCODE_ROW_UNKNOWN=-1;class Tn{static initialize(){for(let r=0;r<De.SYMBOL_TABLE.length;r++){let s=De.SYMBOL_TABLE[r],o=s&1;for(let l=0;l<De.BARS_IN_MODULE;l++){let c=0;for(;(s&1)===o;)c+=1,s>>=1;o=s&1,Tn.RATIOS_TABLE[r]||(Tn.RATIOS_TABLE[r]=new Array(De.BARS_IN_MODULE)),Tn.RATIOS_TABLE[r][De.BARS_IN_MODULE-l-1]=Math.fround(c/De.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Tn.getDecodedCodewordValue(Tn.sampleBitCounts(r));return s!==-1?s:Tn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=me.sum(r),o=new Int32Array(De.BARS_IN_MODULE),l=0,c=0;for(let f=0;f<De.MODULES_IN_CODEWORD;f++){let h=s/(2*De.MODULES_IN_CODEWORD)+f*s/De.MODULES_IN_CODEWORD;c+r[l]<=h&&(c+=r[l],l++),o[l]++}return o}static getDecodedCodewordValue(r){let s=Tn.getBitValue(r);return De.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let l=0;l<r[o];l++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=me.sum(r),o=new Array(De.BARS_IN_MODULE);if(s>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(r[f]/s);let l=Ye.MAX_VALUE,c=-1;this.bSymbolTableReady||Tn.initialize();for(let f=0;f<Tn.RATIOS_TABLE.length;f++){let h=0,p=Tn.RATIOS_TABLE[f];for(let x=0;x<De.BARS_IN_MODULE;x++){let w=Math.fround(p[x]-o[x]);if(h+=Math.fround(w*w),h>=l)break}h<l&&(l=h,c=De.SYMBOL_TABLE[f])}return c}}Tn.bSymbolTableReady=!1,Tn.RATIOS_TABLE=new Array(De.SYMBOL_TABLE.length).map(E=>new Array(De.BARS_IN_MODULE));class L0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class B0{static parseLong(r,s=void 0){return parseInt(r,s)}}class F0 extends m{}F0.kind="NullPointerException";class Jw{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new F0;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new z;if(o===0)return;for(let l=0;l<o;l++)this.write(r[s+l])}flush(){}close(){}}class e3 extends m{}class t3 extends Jw{constructor(r=32){if(super(),this.count=0,r<0)throw new v("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new e3;o=R.MAX_VALUE}this.buf=T.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new z;this.ensureCapacity(this.count+o),M.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return T.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ut;(function(E){E[E.ALPHA=0]="ALPHA",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.PUNCT=3]="PUNCT",E[E.ALPHA_SHIFT=4]="ALPHA_SHIFT",E[E.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ut||(ut={}));function j0(){if(typeof window<"u")return window.BigInt||null;if(typeof vr<"u")return vr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Jo;function Gr(E){if(typeof Jo>"u"&&(Jo=j0()),Jo===null)throw new Error("BigInt is not supported!");return Jo(E)}function n3(){let E=[];E[0]=Gr(1);let r=Gr(900);E[1]=r;for(let s=2;s<16;s++)E[s]=E[s-1]*r;return E}class Z{static decode(r,s){let o=new J(""),l=H.ISO8859_1;o.enableDecoding(l);let c=1,f=r[c++],h=new L0;for(;c<r[0];){switch(f){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(r,c,o);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(f,r,l,c,o);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(r,c,o);break;case Z.ECI_CHARSET:H.getCharacterSetECIByValue(r[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(r,c,h);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new F;default:c--,c=Z.textCompaction(r,c,o);break}if(c<r.length)f=r[c++];else throw F.getFormatInstance()}if(o.length()===0)throw F.getFormatInstance();let p=new En(null,o.toString(),null,s);return p.setOther(h),p}static decodeMacroBlock(r,s,o){if(s+Z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let l=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<Z.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)l[h]=r[s];o.setSegmentIndex(R.parseInt(Z.decodeBase900toBase10(l,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new J;s=Z.textCompaction(r,s,c),o.setFileId(c.toString());let f=-1;for(r[s]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<r[0];)switch(r[s]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new J;s=Z.textCompaction(r,s+1,h),o.setFileName(h.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new J;s=Z.textCompaction(r,s+1,p),o.setSender(p.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new J;s=Z.textCompaction(r,s+1,x),o.setAddressee(x.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new J;s=Z.numericCompaction(r,s+1,w),o.setSegmentCount(R.parseInt(w.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new J;s=Z.numericCompaction(r,s+1,A),o.setTimestamp(B0.parseLong(A.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new J;s=Z.numericCompaction(r,s+1,b),o.setChecksum(R.parseInt(b.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let k=new J;s=Z.numericCompaction(r,s+1,k),o.setFileSize(B0.parseLong(k.toString()));break;default:throw F.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(f!==-1){let h=s-f;o.isLastSegment()&&h--,o.setOptionalData(T.copyOfRange(r,f,f+h))}return s}static textCompaction(r,s,o){let l=new Int32Array((r[0]-s)*2),c=new Int32Array((r[0]-s)*2),f=0,h=!1;for(;s<r[0]&&!h;){let p=r[s++];if(p<Z.TEXT_COMPACTION_MODE_LATCH)l[f]=p/30,l[f+1]=p%30,f+=2;else switch(p){case Z.TEXT_COMPACTION_MODE_LATCH:l[f++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[f]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],c[f]=p,f++;break}}return Z.decodeTextCompaction(l,c,f,o),s}static decodeTextCompaction(r,s,o,l){let c=ut.ALPHA,f=ut.ALPHA,h=0;for(;h<o;){let p=r[h],x="";switch(c){case ut.ALPHA:if(p<26)x=String.fromCharCode(65+p);else switch(p){case 26:x=" ";break;case Z.LL:c=ut.LOWER;break;case Z.ML:c=ut.MIXED;break;case Z.PS:f=c,c=ut.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break;case ut.LOWER:if(p<26)x=String.fromCharCode(97+p);else switch(p){case 26:x=" ";break;case Z.AS:f=c,c=ut.ALPHA_SHIFT;break;case Z.ML:c=ut.MIXED;break;case Z.PS:f=c,c=ut.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break;case ut.MIXED:if(p<Z.PL)x=Z.MIXED_CHARS[p];else switch(p){case Z.PL:c=ut.PUNCT;break;case 26:x=" ";break;case Z.LL:c=ut.LOWER;break;case Z.AL:c=ut.ALPHA;break;case Z.PS:f=c,c=ut.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break;case ut.PUNCT:if(p<Z.PAL)x=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=ut.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break;case ut.ALPHA_SHIFT:if(c=f,p<26)x=String.fromCharCode(65+p);else switch(p){case 26:x=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break;case ut.PUNCT_SHIFT:if(c=f,p<Z.PAL)x=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=ut.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=ut.ALPHA;break}break}x!==""&&l.append(x),h++}}static byteCompaction(r,s,o,l,c){let f=new t3,h=0,p=0,x=!1;switch(r){case Z.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),A=s[l++];for(;l<s[0]&&!x;)switch(w[h++]=A,p=900*p+A,A=s[l++],A){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:l--,x=!0;break;default:if(h%5===0&&h>0){for(let b=0;b<6;++b)f.write(Number(Gr(p)>>Gr(8*(5-b))));p=0,h=0}break}l===s[0]&&A<Z.TEXT_COMPACTION_MODE_LATCH&&(w[h++]=A);for(let b=0;b<h;b++)f.write(w[b]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;l<s[0]&&!x;){let b=s[l++];if(b<Z.TEXT_COMPACTION_MODE_LATCH)h++,p=900*p+b;else switch(b){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:l--,x=!0;break}if(h%5===0&&h>0){for(let k=0;k<6;++k)f.write(Number(Gr(p)>>Gr(8*(5-k))));p=0,h=0}}break}return c.append(ye.decode(f.toByteArray(),o)),l}static numericCompaction(r,s,o){let l=0,c=!1,f=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!c;){let h=r[s++];if(s===r[0]&&(c=!0),h<Z.TEXT_COMPACTION_MODE_LATCH)f[l]=h,l++;else switch(h){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,c=!0;break}(l%Z.MAX_NUMERIC_CODEWORDS===0||h===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(o.append(Z.decodeBase900toBase10(f,l)),l=0)}return s}static decodeBase900toBase10(r,s){let o=Gr(0);for(let c=0;c<s;c++)o+=Z.EXP900[s-c-1]*Gr(r[c]);let l=o.toString();if(l.charAt(0)!=="1")throw new F;return l.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=j0()?n3():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ge{constructor(){}static decode(r,s,o,l,c,f,h){let p=new vi(r,s,o,l,c),x=null,w=null,A;for(let L=!0;;L=!1){if(s!=null&&(x=Ge.getRowIndicatorColumn(r,p,s,!0,f,h)),l!=null&&(w=Ge.getRowIndicatorColumn(r,p,l,!1,f,h)),A=Ge.merge(x,w),A==null)throw q.getNotFoundInstance();let j=A.getBoundingBox();if(L&&j!=null&&(j.getMinY()<p.getMinY()||j.getMaxY()>p.getMaxY()))p=j;else break}A.setBoundingBox(p);let b=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,x),A.setDetectionResultColumn(b,w);let k=x!=null;for(let L=1;L<=b;L++){let j=k?L:b-L;if(A.getDetectionResultColumn(j)!==void 0)continue;let G;j===0||j===b?G=new M0(p,j===0):G=new Bs(p),A.setDetectionResultColumn(j,G);let Q=-1,ue=Q;for(let fe=p.getMinY();fe<=p.getMaxY();fe++){if(Q=Ge.getStartColumn(A,j,fe,k),Q<0||Q>p.getMaxX()){if(ue===-1)continue;Q=ue}let le=Ge.detectCodeword(r,p.getMinX(),p.getMaxX(),k,Q,fe,f,h);le!=null&&(G.setCodeword(fe,le),ue=Q,f=Math.min(f,le.getWidth()),h=Math.max(h,le.getWidth()))}}return Ge.createDecoderResult(A)}static merge(r,s){if(r==null&&s==null)return null;let o=Ge.getBarcodeMetadata(r,s);if(o==null)return null;let l=vi.merge(Ge.adjustBoundingBox(r),Ge.adjustBoundingBox(s));return new js(o,l)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=Ge.getMax(s),l=0;for(let h of s)if(l+=o-h,h>0)break;let c=r.getCodewords();for(let h=0;l>0&&c[h]==null;h++)l--;let f=0;for(let h=s.length-1;h>=0&&(f+=o-s[h],!(s[h]>0));h--);for(let h=c.length-1;f>0&&c[h]==null;h--)f--;return r.getBoundingBox().addMissingRows(l,f,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let l;return s==null||(l=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==l.getColumnCount()&&o.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&o.getRowCount()!==l.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,l,c,f){let h=new M0(s,l);for(let p=0;p<2;p++){let x=p===0?1:-1,w=Math.trunc(Math.trunc(o.getX()));for(let A=Math.trunc(Math.trunc(o.getY()));A<=s.getMaxY()&&A>=s.getMinY();A+=x){let b=Ge.detectCodeword(r,0,r.getWidth(),l,w,A,c,f);b!=null&&(h.setCodeword(A,b),l?w=b.getStartX():w=b.getEndX())}}return h}static adjustCodewordCount(r,s){let o=s[0][1],l=o.getValue(),c=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ge.getNumberOfECCodeWords(r.getBarcodeECLevel());if(l.length===0){if(c<1||c>De.MAX_CODEWORDS_IN_BARCODE)throw q.getNotFoundInstance();o.setValue(c)}else l[0]!==c&&o.setValue(c)}static createDecoderResult(r){let s=Ge.createBarcodeMatrix(r);Ge.adjustCodewordCount(r,s);let o=new Array,l=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),c=[],f=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let x=0;x<r.getBarcodeColumnCount();x++){let w=s[p][x+1].getValue(),A=p*r.getBarcodeColumnCount()+x;w.length===0?o.push(A):w.length===1?l[A]=w[0]:(f.push(A),c.push(w))}let h=new Array(c.length);for(let p=0;p<h.length;p++)h[p]=c[p];return Ge.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),l,De.toIntArray(o),De.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(r,s,o,l,c){let f=new Int32Array(l.length),h=100;for(;h-- >0;){for(let p=0;p<f.length;p++)s[l[p]]=c[p][f[p]];try{return Ge.decodeCodewords(s,r,o)}catch(p){if(!(p instanceof N))throw p}if(f.length===0)throw N.getChecksumInstance();for(let p=0;p<f.length;p++)if(f[p]<c[p].length-1){f[p]++;break}else if(f[p]=0,p===f.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let l=0;l<s.length;l++)for(let c=0;c<s[l].length;c++)s[l][c]=new Fs;let o=0;for(let l of r.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][o].setValue(c.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,l){let c=l?1:-1,f=null;if(Ge.isValidBarcodeColumn(r,s-c)&&(f=r.getDetectionResultColumn(s-c).getCodeword(o)),f!=null)return l?f.getEndX():f.getStartX();if(f=r.getDetectionResultColumn(s).getCodewordNearby(o),f!=null)return l?f.getStartX():f.getEndX();if(Ge.isValidBarcodeColumn(r,s-c)&&(f=r.getDetectionResultColumn(s-c).getCodewordNearby(o)),f!=null)return l?f.getEndX():f.getStartX();let h=0;for(;Ge.isValidBarcodeColumn(r,s-c);){s-=c;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(l?p.getEndX():p.getStartX())+c*h*(p.getEndX()-p.getStartX());h++}return l?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,l,c,f,h,p){c=Ge.adjustCodewordStartColumn(r,s,o,l,c,f);let x=Ge.getModuleBitCount(r,s,o,l,c,f);if(x==null)return null;let w,A=me.sum(x);if(l)w=c+A;else{for(let L=0;L<x.length/2;L++){let j=x[L];x[L]=x[x.length-1-L],x[x.length-1-L]=j}w=c,c=w-A}if(!Ge.checkCodewordSkew(A,h,p))return null;let b=Tn.getDecodedValue(x),k=De.getCodeword(b);return k===-1?null:new Us(c,w,Ge.getCodewordBucketNumber(b),k)}static getModuleBitCount(r,s,o,l,c,f){let h=c,p=new Int32Array(8),x=0,w=l?1:-1,A=l;for(;(l?h<o:h>=s)&&x<p.length;)r.get(h,f)===A?(p[x]++,h+=w):(x++,A=!A);return x===p.length||h===(l?o:s)&&x===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,l,c,f){let h=c,p=l?-1:1;for(let x=0;x<2;x++){for(;(l?h>=s:h<o)&&l===r.get(h,f);){if(Math.abs(c-h)>Ge.CODEWORD_SKEW_SIZE)return c;h+=p}p=-p,l=!l}return h}static checkCodewordSkew(r,s,o){return s-Ge.CODEWORD_SKEW_SIZE<=r&&r<=o+Ge.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw F.getFormatInstance();let l=1<<s+1,c=Ge.correctErrors(r,o,l);Ge.verifyCodewordCount(r,l);let f=Z.decode(r,""+s);return f.setErrorsCorrected(c),f.setErasures(o.length),f}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+Ge.MAX_ERRORS||o<0||o>Ge.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Ge.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw F.getFormatInstance();let o=r[0];if(o>r.length)throw F.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,l=s.length-1;for(;!((r&1)!==o&&(o=r&1,l--,l<0));)s[l]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ge.getCodewordBucketNumber(Ge.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Ls;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let l=0;l<r[o].length;l++){let c=r[o][l];c.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}s.format("%n")}return s.toString()}}Ge.CODEWORD_SKEW_SIZE=2,Ge.MAX_ERRORS=3,Ge.MAX_EC_CODEWORDS=512,Ge.errorCorrection=new D0;class tn{decode(r,s=null){let o=tn.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw q.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return tn.decode(r,s,!0)}catch(o){throw o instanceof F||o instanceof N?q.getNotFoundInstance():o}}static decode(r,s,o){const l=new Array,c=qe.detectMultiple(r,s,o);for(const f of c.getPoints()){const h=Ge.decode(c.getBits(),f[4],f[5],f[6],f[7],tn.getMinCodewordWidth(f),tn.getMaxCodewordWidth(f)),p=new We(h.getText(),h.getRawBytes(),void 0,f,ve.PDF_417);p.putMetadata(ze.ERROR_CORRECTION_LEVEL,h.getECLevel());const x=h.getOther();x!=null&&p.putMetadata(ze.PDF417_EXTRA_METADATA,x),l.push(p)}return l.map(f=>f)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?R.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(tn.getMaxWidth(r[0],r[4]),tn.getMaxWidth(r[6],r[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.max(tn.getMaxWidth(r[1],r[5]),tn.getMaxWidth(r[7],r[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(tn.getMinWidth(r[0],r[4]),tn.getMinWidth(r[6],r[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.min(tn.getMinWidth(r[1],r[5]),tn.getMinWidth(r[7],r[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}reset(){}}class ea extends m{}ea.kind="ReaderException";class U0{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(V.TRY_HARDER)===!0,o=i(r)?null:r.get(V.POSSIBLE_FORMATS),l=new Array;if(!i(o)){const c=o.some(f=>f===ve.UPC_A||f===ve.UPC_E||f===ve.EAN_13||f===ve.EAN_8||f===ve.CODABAR||f===ve.CODE_39||f===ve.CODE_93||f===ve.CODE_128||f===ve.ITF||f===ve.RSS_14||f===ve.RSS_EXPANDED);c&&!s&&l.push(new Xi(r,this.verbose)),o.includes(ve.QR_CODE)&&l.push(new qr),o.includes(ve.DATA_MATRIX)&&l.push(new Vr),o.includes(ve.AZTEC)&&l.push(new mn),o.includes(ve.PDF_417)&&l.push(new tn),c&&s&&l.push(new Xi(r,this.verbose))}l.length===0&&(s||l.push(new Xi(r,this.verbose)),l.push(new qr),l.push(new Vr),l.push(new mn),l.push(new tn),s&&l.push(new Xi(r,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new ea("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof ea)continue}throw new q("No MultiFormat Readers were able to detect the code.")}}class r3 extends ft{constructor(r=null,s=500){const o=new U0;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class i3 extends ft{constructor(r=500){super(new tn,r)}}class s3 extends ft{constructor(r=500){super(new qr,r)}}var ac;(function(E){E[E.ERROR_CORRECTION=0]="ERROR_CORRECTION",E[E.CHARACTER_SET=1]="CHARACTER_SET",E[E.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",E[E.MIN_SIZE=3]="MIN_SIZE",E[E.MAX_SIZE=4]="MAX_SIZE",E[E.MARGIN=5]="MARGIN",E[E.PDF417_COMPACT=6]="PDF417_COMPACT",E[E.PDF417_COMPACTION=7]="PDF417_COMPACTION",E[E.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",E[E.AZTEC_LAYERS=9]="AZTEC_LAYERS",E[E.QR_VERSION=10]="QR_VERSION"})(ac||(ac={}));var Gt=ac;class lc{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Y(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const l=this.field;for(let c=s.length;c<=r;c++){const f=o.multiply(new Y(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));s.push(f),o=f}}return s[r]}encode(r,s){if(s===0)throw new v("No error correction bytes");const o=r.length-s;if(o<=0)throw new v("No data bytes provided");const l=this.buildGenerator(s),c=new Int32Array(o);M.arraycopy(r,0,c,0,o);let f=new Y(this.field,c);f=f.multiplyByMonomial(s,1);const p=f.divide(l)[1].getCoefficients(),x=s-p.length;for(let w=0;w<x;w++)r[o+w]=0;M.arraycopy(p,0,r,o+x,p.length)}}class Nt{constructor(){}static applyMaskPenaltyRule1(r){return Nt.applyMaskPenaltyRule1Internal(r,!0)+Nt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let f=0;f<c-1;f++){const h=o[f];for(let p=0;p<l-1;p++){const x=h[p];x===h[p+1]&&x===o[f+1][p]&&x===o[f+1][p+1]&&s++}}return Nt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let f=0;f<c;f++)for(let h=0;h<l;h++){const p=o[f];h+6<l&&p[h]===1&&p[h+1]===0&&p[h+2]===1&&p[h+3]===1&&p[h+4]===1&&p[h+5]===0&&p[h+6]===1&&(Nt.isWhiteHorizontal(p,h-4,h)||Nt.isWhiteHorizontal(p,h+7,h+11))&&s++,f+6<c&&o[f][h]===1&&o[f+1][h]===0&&o[f+2][h]===1&&o[f+3][h]===1&&o[f+4][h]===1&&o[f+5][h]===0&&o[f+6][h]===1&&(Nt.isWhiteVertical(o,h,f-4,f)||Nt.isWhiteVertical(o,h,f+7,f+11))&&s++}return s*Nt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let l=s;l<o;l++)if(r[l]===1)return!1;return!0}static isWhiteVertical(r,s,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let c=o;c<l;c++)if(r[c][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let p=0;p<c;p++){const x=o[p];for(let w=0;w<l;w++)x[w]===1&&s++}const f=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*Nt.N4}static getDataMaskBit(r,s,o){let l,c;switch(r){case 0:l=o+s&1;break;case 1:l=o&1;break;case 2:l=s%3;break;case 3:l=(o+s)%3;break;case 4:l=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:c=o*s,l=(c&1)+c%3;break;case 6:c=o*s,l=(c&1)+c%3&1;break;case 7:c=o*s,l=c%3+(o+s&1)&1;break;default:throw new v("Invalid mask pattern: "+r)}return l===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const l=s?r.getHeight():r.getWidth(),c=s?r.getWidth():r.getHeight(),f=r.getArray();for(let h=0;h<l;h++){let p=0,x=-1;for(let w=0;w<c;w++){const A=s?f[h][w]:f[w][h];A===x?p++:(p>=5&&(o+=Nt.N1+(p-5)),p=1,x=A)}p>=5&&(o+=Nt.N1+(p-5))}return o}}Nt.N1=3,Nt.N2=3,Nt.N3=40,Nt.N4=10;class ta{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let l=0;l!==s;l++)o[l]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)T.fill(s,r)}equals(r){if(!(r instanceof ta))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,l=this.height;o<l;++o){const c=this.bytes[o],f=s.bytes[o];for(let h=0,p=this.width;h<p;++h)if(c[h]!==f[h])return!1}return!0}toString(){const r=new J;for(let s=0,o=this.height;s<o;++s){const l=this.bytes[s];for(let c=0,f=this.width;c<f;++c)switch(l[c]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class wi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new J;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<wi.NUM_MASK_PATTERNS}}wi.NUM_MASK_PATTERNS=8;class ht extends m{}ht.kind="WriterException";class ke{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,l,c){ke.clearMatrix(c),ke.embedBasicPatterns(o,c),ke.embedTypeInfo(s,l,c),ke.maybeEmbedVersionInfo(o,c),ke.embedDataBits(r,l,c)}static embedBasicPatterns(r,s){ke.embedPositionDetectionPatternsAndSeparators(s),ke.embedDarkDotAtLeftBottomCorner(s),ke.maybeEmbedPositionAdjustmentPatterns(r,s),ke.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const l=new P;ke.makeTypeInfoBits(r,s,l);for(let c=0,f=l.getSize();c<f;++c){const h=l.get(l.getSize()-1-c),p=ke.TYPE_INFO_COORDINATES[c],x=p[0],w=p[1];if(o.setBoolean(x,w,h),c<8){const A=o.getWidth()-c-1;o.setBoolean(A,8,h)}else{const b=o.getHeight()-7+(c-8);o.setBoolean(8,b,h)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new P;ke.makeVersionInfoBits(r,o);let l=6*3-1;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const h=o.get(l);l--,s.setBoolean(c,s.getHeight()-11+f,h),s.setBoolean(s.getHeight()-11+f,c,h)}}static embedDataBits(r,s,o){let l=0,c=-1,f=o.getWidth()-1,h=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);h>=0&&h<o.getHeight();){for(let p=0;p<2;++p){const x=f-p;if(!ke.isEmpty(o.get(x,h)))continue;let w;l<r.getSize()?(w=r.get(l),++l):w=!1,s!==255&&Nt.getDataMaskBit(s,x,h)&&(w=!w),o.setBoolean(x,h,w)}h+=c}c=-c,h+=c,f-=2}if(l!==r.getSize())throw new ht("Not all bits consumed: "+l+"/"+r.getSize())}static findMSBSet(r){return 32-R.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new v("0 polynomial");const o=ke.findMSBSet(s);for(r<<=o-1;ke.findMSBSet(r)>=o;)r^=s<<ke.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!wi.isValidMaskPattern(s))throw new ht("Invalid mask pattern");const l=r.getBits()<<3|s;o.appendBits(l,5);const c=ke.calculateBCHCode(l,ke.TYPE_INFO_POLY);o.appendBits(c,10);const f=new P;if(f.appendBits(ke.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new ht("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=ke.calculateBCHCode(r.getVersionNumber(),ke.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new ht("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;ke.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),ke.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ht;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let l=0;l<8;++l){if(!ke.isEmpty(o.get(r+l,s)))throw new ht;o.setNumber(r+l,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let l=0;l<7;++l){if(!ke.isEmpty(o.get(r,s+l)))throw new ht;o.setNumber(r,s+l,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let l=0;l<5;++l){const c=ke.POSITION_ADJUSTMENT_PATTERN[l];for(let f=0;f<5;++f)o.setNumber(r+f,s+l,c[f])}}static embedPositionDetectionPattern(r,s,o){for(let l=0;l<7;++l){const c=ke.POSITION_DETECTION_PATTERN[l];for(let f=0;f<7;++f)o.setNumber(r+f,s+l,c[f])}}static embedPositionDetectionPatternsAndSeparators(r){const s=ke.POSITION_DETECTION_PATTERN[0].length;ke.embedPositionDetectionPattern(0,0,r),ke.embedPositionDetectionPattern(r.getWidth()-s,0,r),ke.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;ke.embedHorizontalSeparationPattern(0,o-1,r),ke.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),ke.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const l=7;ke.embedVerticalSeparationPattern(l,0,r),ke.embedVerticalSeparationPattern(r.getHeight()-l-1,0,r),ke.embedVerticalSeparationPattern(l,r.getHeight()-l,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,l=ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,f=l.length;c!==f;c++){const h=l[c];if(h>=0)for(let p=0;p!==f;p++){const x=l[p];x>=0&&ke.isEmpty(s.get(x,h))&&ke.embedPositionAdjustmentPattern(x-2,h-2,s)}}}}ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ke.VERSION_INFO_POLY=7973,ke.TYPE_INFO_POLY=1335,ke.TYPE_INFO_MASK_PATTERN=21522;class o3{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xt{constructor(){}static calculateMaskPenalty(r){return Nt.applyMaskPenaltyRule1(r)+Nt.applyMaskPenaltyRule2(r)+Nt.applyMaskPenaltyRule3(r)+Nt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let l=xt.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Gt.CHARACTER_SET)!==void 0;c&&(l=o.get(Gt.CHARACTER_SET).toString());const f=this.chooseMode(r,l),h=new P;if(f===Oe.BYTE&&(c||xt.DEFAULT_BYTE_MODE_ENCODING!==l)){const fe=H.getCharacterSetECIByName(l);fe!==void 0&&this.appendECI(fe,h)}this.appendModeInfo(f,h);const p=new P;this.appendBytes(r,f,p,l);let x;if(o!==null&&o.get(Gt.QR_VERSION)!==void 0){const fe=Number.parseInt(o.get(Gt.QR_VERSION).toString(),10);x=Ie.getVersionForNumber(fe);const le=this.calculateBitsNeeded(f,h,p,x);if(!this.willFit(le,x,s))throw new ht("Data too big for requested version")}else x=this.recommendVersion(s,f,h,p);const w=new P;w.appendBitArray(h);const A=f===Oe.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(A,x,f,w),w.appendBitArray(p);const b=x.getECBlocksForLevel(s),k=x.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(k,w);const L=this.interleaveWithECBytes(w,x.getTotalCodewords(),k,b.getNumBlocks()),j=new wi;j.setECLevel(s),j.setMode(f),j.setVersion(x);const G=x.getDimensionForVersion(),Q=new ta(G,G),ue=this.chooseMaskPattern(L,s,x,Q);return j.setMaskPattern(ue),ke.buildMatrix(L,s,x,ue,Q),j.setMatrix(Q),j}static recommendVersion(r,s,o,l){const c=this.calculateBitsNeeded(s,o,l,Ie.getVersionForNumber(1)),f=this.chooseVersion(c,r),h=this.calculateBitsNeeded(s,o,l,f);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,s,o,l){return s.getSize()+r.getCharacterCountBits(l)+o.getSize()}static getAlphanumericCode(r){return r<xt.ALPHANUMERIC_TABLE.length?xt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(H.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Oe.KANJI;let o=!1,l=!1;for(let c=0,f=r.length;c<f;++c){const h=r.charAt(c);if(xt.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)l=!0;else return Oe.BYTE}return l?Oe.ALPHANUMERIC:o?Oe.NUMERIC:Oe.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=ye.encode(r,H.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let l=0;l<o;l+=2){const c=s[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(r,s,o,l){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<wi.NUM_MASK_PATTERNS;h++){ke.buildMatrix(r,s,o,h,l);let p=this.calculateMaskPenalty(l);p<c&&(c=p,f=h)}return f}static chooseVersion(r,s){for(let o=1;o<=40;o++){const l=Ie.getVersionForNumber(o);if(xt.willFit(r,l,s))return l}throw new ht("Data too big")}static willFit(r,s,o){const l=s.getTotalCodewords(),f=s.getECBlocksForLevel(o).getTotalECCodewords(),h=l-f,p=(r+7)/8;return h>=p}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new ht("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let f=0;f<4&&s.getSize()<o;++f)s.appendBit(!1);const l=s.getSize()&7;if(l>0)for(let f=l;f<8;f++)s.appendBit(!1);const c=r-s.getSizeInBytes();for(let f=0;f<c;++f)s.appendBits(f&1?17:236,8);if(s.getSize()!==o)throw new ht("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,l,c,f){if(l>=o)throw new ht("Block ID too large");const h=r%o,p=o-h,x=Math.floor(r/o),w=x+1,A=Math.floor(s/o),b=A+1,k=x-A,L=w-b;if(k!==L)throw new ht("EC bytes mismatch");if(o!==p+h)throw new ht("RS blocks mismatch");if(r!==(A+k)*p+(b+L)*h)throw new ht("Total bytes mismatch");l<p?(c[0]=A,f[0]=k):(c[0]=b,f[0]=L)}static interleaveWithECBytes(r,s,o,l){if(r.getSizeInBytes()!==o)throw new ht("Number of bits and data bytes does not match");let c=0,f=0,h=0;const p=new Array;for(let w=0;w<l;++w){const A=new Int32Array(1),b=new Int32Array(1);xt.getNumDataBytesAndNumECBytesForBlockID(s,o,l,w,A,b);const k=A[0],L=new Uint8Array(k);r.toBytes(8*c,L,0,k);const j=xt.generateECBytes(L,b[0]);p.push(new o3(L,j)),f=Math.max(f,k),h=Math.max(h,j.length),c+=A[0]}if(o!==c)throw new ht("Data bytes does not match offset");const x=new P;for(let w=0;w<f;++w)for(const A of p){const b=A.getDataBytes();w<b.length&&x.appendBits(b[w],8)}for(let w=0;w<h;++w)for(const A of p){const b=A.getErrorCorrectionBytes();w<b.length&&x.appendBits(b[w],8)}if(s!==x.getSizeInBytes())throw new ht("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const o=r.length,l=new Int32Array(o+s);for(let f=0;f<o;f++)l[f]=r[f]&255;new lc(U.QR_CODE_FIELD_256).encode(l,s);const c=new Uint8Array(s);for(let f=0;f<s;f++)c[f]=l[o+f];return c}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,l){const c=o.getCharacterCountBits(s);if(r>=1<<c)throw new ht(r+" is bigger than "+((1<<c)-1));l.appendBits(r,c)}static appendBytes(r,s,o,l){switch(s){case Oe.NUMERIC:xt.appendNumericBytes(r,o);break;case Oe.ALPHANUMERIC:xt.appendAlphanumericBytes(r,o);break;case Oe.BYTE:xt.append8BitBytes(r,o,l);break;case Oe.KANJI:xt.appendKanjiBytes(r,o);break;default:throw new ht("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=xt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const c=xt.getDigit(r.charAt(l));if(l+2<o){const f=xt.getDigit(r.charAt(l+1)),h=xt.getDigit(r.charAt(l+2));s.appendBits(c*100+f*10+h,10),l+=3}else if(l+1<o){const f=xt.getDigit(r.charAt(l+1));s.appendBits(c*10+f,7),l+=2}else s.appendBits(c,4),l++}}static appendAlphanumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const c=xt.getAlphanumericCode(r.charCodeAt(l));if(c===-1)throw new ht;if(l+1<o){const f=xt.getAlphanumericCode(r.charCodeAt(l+1));if(f===-1)throw new ht;s.appendBits(c*45+f,11),l+=2}else s.appendBits(c,6),l++}}static append8BitBytes(r,s,o){let l;try{l=ye.encode(r,o)}catch(c){throw new ht(c)}for(let c=0,f=l.length;c!==f;c++){const h=l[c];s.appendBits(h,8)}}static appendKanjiBytes(r,s){let o;try{o=ye.encode(r,H.SJIS)}catch(c){throw new ht(c)}const l=o.length;for(let c=0;c<l;c+=2){const f=o[c]&255,h=o[c+1]&255,p=f<<8&4294967295|h;let x=-1;if(p>=33088&&p<=40956?x=p-33088:p>=57408&&p<=60351&&(x=p-49472),x===-1)throw new ht("Invalid byte sequence");const w=(x>>8)*192+(x&255);s.appendBits(w,13)}}static appendECI(r,s){s.appendBits(Oe.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}xt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xt.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class _i{write(r,s,o,l=null){if(r.length===0)throw new v("Found empty contents");if(s<0||o<0)throw new v("Requested dimensions are too small: "+s+"x"+o);let c=gt.L,f=_i.QUIET_ZONE_SIZE;l!==null&&(l.get(Gt.ERROR_CORRECTION)!==void 0&&(c=gt.fromString(l.get(Gt.ERROR_CORRECTION).toString())),l.get(Gt.MARGIN)!==void 0&&(f=Number.parseInt(l.get(Gt.MARGIN).toString(),10)));const h=xt.encode(r,c,l);return this.renderResult(h,s,o,f)}writeToDom(r,s,o,l,c=null){typeof r=="string"&&(r=document.querySelector(r));const f=this.write(s,o,l,c);r&&r.appendChild(f)}renderResult(r,s,o,l){const c=r.getMatrix();if(c===null)throw new te;const f=c.getWidth(),h=c.getHeight(),p=f+l*2,x=h+l*2,w=Math.max(s,p),A=Math.max(o,x),b=Math.min(Math.floor(w/p),Math.floor(A/x)),k=Math.floor((w-f*b)/2),L=Math.floor((A-h*b)/2),j=this.createSVGElement(w,A);for(let G=0,Q=L;G<h;G++,Q+=b)for(let ue=0,fe=k;ue<f;ue++,fe+=b)if(c.get(ue,G)===1){const le=this.createSvgRectElement(fe,Q,b,b);j.appendChild(le)}return j}createSVGElement(r,s){const o=document.createElementNS(_i.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,l){const c=document.createElementNS(_i.SVG_NS,"rect");return c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}_i.QUIET_ZONE_SIZE=4,_i.SVG_NS="http://www.w3.org/2000/svg";class Zi{encode(r,s,o,l,c){if(r.length===0)throw new v("Found empty contents");if(s!==ve.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(o<0||l<0)throw new v(`Requested dimensions are too small: ${o}x${l}`);let f=gt.L,h=Zi.QUIET_ZONE_SIZE;c!==null&&(c.get(Gt.ERROR_CORRECTION)!==void 0&&(f=gt.fromString(c.get(Gt.ERROR_CORRECTION).toString())),c.get(Gt.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Gt.MARGIN).toString(),10)));const p=xt.encode(r,f,c);return Zi.renderResult(p,o,l,h)}static renderResult(r,s,o,l){const c=r.getMatrix();if(c===null)throw new te;const f=c.getWidth(),h=c.getHeight(),p=f+l*2,x=h+l*2,w=Math.max(s,p),A=Math.max(o,x),b=Math.min(Math.floor(w/p),Math.floor(A/x)),k=Math.floor((w-f*b)/2),L=Math.floor((A-h*b)/2),j=new Ce(w,A);for(let G=0,Q=L;G<h;G++,Q+=b)for(let ue=0,fe=k;ue<f;ue++,fe+=b)c.get(ue,G)===1&&j.setRegion(fe,Q,b,b);return j}}Zi.QUIET_ZONE_SIZE=4;class a3{encode(r,s,o,l,c){let f;switch(s){case ve.QR_CODE:f=new Zi;break;default:throw new v("No encoder available for format "+s)}return f.encode(r,s,o,l,c)}}class gr extends ge{constructor(r,s,o,l,c,f,h,p){if(super(f,h),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=l,this.top=c,l+f>s||c+h>o)throw new v("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(f,h)}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,l=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.yuvData,c,l,0,o),l;for(let f=0;f<s;f++){const h=f*r;M.arraycopy(this.yuvData,c,l,h,r),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new gr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,l,!1)}renderThumbnail(){const r=this.getWidth()/gr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/gr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){const h=f*r;for(let p=0;p<r;p++){const x=l[c+p*gr.THUMBNAIL_SCALE_FACTOR]&255;o[h+p]=4278190080|x*65793}c+=this.dataWidth*gr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/gr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/gr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<s;l++,c+=this.dataWidth){const f=c+r/2;for(let h=c,p=c+r-1;h<f;h++,p--){const x=o[h];o[h]=o[p],o[p]=x}}}invert(){return new Te(this)}}gr.THUMBNAIL_SCALE_FACTOR=2;class cc extends ge{constructor(r,s,o,l,c,f,h){if(super(s,o),this.dataWidth=l,this.dataHeight=c,this.left=f,this.top=h,r.BYTES_PER_ELEMENT===4){const p=s*o,x=new Uint8ClampedArray(p);for(let w=0;w<p;w++){const A=r[w],b=A>>16&255,k=A>>7&510,L=A&255;x[w]=(b+k+L)/4&255}this.luminances=x}else this.luminances=r;if(l===void 0&&(this.dataWidth=s),c===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,l=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return M.arraycopy(this.luminances,c,l,0,o),l;for(let f=0;f<s;f++){const h=f*r;M.arraycopy(this.luminances,c,l,h,r),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new cc(this.luminances,o,l,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Te(this)}}class z0 extends H{static forName(r){return this.getCharacterSetECIByName(r)}}class uc{}uc.ISO_8859_1=H.ISO8859_1;class H0{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class V0{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class l3{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Qi extends l3{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Qi(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qi(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+R.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class fc extends Qi{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new fc(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function c3(E,r,s){return new fc(E,r,s)}function zs(E,r,s){return new Qi(E,r,s)}const u3=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wr=0,na=1,Kn=2,q0=3,mr=4,f3=new Qi(null,0,0),dc=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function d3(E){for(let r of E)T.fill(r,-1);return E[Wr][mr]=0,E[na][mr]=0,E[na][Wr]=28,E[q0][mr]=0,E[Kn][mr]=0,E[Kn][Wr]=15,E}const G0=d3(T.createInt32Array(6,6));class yr{constructor(r,s,o,l){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,l=this.token;if(r!==this.mode){let f=dc[this.mode][r];l=zs(l,f&65535,f>>16),o+=f>>16}let c=r===Kn?4:5;return l=zs(l,s,c),new yr(l,r,0,o+c)}shiftAndAppend(r,s){let o=this.token,l=this.mode===Kn?4:5;return o=zs(o,G0[this.mode][r],l),o=zs(o,s,5),new yr(o,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,l=this.bitCount;if(this.mode===mr||this.mode===Kn){let h=dc[o][Wr];s=zs(s,h&65535,h>>16),l+=h>>16,o=Wr}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new yr(s,o,this.binaryShiftByteCount+1,l+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(r+1)),f}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=c3(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new yr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(dc[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=yr.calculateBinaryShiftCost(r)-yr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let l=this.endBinaryShift(r.length).token;l!==null;l=l.getPrevious())s.unshift(l);let o=new P;for(const l of s)l.appendTo(o,r);return o}toString(){return ee.format("%s bits=%d bytes=%d",u3[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}yr.INITIAL_STATE=new yr(f3,Wr,0,0);function h3(E){const r=ee.getCharCode(" "),s=ee.getCharCode("."),o=ee.getCharCode(",");E[Wr][r]=1;const l=ee.getCharCode("Z"),c=ee.getCharCode("A");for(let b=c;b<=l;b++)E[Wr][b]=b-c+2;E[na][r]=1;const f=ee.getCharCode("z"),h=ee.getCharCode("a");for(let b=h;b<=f;b++)E[na][b]=b-h+2;E[Kn][r]=1;const p=ee.getCharCode("9"),x=ee.getCharCode("0");for(let b=x;b<=p;b++)E[Kn][b]=b-x+2;E[Kn][o]=12,E[Kn][s]=13;const w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let b=0;b<w.length;b++)E[q0][ee.getCharCode(w[b])]=b;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<A.length;b++)ee.getCharCode(A[b])>0&&(E[mr][ee.getCharCode(A[b])]=b);return E}const hc=h3(T.createInt32Array(5,256));class Hs{constructor(r){this.text=r}encode(){const r=ee.getCharCode(" "),s=ee.getCharCode(`
`);let o=V0.singletonList(yr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case ee.getCharCode("\r"):f=h===s?2:0;break;case ee.getCharCode("."):f=h===r?3:0;break;case ee.getCharCode(","):f=h===r?4:0;break;case ee.getCharCode(":"):f=h===r?5:0;break;default:f=0}f>0?(o=Hs.updateStateListForPair(o,c,f),c++):o=this.updateStateListForChar(o,c)}return V0.min(o,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let l of r)this.updateStateForChar(l,s,o);return Hs.simplifyStates(o)}updateStateForChar(r,s,o){let l=this.text[s]&255,c=hc[r.getMode()][l]>0,f=null;for(let h=0;h<=mr;h++){let p=hc[h][l];if(p>0){if(f==null&&(f=r.endBinaryShift(s)),!c||h===r.getMode()||h===Kn){const x=f.latchAndAppend(h,p);o.push(x)}if(!c&&G0[r.getMode()][h]>=0){const x=f.shiftAndAppend(h,p);o.push(x)}}}if(r.getBinaryShiftByteCount()>0||hc[r.getMode()][l]===0){let h=r.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(r,s,o){const l=[];for(let c of r)this.updateStateForPair(c,s,o,l);return this.simplifyStates(l)}static updateStateForPair(r,s,o,l){let c=r.endBinaryShift(s);if(l.push(c.latchAndAppend(mr,o)),r.getMode()!==mr&&l.push(c.shiftAndAppend(mr,o)),o===3||o===4){let f=c.latchAndAppend(Kn,16-o).latchAndAppend(Kn,1);l.push(f)}if(r.getBinaryShiftByteCount()>0){let f=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);l.push(f)}}static simplifyStates(r){let s=[];for(const o of r){let l=!0;for(const c of s){if(c.isBetterThanOrEqualTo(o)){l=!1;break}o.isBetterThanOrEqualTo(c)&&(s=s.filter(f=>f!==c))}l&&s.push(o)}return s}}class rt{constructor(){}static encodeBytes(r){return rt.encode(r,rt.DEFAULT_EC_PERCENT,rt.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let l=new Hs(r).encode(),c=R.truncDivision(l.getSize()*s,100)+11,f=l.getSize()+c,h,p,x,w,A;if(o!==rt.DEFAULT_AZTEC_LAYERS){if(h=o<0,p=Math.abs(o),p>(h?rt.MAX_NB_BITS_COMPACT:rt.MAX_NB_BITS))throw new v(ee.format("Illegal value %s for layers",o));x=rt.totalBitsInLayer(p,h),w=rt.WORD_SIZE[p];let le=x-x%w;if(A=rt.stuffBits(l,w),A.getSize()+c>le)throw new v("Data to large for user specified layer");if(h&&A.getSize()>w*64)throw new v("Data to large for user specified layer")}else{w=0,A=null;for(let le=0;;le++){if(le>rt.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(h=le<=3,p=h?le+1:le,x=rt.totalBitsInLayer(p,h),f>x)continue;(A==null||w!==rt.WORD_SIZE[p])&&(w=rt.WORD_SIZE[p],A=rt.stuffBits(l,w));let Ze=x-x%w;if(!(h&&A.getSize()>w*64)&&A.getSize()+c<=Ze)break}}let b=rt.generateCheckWords(A,x,w),k=A.getSize()/w,L=rt.generateModeMessage(h,p,k),j=(h?11:14)+p*4,G=new Int32Array(j),Q;if(h){Q=j;for(let le=0;le<G.length;le++)G[le]=le}else{Q=j+1+2*R.truncDivision(R.truncDivision(j,2)-1,15);let le=R.truncDivision(j,2),Ze=R.truncDivision(Q,2);for(let Ue=0;Ue<le;Ue++){let In=Ue+R.truncDivision(Ue,15);G[le-Ue-1]=Ze-In-1,G[le+Ue]=Ze+In+1}}let ue=new Ce(Q);for(let le=0,Ze=0;le<p;le++){let Ue=(p-le)*4+(h?9:12);for(let In=0;In<Ue;In++){let rr=In*2;for(let Rn=0;Rn<2;Rn++)b.get(Ze+rr+Rn)&&ue.set(G[le*2+Rn],G[le*2+In]),b.get(Ze+Ue*2+rr+Rn)&&ue.set(G[le*2+In],G[j-1-le*2-Rn]),b.get(Ze+Ue*4+rr+Rn)&&ue.set(G[j-1-le*2-Rn],G[j-1-le*2-In]),b.get(Ze+Ue*6+rr+Rn)&&ue.set(G[j-1-le*2-In],G[le*2+Rn])}Ze+=Ue*8}if(rt.drawModeMessage(ue,h,Q,L),h)rt.drawBullsEye(ue,R.truncDivision(Q,2),5);else{rt.drawBullsEye(ue,R.truncDivision(Q,2),7);for(let le=0,Ze=0;le<R.truncDivision(j,2)-1;le+=15,Ze+=16)for(let Ue=R.truncDivision(Q,2)&1;Ue<Q;Ue+=2)ue.set(R.truncDivision(Q,2)-Ze,Ue),ue.set(R.truncDivision(Q,2)+Ze,Ue),ue.set(Ue,R.truncDivision(Q,2)-Ze),ue.set(Ue,R.truncDivision(Q,2)+Ze)}let fe=new H0;return fe.setCompact(h),fe.setSize(Q),fe.setLayers(p),fe.setCodeWords(k),fe.setMatrix(ue),fe}static drawBullsEye(r,s,o){for(let l=0;l<o;l+=2)for(let c=s-l;c<=s+l;c++)r.set(c,s-l),r.set(c,s+l),r.set(s-l,c),r.set(s+l,c);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let l=new P;return r?(l.appendBits(s-1,2),l.appendBits(o-1,6),l=rt.generateCheckWords(l,28,4)):(l.appendBits(s-1,5),l.appendBits(o-1,11),l=rt.generateCheckWords(l,40,4)),l}static drawModeMessage(r,s,o,l){let c=R.truncDivision(o,2);if(s)for(let f=0;f<7;f++){let h=c-3+f;l.get(f)&&r.set(h,c-5),l.get(f+7)&&r.set(c+5,h),l.get(20-f)&&r.set(h,c+5),l.get(27-f)&&r.set(c-5,h)}else for(let f=0;f<10;f++){let h=c-5+f+R.truncDivision(f,5);l.get(f)&&r.set(h,c-7),l.get(f+10)&&r.set(c+7,h),l.get(29-f)&&r.set(h,c+7),l.get(39-f)&&r.set(c-7,h)}}static generateCheckWords(r,s,o){let l=r.getSize()/o,c=new lc(rt.getGF(o)),f=R.truncDivision(s,o),h=rt.bitsToWords(r,o,f);c.encode(h,f-l);let p=s%o,x=new P;x.appendBits(0,p);for(const w of Array.from(h))x.appendBits(w,o);return x}static bitsToWords(r,s,o){let l=new Int32Array(o),c,f;for(c=0,f=r.getSize()/s;c<f;c++){let h=0;for(let p=0;p<s;p++)h|=r.get(c*s+p)?1<<s-p-1:0;l[c]=h}return l}static getGF(r){switch(r){case 4:return U.AZTEC_PARAM;case 6:return U.AZTEC_DATA_6;case 8:return U.AZTEC_DATA_8;case 10:return U.AZTEC_DATA_10;case 12:return U.AZTEC_DATA_12;default:throw new v("Unsupported word size "+r)}}static stuffBits(r,s){let o=new P,l=r.getSize(),c=(1<<s)-2;for(let f=0;f<l;f+=s){let h=0;for(let p=0;p<s;p++)(f+p>=l||r.get(f+p))&&(h|=1<<s-1-p);(h&c)===c?(o.appendBits(h&c,s),f--):h&c?o.appendBits(h,s):(o.appendBits(h|1,s),f--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}rt.DEFAULT_EC_PERCENT=33,rt.DEFAULT_AZTEC_LAYERS=0,rt.MAX_NB_BITS=32,rt.MAX_NB_BITS_COMPACT=4,rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ra{encode(r,s,o,l){return this.encodeWithHints(r,s,o,l,null)}encodeWithHints(r,s,o,l,c){let f=uc.ISO_8859_1,h=rt.DEFAULT_EC_PERCENT,p=rt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Gt.CHARACTER_SET)&&(f=z0.forName(c.get(Gt.CHARACTER_SET).toString())),c.has(Gt.ERROR_CORRECTION)&&(h=R.parseInt(c.get(Gt.ERROR_CORRECTION).toString())),c.has(Gt.AZTEC_LAYERS)&&(p=R.parseInt(c.get(Gt.AZTEC_LAYERS).toString()))),ra.encodeLayers(r,s,o,l,f,h,p)}static encodeLayers(r,s,o,l,c,f,h){if(s!==ve.AZTEC)throw new v("Can only encode AZTEC, but got "+s);let p=rt.encode(ee.getBytes(r,c),f,h);return ra.renderResult(p,o,l)}static renderResult(r,s,o){let l=r.getMatrix();if(l==null)throw new te;let c=l.getWidth(),f=l.getHeight(),h=Math.max(s,c),p=Math.max(o,f),x=Math.min(h/c,p/f),w=(h-c*x)/2,A=(p-f*x)/2,b=new Ce(h,p);for(let k=0,L=A;k<f;k++,L+=x)for(let j=0,G=w;j<c;j++,G+=x)l.get(j,k)&&b.setRegion(G,L,x,x);return b}}n.AbstractExpandedDecoder=$l,n.ArgumentException=C,n.ArithmeticException=B,n.AztecCode=H0,n.AztecCodeReader=mn,n.AztecCodeWriter=ra,n.AztecDecoder=he,n.AztecDetector=Xt,n.AztecDetectorResult=Fe,n.AztecEncoder=rt,n.AztecHighLevelEncoder=Hs,n.AztecPoint=He,n.BarcodeFormat=ve,n.Binarizer=D,n.BinaryBitmap=S,n.BitArray=P,n.BitMatrix=Ce,n.BitSource=nc,n.BrowserAztecCodeReader=An,n.BrowserBarcodeReader=qw,n.BrowserCodeReader=ft,n.BrowserDatamatrixCodeReader=Ww,n.BrowserMultiFormatReader=r3,n.BrowserPDF417Reader=i3,n.BrowserQRCodeReader=s3,n.BrowserQRCodeSvgWriter=_i,n.CharacterSetECI=H,n.ChecksumException=N,n.Code128Reader=de,n.Code39Reader=je,n.DataMatrixDecodedBitStreamParser=Hr,n.DataMatrixReader=Vr,n.DecodeHintType=V,n.DecoderResult=En,n.DefaultGridSampler=Pt,n.DetectorResult=Be,n.EAN13Reader=ne,n.EncodeHintType=Gt,n.Exception=m,n.FormatException=F,n.GenericGF=U,n.GenericGFPoly=Y,n.GlobalHistogramBinarizer=Ve,n.GridSampler=yt,n.GridSamplerInstance=Dt,n.HTMLCanvasElementLuminanceSource=Ee,n.HybridBinarizer=Re,n.ITFReader=Le,n.IllegalArgumentException=v,n.IllegalStateException=te,n.InvertedLuminanceSource=Te,n.LuminanceSource=ge,n.MathUtils=me,n.MultiFormatOneDReader=Xi,n.MultiFormatReader=U0,n.MultiFormatWriter=a3,n.NotFoundException=q,n.OneDReader=Qe,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=D0,n.PDF417Reader=tn,n.PDF417ResultMetadata=L0,n.PerspectiveTransform=tt,n.PlanarYUVLuminanceSource=gr,n.QRCodeByteMatrix=ta,n.QRCodeDataMask=Gn,n.QRCodeDecodedBitStreamParser=Et,n.QRCodeDecoderErrorCorrectionLevel=gt,n.QRCodeDecoderFormatInformation=ln,n.QRCodeEncoder=xt,n.QRCodeEncoderQRCode=wi,n.QRCodeMaskUtil=Nt,n.QRCodeMatrixUtil=ke,n.QRCodeMode=Oe,n.QRCodeReader=qr,n.QRCodeVersion=Ie,n.QRCodeWriter=Zi,n.RGBLuminanceSource=cc,n.RSS14Reader=Rt,n.RSSExpandedReader=ie,n.ReaderException=ea,n.ReedSolomonDecoder=xe,n.ReedSolomonEncoder=lc,n.ReedSolomonException=K,n.Result=We,n.ResultMetadataType=ze,n.ResultPoint=oe,n.StringUtils=ee,n.UnsupportedOperationException=se,n.VideoInputDevice=Ke,n.WhiteRectangleDetector=Ne,n.WriterException=ht,n.ZXingArrays=T,n.ZXingCharset=z0,n.ZXingInteger=R,n.ZXingStandardCharsets=uc,n.ZXingStringBuilder=J,n.ZXingStringEncoding=ye,n.ZXingSystem=M,n.createAbstractExpandedDecoder=k0,Object.defineProperty(n,"__esModule",{value:!0})})})(Kh,Kh.exports);var At=Kh.exports;const O4=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var uy=function(){function t(e,n,i){if(this.formatMap=new Map([[_e.QR_CODE,At.BarcodeFormat.QR_CODE],[_e.AZTEC,At.BarcodeFormat.AZTEC],[_e.CODABAR,At.BarcodeFormat.CODABAR],[_e.CODE_39,At.BarcodeFormat.CODE_39],[_e.CODE_93,At.BarcodeFormat.CODE_93],[_e.CODE_128,At.BarcodeFormat.CODE_128],[_e.DATA_MATRIX,At.BarcodeFormat.DATA_MATRIX],[_e.MAXICODE,At.BarcodeFormat.MAXICODE],[_e.ITF,At.BarcodeFormat.ITF],[_e.EAN_13,At.BarcodeFormat.EAN_13],[_e.EAN_8,At.BarcodeFormat.EAN_8],[_e.PDF_417,At.BarcodeFormat.PDF_417],[_e.RSS_14,At.BarcodeFormat.RSS_14],[_e.RSS_EXPANDED,At.BarcodeFormat.RSS_EXPANDED],[_e.UPC_A,At.BarcodeFormat.UPC_A],[_e.UPC_E,At.BarcodeFormat.UPC_E],[_e.UPC_EAN_EXTENSION,At.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!O4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(e),u=new Map;u.set(At.DecodeHintType.POSSIBLE_FORMATS,a),u.set(At.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,a){try{i(n.decode(e))}catch(u){a(u)}})},t.prototype.decode=function(e){var n=new At.MultiFormatReader(this.verbose,this.hints),i=new At.HTMLCanvasElementLuminanceSource(e),a=new At.BinaryBitmap(new At.HybridBinarizer(i)),u=n.decode(a);return{text:u.text,format:Lv.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var u=a[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),k4=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function g(C){try{m(i.next(C))}catch(v){d(v)}}function y(C){try{m(i.throw(C))}catch(v){d(v)}}function m(C){C.done?u(C.value):a(C.value).then(g,y)}m((i=i.apply(t,e||[])).next())})},P4=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(m){return function(C){return y([m,C])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(C){m=[6,C],a=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},fy=function(){function t(e,n,i){if(this.formatMap=new Map([[_e.QR_CODE,"qr_code"],[_e.AZTEC,"aztec"],[_e.CODABAR,"codabar"],[_e.CODE_39,"code_39"],[_e.CODE_93,"code_93"],[_e.CODE_128,"code_128"],[_e.DATA_MATRIX,"data_matrix"],[_e.ITF,"itf"],[_e.EAN_13,"ean_13"],[_e.EAN_8,"ean_8"],[_e.PDF_417,"pdf417"],[_e.UPC_A,"upc_a"],[_e.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return k4(this,void 0,void 0,function(){var n,i;return P4(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Lv.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,a=0,u=e;a<u.length;a++){var d=u[a],g=d.boundingBox.width*d.boundingBox.height;g>i&&(i=g,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var u=a[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),dy=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function g(C){try{m(i.next(C))}catch(v){d(v)}}function y(C){try{m(i.throw(C))}catch(v){d(v)}}function m(C){C.done?u(C.value):a(C.value).then(g,y)}m((i=i.apply(t,e||[])).next())})},hy=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(m){return function(C){return y([m,C])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(C){m=[6,C],a=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},D4=function(){function t(e,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&fy.isSupported()?(this.primaryDecoder=new fy(e,i,a),this.secondaryDecoder=new uy(e,i,a)):this.primaryDecoder=new uy(e,i,a)}return t.prototype.decodeAsync=function(e){return dy(this,void 0,void 0,function(){var n;return hy(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return dy(this,void 0,void 0,function(){var n,i;return hy(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];e+=a}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),_0=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),El=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function g(C){try{m(i.next(C))}catch(v){d(v)}}function y(C){try{m(i.throw(C))}catch(v){d(v)}}function m(C){C.done?u(C.value):a(C.value).then(g,y)}m((i=i.apply(t,e||[])).next())})},Al=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(m){return function(C){return y([m,C])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(C){m=[6,C],a=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Fv=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),M4=function(t){_0(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Fv),L4=function(t){_0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(M4),B4=function(t){_0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Fv),F4=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new L4(this.track)},t.prototype.torchFeature=function(){return new B4(this.track)},t}(),j4=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,a){return El(this,void 0,void 0,function(){var u,d;return Al(this,function(g){switch(g.label){case 0:return u=new t(e,n,a),i.aspectRatio?(d={aspectRatio:i.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:g.sent(),g.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return El(this,void 0,void 0,function(){return Al(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var a=e.mediaStream.getVideoTracks(),u=a.length,d=0;e.mediaStream.getVideoTracks().forEach(function(g){e.mediaStream.removeTrack(g),g.stop(),++d,d>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new F4(this.getFirstTrackOrFail())},t}(),U4=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return El(this,void 0,void 0,function(){return Al(this,function(a){return[2,j4.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return El(this,void 0,void 0,function(){var n,i;return Al(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),py=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function g(C){try{m(i.next(C))}catch(v){d(v)}}function y(C){try{m(i.throw(C))}catch(v){d(v)}}function m(C){C.done?u(C.value):a(C.value).then(g,y)}m((i=i.apply(t,e||[])).next())})},gy=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(m){return function(C){return y([m,C])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(C){m=[6,C],a=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},z4=function(){function t(){}return t.failIfNotSupported=function(){return py(this,void 0,void 0,function(){return gy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return py(this,void 0,void 0,function(){return gy(this,function(n){return[2,U4.create(e)]})})},t}(),H4=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function g(C){try{m(i.next(C))}catch(v){d(v)}}function y(C){try{m(i.throw(C))}catch(v){d(v)}}function m(C){C.done?u(C.value):a(C.value).then(g,y)}m((i=i.apply(t,e||[])).next())})},V4=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(m){return function(C){return y([m,C])}}function y(m){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(n=0)),n;)try{if(i=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(C){m=[6,C],a=0}finally{i=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},q4=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=gs.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=gs.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return H4(this,void 0,void 0,function(){var e,n,i,a,u,d,g;return V4(this,function(y){switch(y.label){case 0:return e=function(m){for(var C=m.getVideoTracks(),v=0,S=C;v<S.length;v++){var N=S[v];N.enabled=!1,N.stop(),m.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=y.sent(),a=[],u=0,d=i;u<d.length;u++)g=d[u],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(u){for(var d=[],g=0,y=u;g<y.length;g++){var m=y[g];m.kind==="video"&&d.push({id:m.id,label:m.label})}e(d)},a=MediaStreamTrack;a.getSources(i)})},t}(),Ot;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ot||(Ot={}));var G4=function(){function t(){this.state=Ot.NOT_STARTED,this.onGoingTransactionNewState=Ot.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ot.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ot.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ot.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ot.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ot.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Ot.UNKNOWN:throw"Transition from unknown is not allowed";case Ot.NOT_STARTED:this.failIfNewStateIs(e,[Ot.PAUSED]);break;case Ot.SCANNING:break;case Ot.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,a=n;i<a.length;i++){var u=a[i];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),W4=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ot.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ot.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ot.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ot.PAUSED},t}(),K4=function(){function t(){}return t.create=function(){return new W4(new G4)},t}(),X4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bn=function(t){X4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(I4),Y4=function(){function t(e,n){this.logger=n,this.fps=Bn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Bn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Bv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Rr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Z4=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new N4(this.verbose),this.qrcode=new D4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=K4.create()}return t.prototype.start=function(e,n,i,a){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var g=Y4.create(n,this.logger);this.clearElement();var y=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=y,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Bn.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var v=this,S=this.stateManagerProxy.startTransition(Ot.SCANNING);return new Promise(function(N,D){var M=m?g.videoConstraints:v.createVideoConstraints(e);if(!M){S.cancel(),D("videoConstraints should be defined");return}var z={};(!m||g.aspectRatio)&&(z.aspectRatio=g.aspectRatio);var I={onRenderSurfaceReady:function(T,R){v.setupUi(T,R,g),v.isScanning=!0,v.foreverScan(g,i,d)}};z4.failIfNotSupported().then(function(T){T.create(M).then(function(R){return R.render(u.element,z,I).then(function(P){v.renderedCamera=P,S.execute(),N(null)}).catch(function(P){S.cancel(),D(P)})}).catch(function(R){S.cancel(),D(gs.errorGettingUserMedia(R))})}).catch(function(T){S.cancel(),D(gs.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ot.PAUSED),this.showPausedState(),(Rr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Ot.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ot.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var u=document.getElementById(Bn.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Rr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,u){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var g=d.width,y=d.height,m=document.getElementById(i.elementId),C=m.clientWidth?m.clientWidth:Bn.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:y,Bn.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(g,y,C,v);if(n){var N=i.createCanvasElement(C,v,"qr-canvas-visible");N.style.display="inline-block",m.appendChild(N);var D=N.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=C,D.canvas.height=v,D.drawImage(d,0,0,g,y,S.x,S.y,S.width,S.height)}var M=Bn.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(d.width,S.width),I=Math.max(d.height,S.height),T=z+2*M,R=I+2*M,P=i.createCanvasElement(T,R);m.appendChild(P);var X=P.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=T,X.canvas.height=R,X.drawImage(d,0,0,g,y,M,M,z,I);try{i.qrcode.decodeRobustlyAsync(P).then(function(V){a(cy.createFromQrcodeResult(V))}).catch(u)}catch(V){u("QR code parse error, error = ".concat(V))}},d.onerror=u,d.onabort=u,d.onstalled=u,d.onsuspend=u,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return q4.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Bv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[_e.QR_CODE,_e.AZTEC,_e.CODABAR,_e.CODE_39,_e.CODE_93,_e.CODE_128,_e.DATA_MATRIX,_e.MAXICODE,_e.ITF,_e.EAN_13,_e.EAN_8,_e.PDF_417,_e.RSS_14,_e.RSS_EXPANDED,_e.UPC_A,_e.UPC_E,_e.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,u=e.formatsToSupport;a<u.length;a++){var d=u[a];T4(d)?i.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Rr(e))return!0;if(!Rr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Rr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Rr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var a=this,u=i.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u),g=function(m){if(m<Bn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Bn.MIN_QR_BOX_SIZE,"px.")},y=function(m){return m>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};g(d.width),g(d.height),d.width=y(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var a=Rr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(e,n,a);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=i.isShadedBoxEnabled()&&u.height<=n,g={x:0,y:0,width:e,height:n},y=d?this.getShadedRegionBounds(e,n,u):g,m=this.createCanvasElement(y.width,y.height),C={willReadFrequently:!0},v=m.getContext("2d",C);v.canvas.width=y.width,v.canvas.height=y.height,this.element.append(m),d&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=gs.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,cy.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var u=gs.codeParseError(a);return n(u,R4.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),d=u.videoWidth/u.clientWidth,g=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*d,m=this.qrRegion.height*g,C=this.qrRegion.x*d,v=this.qrRegion.y*g;this.context.drawImage(u,C,v,y,m,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,i)},a.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(N){!N&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){S()})):S()}).catch(function(N){a.logger.logError("Error happend while scanning context",N),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},u="exact",d=function(D){if(D in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},g=Object.keys(e);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var y=Object.keys(e)[0];if(y!==n&&y!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var m=e.facingMode;if(typeof m=="string"){if(d(m))return{facingMode:m}}else if(typeof m=="object")if(u in m){if(d(m["".concat(u)]))return{facingMode:{exact:m["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var C=typeof m;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(u in v)return{deviceId:{exact:v["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var S=typeof v;throw"Invalid type of 'deviceId' = ".concat(S)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},t.prototype.computeCanvasDrawConfig=function(e,n,i,a){if(e<=i&&n<=a){var u=(i-e)/2,d=(a-n)/2;return{x:u,y:d,width:e,height:n}}else{var g=e,y=n;return e>i&&(n=i/e*n,e=i),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(y)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Bn.BORDER_SHADER_MATCH_COLOR:Bn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var a=e,u=n,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(u,"px"),d.style.display="none",d.id=Rr(i)?"qr-canvas":i,d},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,a){if(!(n-a.width<1||i-a.height<1)){var u=document.createElement("div");u.style.position="absolute";var d=(n-a.width)/2,g=(i-a.height)/2;if(u.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(Bn.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var y=5,m=40;this.insertShaderBorders(u,m,y,-y,null,0,!0),this.insertShaderBorders(u,m,y,-y,null,0,!1),this.insertShaderBorders(u,m,y,null,-y,0,!0),this.insertShaderBorders(u,m,y,null,-y,0,!1),this.insertShaderBorders(u,y,m+y,-y,null,-y,!0),this.insertShaderBorders(u,y,m+y,null,-y,-y,!0),this.insertShaderBorders(u,y,m+y,-y,null,-y,!1),this.insertShaderBorders(u,y,m+y,null,-y,-y,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,i,a,u,d,g){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Bn.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(i,"px"),a!==null&&(y.style.top="".concat(a,"px")),u!==null&&(y.style.bottom="".concat(u,"px")),g?y.style.left="".concat(d,"px"):y.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),e.appendChild(y)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),my;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(my||(my={}));function Q4({onClose:t,onConnect:e}){const[n,i]=re.useState(""),[a,u]=re.useState(!1),[d,g]=re.useState(!1),[y,m]=re.useState(""),C=re.useRef(null),v="guest-qr-reader";re.useEffect(()=>()=>{S()},[]);const S=async()=>{var I,T;try{(I=C.current)!=null&&I.isScanning&&await C.current.stop(),(T=C.current)==null||T.clear()}catch{}C.current=null,u(!1)},N=async()=>{i(""),u(!0),await new Promise(I=>setTimeout(I,100));try{const I=new Z4(v);C.current=I,await I.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},T=>{D(T),S()},()=>{})}catch(I){u(!1);const T=I instanceof Error?I.message:String(I);T.includes("NotAllowedError")||T.includes("Permission")?i('Camera permission denied. Use "Paste URL" instead.'):T.includes("NotFoundError")||T.includes("no camera")?i('No camera found. Use "Paste URL" instead.'):i(`Camera error: ${T}`)}},D=I=>{try{const T=new URL(I.startsWith("http")?I:`http://${I}`);S(),e(T.toString())}catch{i("Invalid QR code. Expected a URL like http://192.168.x.x:PORT")}},M=async()=>{try{const I=await navigator.clipboard.readText();I.trim()&&m(I.trim())}catch{i("Could not read clipboard. Paste manually instead.")}},z=()=>{if(y.trim()){i("");try{const I=new URL(y.trim().startsWith("http")?y.trim():`http://${y.trim()}`);S(),e(I.toString())}catch{i("Invalid URL. Expected format: http://192.168.x.x:PORT")}}};return _.jsxs("div",{className:"guest-mode-overlay",children:[_.jsxs("div",{className:"guest-mode-header",children:[_.jsx("span",{className:"guest-mode-title",children:"Join a Room"}),_.jsx("button",{className:"guest-mode-close",onClick:t,title:"Close",children:_.jsx(S4,{size:18})})]}),_.jsx("div",{className:"guest-mode-body",children:_.jsxs("div",{className:"guest-mode-scan",children:[_.jsx("p",{className:"guest-mode-desc",children:"Scan the QR code shown on the host screen, or paste the room URL to join."}),n&&_.jsx("div",{className:"guest-mode-error",children:n}),a?_.jsxs("div",{className:"guest-scanner-container",children:[_.jsx("div",{id:v,className:"guest-scanner-viewport"}),_.jsx("button",{className:"btn-sm btn-secondary guest-scanner-cancel",onClick:S,children:"Cancel Scan"})]}):d?_.jsxs("div",{className:"guest-paste-form",children:[_.jsx("label",{className:"guest-mode-label",children:"Room URL"}),_.jsxs("div",{className:"guest-paste-row",children:[_.jsx("input",{type:"text",className:"guest-mode-input",placeholder:"http://192.168.1.100:51234",value:y,onChange:I=>m(I.target.value),onKeyDown:I=>{I.key==="Enter"&&z(),I.stopPropagation()},autoFocus:!0}),_.jsx("button",{className:"btn-icon btn-paste",onClick:M,title:"Paste from clipboard",children:_.jsx(oy,{size:18})})]}),_.jsxs("div",{className:"guest-paste-buttons",children:[_.jsx("button",{className:"btn btn-secondary",onClick:()=>{g(!1),i("")},children:"Back"}),_.jsx("button",{className:"btn btn-primary",onClick:z,disabled:!y.trim(),children:"Connect"})]})]}):_.jsxs("div",{className:"guest-mode-actions",children:[_.jsxs("button",{className:"guest-action-card",onClick:N,children:[_.jsx(s4,{size:32}),_.jsx("span",{className:"guest-action-label",children:"Scan QR Code"}),_.jsx("span",{className:"guest-action-hint",children:"Use your camera to scan the host's QR"})]}),_.jsxs("button",{className:"guest-action-card",onClick:()=>g(!0),children:[_.jsx(oy,{size:32}),_.jsx("span",{className:"guest-action-label",children:"Paste URL"}),_.jsx("span",{className:"guest-action-hint",children:"Enter or paste the host's room URL"})]})]})]})})]})}function $4({onSelectHost:t,onSelectGuest:e,onSelectLibrary:n}){return _.jsxs("div",{className:"mode-select-screen",children:[_.jsxs("h1",{className:"mode-select-logo",children:[_.jsx(KS,{size:40,style:{display:"inline",verticalAlign:"middle",marginRight:"0.3em"}})," KaraokeNatin"]}),_.jsx("p",{className:"mode-select-tagline",children:"Choose how you want to use the app"}),_.jsxs("div",{className:"mode-select-cards",children:[_.jsxs("button",{className:"mode-card",onClick:t,children:[_.jsx(YS,{size:40}),_.jsx("span",{className:"mode-card-title",children:"Host a Session"}),_.jsx("span",{className:"mode-card-desc",children:"Play videos on this screen and let friends control the queue from their phones."})]}),_.jsxs("button",{className:"mode-card",onClick:e,children:[_.jsx(d4,{size:40}),_.jsx("span",{className:"mode-card-title",children:"Join as Guest"}),_.jsx("span",{className:"mode-card-desc",children:"Scan a QR code or enter a URL to control a host in your network."})]}),_.jsxs("button",{className:"mode-card",onClick:n,children:[_.jsx(qS,{size:40}),_.jsx("span",{className:"mode-card-title",children:"My Library"}),_.jsx("span",{className:"mode-card-desc",children:"Manage your personal song collection, organize playlists, and search for new songs."})]})]})]})}function J4({onBack:t}){const[e,n]=re.useState("dark"),[i,a]=re.useState([]),[u,d]=re.useState(null),[g,y]=re.useState(""),[m,C]=re.useState([]),[v,S]=re.useState(!1),[N,D]=re.useState(""),[M,z]=re.useState(!1),[I,T]=re.useState(null),[R,P]=re.useState(""),[X,V]=re.useState(null),[F,$]=re.useState(!1),[H,se]=re.useState(""),[ye,ee]=re.useState(new Set),[J,Ce]=re.useState(new Set);re.useEffect(()=>{q()},[]);const q=async()=>{try{const ae=await mv();a(ae),!u&&ae.length>0&&d(ae[0].id)}catch(ae){console.error("[Library] Failed to load collections:",ae)}},Ve=async ae=>{if(ae.preventDefault(),!!g.trim()){S(!0),C([]),Ce(new Set);try{const Y=await Me("search_youtube",{query:g.trim(),limit:10});C(Y)}catch(Y){console.error("[Library] Search failed:",Y)}finally{S(!1)}}},Re=async()=>{if(N.trim())try{await xl(N.trim(),"personal"),D(""),z(!1),await q()}catch(ae){console.error("[Library] Create collection failed:",ae)}},ge=async ae=>{if(H.trim())try{const Y=await xl(H.trim(),"personal");se(""),$(!1),await q(),ae&&await Pe(ae,Y),V(null)}catch(Y){console.error("[Library] Create collection in picker failed:",Y)}},Te=async ae=>{var B,U;const Y=i.find(K=>K.id===ae);if(Y&&confirm(`Delete "${Y.name}"?`))try{await yv(ae),u===ae&&d((U=(B=i.find(K=>K.id!==ae))==null?void 0:B.id)!=null?U:null),await q()}catch(K){console.error("[Library] Delete collection failed:",K)}},Ee=async ae=>{if(!R.trim()){T(null);return}try{await xv(ae,R.trim()),await q()}catch(Y){console.error("[Library] Rename failed:",Y)}finally{T(null)}},Ke=async ae=>{try{const Y=ae.visibility==="public"?"personal":"public";await Cv(ae.id,Y),await q()}catch(Y){console.error("[Library] Toggle visibility failed:",Y)}},Pe=async(ae,Y)=>{V(null),ee(B=>new Set(B).add(ae));try{await Vh(ae,Y,"Library"),Ce(B=>new Set(B).add(ae)),await q()}catch(B){console.error("[Library] Add to library failed:",B)}finally{ee(B=>{const U=new Set(B);return U.delete(ae),U})}},ft=async(ae,Y)=>{try{await vv(ae,Y),await q()}catch(B){console.error("[Library] Remove from library failed:",B)}},We=async ae=>{try{const Y=await gv(ae);await navigator.clipboard.writeText(Y),alert("Collection copied to clipboard!")}catch(Y){console.error("[Library] Export failed:",Y),alert("Export failed")}},It=async ae=>{try{await wv(ae)}catch(Y){if(console.error("[Library] Save to file failed:",Y),typeof Y=="string"&&Y.includes("cancelled"))return;alert("Failed to save file")}},ve=async()=>{try{const ae=await _v();await Me("process_command",{command:{type:"IMPORT_COLLECTION",data:ae}}),await q()}catch(ae){if(console.error("[Library] Load from file failed:",ae),typeof ae=="string"&&ae.includes("cancelled"))return;alert("Failed to load file")}},Ft=()=>{const ae=e==="dark"?"light":"dark";n(ae),document.documentElement.classList.toggle("light",ae==="light")},ze=i.find(ae=>ae.id===u),En=i.reduce((ae,Y)=>ae+Y.songs.length,0);return _.jsxs("div",{className:"library-page",children:[_.jsxs("div",{className:"library-header",children:[_.jsx("button",{className:"btn-icon",onClick:t,title:"Back to mode selection",children:_.jsx(w0,{size:18})}),_.jsx("h1",{className:"library-title",children:"My Library"}),_.jsx("button",{className:"btn-icon",onClick:Ft,children:e==="dark"?_.jsx(Dv,{size:18}):_.jsx(Ov,{size:18})})]}),_.jsx("div",{className:"library-search",children:_.jsxs("form",{onSubmit:Ve,className:"search-row",children:[_.jsx("input",{type:"text",className:"search-input",placeholder:"Search for songs...",value:g,onChange:ae=>y(ae.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1)}),_.jsx("button",{type:"submit",className:"btn-icon",title:"Search",children:_.jsx(Pv,{size:18})})]})}),_.jsxs("div",{className:"library-content",children:[v&&_.jsxs("div",{className:"search-loading",children:[_.jsx("div",{className:"spinner"}),_.jsx("p",{children:"Searching..."})]}),!v&&m.length>0&&_.jsxs("div",{className:"library-section",children:[_.jsx("div",{className:"section-label",children:"Search Results"}),_.jsx("div",{className:"search-results",children:m.map((ae,Y)=>{const B=ye.has(ae.url),U=J.has(ae.url);return _.jsxs("div",{className:"search-result-item",children:[_.jsx("img",{src:ae.thumbnail,alt:"",className:"search-result-thumb"}),_.jsxs("div",{className:"search-result-info",children:[_.jsx("div",{className:"search-result-title",children:ae.title}),_.jsxs("div",{className:"search-result-meta",children:[ae.channel,"  ",ae.duration]}),_.jsx("div",{className:"search-result-actions",children:_.jsxs("div",{className:"playlist-picker-wrapper",style:{position:"relative"},children:[_.jsx("button",{className:`btn-sm ${U?"btn-success":"btn-primary"}`,onClick:()=>V(X===ae.url?null:ae.url),disabled:B,children:B?_.jsx(_.Fragment,{children:"Saving..."}):U?_.jsx(_.Fragment,{children:" Saved"}):_.jsxs(_.Fragment,{children:[_.jsx($r,{size:14})," Add to Library ",_.jsx(qh,{size:12})]})}),X===ae.url&&_.jsxs("div",{className:"collection-picker",children:[_.jsx("div",{className:"collection-picker-title",children:"Add to Collection"}),i.map(K=>_.jsxs("button",{className:"collection-picker-item",onClick:()=>Pe(ae.url,K.id),children:[_.jsx("span",{className:`visibility-dot ${K.visibility}`}),K.name,_.jsx("span",{className:"collection-picker-count",children:K.songs.length})]},K.id)),_.jsx("div",{className:"collection-picker-divider"}),F?_.jsxs("div",{className:"collection-picker-new",children:[_.jsx("input",{type:"text",placeholder:"Collection name...",value:H,onChange:K=>se(K.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1),onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),ge(ae.url)),K.stopPropagation()},autoFocus:!0,className:"collection-picker-input"}),_.jsx("button",{className:"btn-sm btn-primary",onClick:()=>ge(ae.url),children:"Create"})]}):_.jsxs("button",{className:"collection-picker-item collection-picker-create",onClick:()=>$(!0),children:[_.jsx($r,{size:14})," New Collection"]})]})]})})]})]},Y)})})]}),_.jsxs("div",{className:"library-section",children:[_.jsxs("div",{className:"section-label",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("span",{children:[_.jsx(Gh,{size:16,style:{display:"inline",verticalAlign:"-2px"}})," Collections (",En," songs)"]}),_.jsx("div",{style:{display:"flex",gap:"4px"},children:_.jsx("button",{className:"btn-sm btn-secondary",onClick:ve,title:"Import from file",children:" Open"})})]}),_.jsxs("div",{className:"collection-tabs",children:[i.map(ae=>_.jsxs("button",{className:`collection-tab ${u===ae.id?"active":""}`,onClick:()=>d(ae.id),title:`${ae.name} (${ae.visibility})`,children:[_.jsx("span",{className:`visibility-dot ${ae.visibility}`}),I===ae.id?_.jsx("input",{className:"collection-rename-input",value:R,onChange:Y=>P(Y.target.value),onFocus:()=>fn(!0),onBlur:()=>{fn(!1),Ee(ae.id)},onKeyDown:Y=>{Y.key==="Enter"&&Ee(ae.id),Y.key==="Escape"&&T(null),Y.stopPropagation()},autoFocus:!0,onClick:Y=>Y.stopPropagation()}):_.jsxs("span",{children:[ae.name," (",ae.songs.length,")"]})]},ae.id)),_.jsx("button",{className:"collection-tab collection-tab-add",onClick:()=>z(!0),title:"Create new collection",children:_.jsx($r,{size:14})})]}),M&&_.jsxs("div",{className:"library-new-collection",children:[_.jsx("input",{type:"text",placeholder:"Collection name...",value:N,onChange:ae=>D(ae.target.value),onFocus:()=>fn(!0),onBlur:()=>fn(!1),onKeyDown:ae=>{ae.key==="Enter"&&(ae.preventDefault(),Re()),ae.key==="Escape"&&(z(!1),D(""))},autoFocus:!0,className:"search-input",style:{marginBottom:"8px"}}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{className:"btn-primary",onClick:Re,children:"Create"}),_.jsx("button",{className:"btn-secondary",onClick:()=>{z(!1),D("")},children:"Cancel"})]})]}),ze&&_.jsxs("div",{className:"collection-actions-bar",children:[_.jsx("button",{className:"btn-sm btn-secondary",onClick:()=>Ke(ze),title:ze.visibility==="public"?"Make personal":"Make public",children:ze.visibility==="public"?_.jsxs(_.Fragment,{children:[_.jsx(Rv,{size:13})," Public"]}):_.jsxs(_.Fragment,{children:[_.jsx(Nv,{size:13})," Personal"]})}),_.jsx("button",{className:"btn-sm btn-secondary",onClick:()=>{T(ze.id),P(ze.name)},title:"Rename",children:_.jsx(kv,{size:13})}),_.jsxs("button",{className:"btn-sm btn-secondary",onClick:()=>We(ze.id),title:"Export to clipboard",children:[_.jsx(Mv,{size:13})," Export"]}),_.jsx("button",{className:"btn-sm btn-secondary",onClick:()=>It(ze.id),title:"Save to file",children:" Save"}),i.length>1&&_.jsx("button",{className:"btn-sm btn-danger-text",onClick:()=>Te(ze.id),title:"Delete collection",children:_.jsx(wl,{size:13})})]}),!ze||ze.songs.length===0?_.jsxs("div",{className:"playlist-empty",children:[_.jsx("p",{children:i.length===0?"No collections yet":"No songs in this collection"}),_.jsx("p",{className:"playlist-empty-hint",children:i.length===0?"Create your first collection above":"Add songs from search results"})]}):_.jsx("div",{className:"playlist-list",children:ze.songs.map((ae,Y)=>_.jsxs("div",{className:"playlist-item",children:[_.jsx("span",{className:"playlist-number",children:Y+1}),_.jsx("img",{src:ae.thumbnailUrl,alt:"",className:"playlist-thumb"}),_.jsx("div",{className:"playlist-info",children:_.jsx("div",{className:"playlist-title",children:ae.title})}),_.jsx("button",{className:"playlist-remove-btn",onClick:()=>ft(ze.id,ae.id),title:"Remove from library",children:_.jsx(wl,{size:14})})]},ae.id))})]})]})]})}const eb="modulepreload",tb=function(t){return"/"+t},yy={},xy=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(n.map(y=>{if(y=tb(y),y in yy)return;yy[y]=!0;const m=y.endsWith(".css"),C=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${C}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":eb,m||(v.as="script"),v.crossOrigin="",v.href=y,g&&v.setAttribute("nonce",g),document.head.appendChild(v),m)return new Promise((S,N)=>{v.addEventListener("load",S),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return a.then(d=>{for(const g of d||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})};class nb{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return rb(e).buffer}}function rb(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let i=0;for(const a of t){const u=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);n.set(u,i),i+=a.byteLength}return n}function jv(t){return new ib(t).unpack()}function Uv(t){const e=new sb,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class ib{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let i=0,a="",u,d;for(;i<e;)u=n[i],u<160?(d=u,i++):(u^192)<32?(d=(u&31)<<6|n[i+1]&63,i+=2):(u^224)<16?(d=(u&15)<<12|(n[i+1]&63)<<6|n[i+2]&63,i+=3):(d=(u&7)<<18|(n[i+1]&63)<<12|(n[i+2]&63)<<6|n[i+3]&63,i+=4),a+=String.fromCodePoint(d);return this.index+=e,a}unpack_array(e){const n=new Array(e);for(let i=0;i<e;i++)n[i]=this.unpack();return n}unpack_map(e){const n={};for(let i=0;i<e;i++){const a=this.unpack();n[a]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,i=(e>>23&255)-127,a=e&8388607|8388608;return(n===0?1:-1)*a*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),i=e>>31,a=(e>>20&2047)-1023,d=(e&1048575|1048576)*2**(a-20)+n*2**(a-52);return(i===0?1:-1)*d}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class sb{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),i=n.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const i=a=>{if(a<n){const u=this.pack(e[a]);return u instanceof Promise?u.then(()=>i(a+1)):i(a+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),a=e/2**i-1,u=Math.floor(a*2**52),d=2**32,g=n<<31|i+1023<<20|u/d&1048575,y=u%d;this._bufferBuilder.append(203),this.pack_int32(g),this.pack_int32(y)}pack_object(e){const n=Object.keys(e),i=n.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const a=u=>{if(u<n.length){const d=n[u];if(e.hasOwnProperty(d)){this.pack(d);const g=this.pack(e[d]);if(g instanceof Promise)return g.then(()=>a(u+1))}return a(u+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,i=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new nb,this._textEncoder=new TextEncoder}}let zv=!0,Hv=!0;function lo(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function Hi(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,a=i.addEventListener;i.addEventListener=function(d,g){if(d!==e)return a.apply(this,arguments);const y=m=>{const C=n(m);C&&(g.handleEvent?g.handleEvent(C):g(C))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(g,y),a.apply(this,[d,y])};const u=i.removeEventListener;i.removeEventListener=function(d,g){if(d!==e||!this._eventMap||!this._eventMap[e])return u.apply(this,arguments);if(!this._eventMap[e].has(g))return u.apply(this,arguments);const y=this._eventMap[e].get(g);return this._eventMap[e].delete(g),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[d,y])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(d){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),d&&this.addEventListener(e,this["_on"+e]=d)},enumerable:!0,configurable:!0})}function ob(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(zv=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function ab(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Hv=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Vv(){if(typeof window=="object"){if(zv)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function E0(t,e){Hv&&console.warn(t+" is deprecated, please use "+e+" instead.")}function lb(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(a=>a.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(lo(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(lo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(lo(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=lo(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Cy(t){return Object.prototype.toString.call(t)==="[object Object]"}function qv(t){return Cy(t)?Object.keys(t).reduce(function(e,n){const i=Cy(t[n]),a=i?qv(t[n]):t[n],u=i&&!Object.keys(a).length;return a===void 0||u?e:Object.assign(e,{[n]:a})},{}):t}function Xh(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Xh(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(a=>{Xh(t,t.get(a),n)})}))}function vy(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const u=[];return t.forEach(d=>{d.type==="track"&&d.trackIdentifier===e.id&&u.push(d)}),u.forEach(d=>{t.forEach(g=>{g.type===i&&g.trackId===d.id&&Xh(t,g,a)})}),a}const wy=Vv;function Gv(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(g){if(typeof g!="object"||g.mandatory||g.optional)return g;const y={};return Object.keys(g).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const C=typeof g[m]=="object"?g[m]:{ideal:g[m]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);const v=function(S,N){return S?S+N.charAt(0).toUpperCase()+N.slice(1):N==="deviceId"?"sourceId":N};if(C.ideal!==void 0){y.optional=y.optional||[];let S={};typeof C.ideal=="number"?(S[v("min",m)]=C.ideal,y.optional.push(S),S={},S[v("max",m)]=C.ideal,y.optional.push(S)):(S[v("",m)]=C.ideal,y.optional.push(S))}C.exact!==void 0&&typeof C.exact!="number"?(y.mandatory=y.mandatory||{},y.mandatory[v("",m)]=C.exact):["min","max"].forEach(S=>{C[S]!==void 0&&(y.mandatory=y.mandatory||{},y.mandatory[v(S,m)]=C[S])})}),g.advanced&&(y.optional=(y.optional||[]).concat(g.advanced)),y},a=function(g,y){if(e.version>=61)return y(g);if(g=JSON.parse(JSON.stringify(g)),g&&typeof g.audio=="object"){const m=function(C,v,S){v in C&&!(S in C)&&(C[S]=C[v],delete C[v])};g=JSON.parse(JSON.stringify(g)),m(g.audio,"autoGainControl","googAutoGainControl"),m(g.audio,"noiseSuppression","googNoiseSuppression"),g.audio=i(g.audio)}if(g&&typeof g.video=="object"){let m=g.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const C=e.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!C)){delete g.video.facingMode;let v;if(m.exact==="environment"||m.ideal==="environment"?v=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(v=["front"]),v)return n.mediaDevices.enumerateDevices().then(S=>{S=S.filter(D=>D.kind==="videoinput");let N=S.find(D=>v.some(M=>D.label.toLowerCase().includes(M)));return!N&&S.length&&v.includes("back")&&(N=S[S.length-1]),N&&(g.video.deviceId=m.exact?{exact:N.deviceId}:{ideal:N.deviceId}),g.video=i(g.video),wy("chrome: "+JSON.stringify(g)),y(g)})}g.video=i(g.video)}return wy("chrome: "+JSON.stringify(g)),y(g)},u=function(g){return e.version>=64?g:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[g.name]||g.name,message:g.message,constraint:g.constraint||g.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(g,y,m){a(g,C=>{n.webkitGetUserMedia(C,y,v=>{m&&m(u(v))})})};if(n.getUserMedia=d.bind(n),n.mediaDevices.getUserMedia){const g=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(y){return a(y,m=>g(m).then(C=>{if(m.audio&&!C.getAudioTracks().length||m.video&&!C.getVideoTracks().length)throw C.getTracks().forEach(v=>{v.stop()}),new DOMException("","NotFoundError");return C},C=>Promise.reject(u(C))))}}}function Wv(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Kv(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let u;t.RTCPeerConnection.prototype.getReceivers?u=this.getReceivers().find(g=>g.track&&g.track.id===a.track.id):u={track:a.track};const d=new Event("track");d.track=a.track,d.receiver=u,d.transceiver={receiver:u},d.streams=[i.stream],this.dispatchEvent(d)}),i.stream.getTracks().forEach(a=>{let u;t.RTCPeerConnection.prototype.getReceivers?u=this.getReceivers().find(g=>g.track&&g.track.id===a.id):u={track:a};const d=new Event("track");d.track=a,d.receiver=u,d.transceiver={receiver:u},d.streams=[i.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Hi(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Xv(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=a.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(g,y){let m=a.apply(this,arguments);return m||(m=e(this,g),this._senders.push(m)),m};const u=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(g){u.apply(this,arguments);const y=this._senders.indexOf(g);y!==-1&&this._senders.splice(y,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._senders=this._senders||[],n.apply(this,[u]),u.getTracks().forEach(d=>{this._senders.push(e(this,d))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._senders=this._senders||[],i.apply(this,[u]),u.getTracks().forEach(d=>{const g=this._senders.find(y=>y.track===d);g&&this._senders.splice(this._senders.indexOf(g),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Yv(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const u=n.apply(this,[]);return u.forEach(d=>d._pc=this),u});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const u=i.apply(this,arguments);return u._pc=this,u}),t.RTCRtpSender.prototype.getStats=function(){const u=this;return this._pc.getStats().then(d=>vy(d,u.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(u=>u._pc=this),a}),Hi(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(u=>vy(u,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,u,d;return this.getSenders().forEach(g=>{g.track===i&&(a?d=!0:a=g)}),this.getReceivers().forEach(g=>(g.track===i&&(u?d=!0:u=g),g.track===i)),d||a&&u?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():u?u.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Zv(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(d,g){if(!g)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const y=e.apply(this,arguments);return this._shimmedLocalStreams[g.id]?this._shimmedLocalStreams[g.id].indexOf(y)===-1&&this._shimmedLocalStreams[g.id].push(y):this._shimmedLocalStreams[g.id]=[g,y],y};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(m=>{if(this.getSenders().find(v=>v.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const g=this.getSenders();n.apply(this,arguments);const y=this.getSenders().filter(m=>g.indexOf(m)===-1);this._shimmedLocalStreams[d.id]=[d].concat(y)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],i.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(g=>{const y=this._shimmedLocalStreams[g].indexOf(d);y!==-1&&this._shimmedLocalStreams[g].splice(y,1),this._shimmedLocalStreams[g].length===1&&delete this._shimmedLocalStreams[g]}),a.apply(this,arguments)}}function Qv(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Zv(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const C=n.apply(this);return this._reverseStreams=this._reverseStreams||{},C.map(v=>this._reverseStreams[v.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(C){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},C.getTracks().forEach(v=>{if(this.getSenders().find(N=>N.track===v))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[C.id]){const v=new t.MediaStream(C.getTracks());this._streams[C.id]=v,this._reverseStreams[v.id]=C,C=v}i.apply(this,[C])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(C){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[C.id]||C]),delete this._reverseStreams[this._streams[C.id]?this._streams[C.id].id:C.id],delete this._streams[C.id]},t.RTCPeerConnection.prototype.addTrack=function(C,v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(M=>M===C))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(M=>M.track===C))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const D=this._streams[v.id];if(D)D.addTrack(C),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const M=new t.MediaStream([C]);this._streams[v.id]=M,this._reverseStreams[M.id]=v,this.addStream(M)}return this.getSenders().find(M=>M.track===C)};function u(m,C){let v=C.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const N=m._reverseStreams[S],D=m._streams[N.id];v=v.replace(new RegExp(D.id,"g"),N.id)}),new RTCSessionDescription({type:C.type,sdp:v})}function d(m,C){let v=C.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const N=m._reverseStreams[S],D=m._streams[N.id];v=v.replace(new RegExp(N.id,"g"),D.id)}),new RTCSessionDescription({type:C.type,sdp:v})}["createOffer","createAnswer"].forEach(function(m){const C=t.RTCPeerConnection.prototype[m],v={[m](){const S=arguments;return arguments.length&&typeof arguments[0]=="function"?C.apply(this,[D=>{const M=u(this,D);S[0].apply(null,[M])},D=>{S[1]&&S[1].apply(null,D)},arguments[2]]):C.apply(this,arguments).then(D=>u(this,D))}};t.RTCPeerConnection.prototype[m]=v[m]});const g=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?g.apply(this,arguments):(arguments[0]=d(this,arguments[0]),g.apply(this,arguments))};const y=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const m=y.get.apply(this);return m.type===""?m:u(this,m)}}),t.RTCPeerConnection.prototype.removeTrack=function(C){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!C._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(C._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let S;Object.keys(this._streams).forEach(N=>{this._streams[N].getTracks().find(M=>C.track===M)&&(S=this._streams[N])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(C.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Yh(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function $v(t,e){Hi(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}const _y=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:$v,shimAddTrackRemoveTrack:Qv,shimAddTrackRemoveTrackWithNative:Zv,shimGetSendersWithDtmf:Xv,shimGetUserMedia:Gv,shimMediaStream:Wv,shimOnTrack:Kv,shimPeerConnection:Yh,shimSenderReceiverGetStats:Yv},Symbol.toStringTag,{value:"Module"}));function Jv(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,u,d){E0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(u,d)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(d,g,y){g in d&&!(y in d)&&(d[y]=d[g],delete d[g])},u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d.audio,"autoGainControl","mozAutoGainControl"),a(d.audio,"noiseSuppression","mozNoiseSuppression")),u(d)},i&&i.prototype.getSettings){const d=i.prototype.getSettings;i.prototype.getSettings=function(){const g=d.apply(this,arguments);return a(g,"mozAutoGainControl","autoGainControl"),a(g,"mozNoiseSuppression","noiseSuppression"),g}}if(i&&i.prototype.applyConstraints){const d=i.prototype.applyConstraints;i.prototype.applyConstraints=function(g){return this.kind==="audio"&&typeof g=="object"&&(g=JSON.parse(JSON.stringify(g)),a(g,"autoGainControl","mozAutoGainControl"),a(g,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[g])}}}}function cb(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function ew(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Zh(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const u=t.RTCPeerConnection.prototype[a],d={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=d[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[u,d,g]=arguments;return i.apply(this,[u||null]).then(y=>{if(e.version<53&&!d)try{y.forEach(m=>{m.type=n[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;y.forEach((C,v)=>{y.set(v,Object.assign({},C,{type:n[C.type]||C.type}))})}return y}).then(d,g)}}function tw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(u=>u._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function nw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Hi(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function rw(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){E0("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function iw(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function sw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const u=e.apply(this,arguments);if(a){const{sender:d}=u,g=d.getParameters();(!("encodings"in g)||g.encodings.length===1&&Object.keys(g.encodings[0]).length===0)&&(g.encodings=i,d.sendEncodings=i,this.setParametersPromises.push(d.setParameters(g).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return u})}function ow(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function aw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function lw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Ey=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:sw,shimCreateAnswer:lw,shimCreateOffer:aw,shimGetDisplayMedia:cb,shimGetParameters:ow,shimGetUserMedia:Jv,shimOnTrack:ew,shimPeerConnection:Zh,shimRTCDataChannel:iw,shimReceiverGetStats:nw,shimRemoveStream:rw,shimSenderGetStats:tw},Symbol.toStringTag,{value:"Module"}));function cw(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>e.call(this,a,i)),i.getVideoTracks().forEach(a=>e.call(this,a,i))},t.RTCPeerConnection.prototype.addTrack=function(i,...a){return a&&a.forEach(u=>{this._localStreams?this._localStreams.includes(u)||this._localStreams.push(u):this._localStreams=[u]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(u=>{a.includes(u.track)&&this.removeTrack(u)})})}}function uw(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const u=new Event("addstream");u.stream=a,this.dispatchEvent(u)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(u=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(u)>=0)return;i._remoteStreams.push(u);const d=new Event("addstream");d.stream=u,i.dispatchEvent(d)})}),e.apply(i,arguments)}}}function fw(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,a=e.setLocalDescription,u=e.setRemoteDescription,d=e.addIceCandidate;e.createOffer=function(m,C){const v=arguments.length>=2?arguments[2]:arguments[0],S=n.apply(this,[v]);return C?(S.then(m,C),Promise.resolve()):S},e.createAnswer=function(m,C){const v=arguments.length>=2?arguments[2]:arguments[0],S=i.apply(this,[v]);return C?(S.then(m,C),Promise.resolve()):S};let g=function(y,m,C){const v=a.apply(this,[y]);return C?(v.then(m,C),Promise.resolve()):v};e.setLocalDescription=g,g=function(y,m,C){const v=u.apply(this,[y]);return C?(v.then(m,C),Promise.resolve()):v},e.setRemoteDescription=g,g=function(y,m,C){const v=d.apply(this,[y]);return C?(v.then(m,C),Promise.resolve()):v},e.addIceCandidate=g}function dw(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>i(hw(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,a,u){e.mediaDevices.getUserMedia(i).then(a,u)}).bind(e))}function hw(t){return t&&t.video!==void 0?Object.assign({},t,{video:qv(t.video)}):t}function pw(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const u=[];for(let d=0;d<i.iceServers.length;d++){let g=i.iceServers[d];g.urls===void 0&&g.url?(E0("RTCIceServer.url","RTCIceServer.urls"),g=JSON.parse(JSON.stringify(g)),g.urls=g.url,delete g.url,u.push(g)):u.push(i.iceServers[d])}i.iceServers=u}return new e(i,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function gw(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function mw(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const u=this.getTransceivers().find(d=>d.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):i.offerToReceiveVideo===!0&&!u&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function yw(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Ay=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:yw,shimCallbacksAPI:fw,shimConstraints:hw,shimCreateOfferLegacy:mw,shimGetUserMedia:dw,shimLocalStreamsAPI:cw,shimRTCIceServerUrls:pw,shimRemoteStreamsAPI:uw,shimTrackEventTransceiver:gw},Symbol.toStringTag,{value:"Module"}));var xw={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((a,u)=>(u>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(a=>a.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const a={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let u=8;u<i.length;u+=2)switch(i[u]){case"raddr":a.relatedAddress=i[u+1];break;case"rport":a.relatedPort=parseInt(i[u+1],10);break;case"tcptype":a.tcpType=i[u+1];break;case"ufrag":a.ufrag=i[u+1],a.usernameFragment=i[u+1];break;default:a[i[u]]===void 0&&(a[i[u]]=i[u+1]);break}return a},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const a=n.component;a==="rtp"?i.push(1):a==="rtcp"?i.push(2):i.push(a),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const u=n.type;return i.push("typ"),i.push(u),u!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const a={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),a.name=i[0],a.clockRate=parseInt(i[1],10),a.channels=i.length===3?parseInt(i[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const a=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let a;const u=n.substring(n.indexOf(" ")+1).split(";");for(let d=0;d<u.length;d++)a=u[d].trim().split("="),i[a[0].trim()]=a[1];return i},e.writeFmtp=function(n){let i="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const u=[];Object.keys(n.parameters).forEach(d=>{n.parameters[d]!==void 0?u.push(d+"="+n.parameters[d]):u.push(d)}),i+="a=fmtp:"+a+" "+u.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(u=>{i+="a=rtcp-fb:"+a+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),a={ssrc:parseInt(n.substring(7,i),10)},u=n.indexOf(":",i);return u>-1?(a.attribute=n.substring(i+1,u),a.value=n.substring(u+1)):a.attribute=n.substring(i+1),a},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(a=>parseInt(a,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let a="a=setup:"+i+`\r
`;return n.fingerprints.forEach(u=>{a+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),a},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const a=e.matchPrefix(n+i,"a=ice-ufrag:")[0],u=e.matchPrefix(n+i,"a=ice-pwd:")[0];return a&&u?{usernameFragment:a.substring(12),password:u.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},u=e.splitLines(n)[0].split(" ");i.profile=u[2];for(let g=3;g<u.length;g++){const y=u[g],m=e.matchPrefix(n,"a=rtpmap:"+y+" ")[0];if(m){const C=e.parseRtpMap(m),v=e.matchPrefix(n,"a=fmtp:"+y+" ");switch(C.parameters=v.length?e.parseFmtp(v[0]):{},C.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+y+" ").map(e.parseRtcpFb),i.codecs.push(C),C.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(C.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(g=>{i.headerExtensions.push(e.parseExtmap(g))});const d=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(g=>{d.forEach(y=>{g.rtcpFeedback.find(C=>C.type===y.type&&C.parameter===y.parameter)||g.rtcpFeedback.push(y)})}),i},e.writeRtpDescription=function(n,i){let a="";a+="m="+n+" ",a+=i.codecs.length>0?"9":"0",a+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=i.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(d=>{a+=e.writeRtpMap(d),a+=e.writeFmtp(d),a+=e.writeRtcpFb(d)});let u=0;return i.codecs.forEach(d=>{d.maxptime>u&&(u=d.maxptime)}),u>0&&(a+="a=maxptime:"+u+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(d=>{a+=e.writeExtmap(d)}),a},e.parseRtpEncodingParameters=function(n){const i=[],a=e.parseRtpParameters(n),u=a.fecMechanisms.indexOf("RED")!==-1,d=a.fecMechanisms.indexOf("ULPFEC")!==-1,g=e.matchPrefix(n,"a=ssrc:").map(S=>e.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),y=g.length>0&&g[0].ssrc;let m;const C=e.matchPrefix(n,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(D=>parseInt(D,10)));C.length>0&&C[0].length>1&&C[0][0]===y&&(m=C[0][1]),a.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let N={ssrc:y,codecPayloadType:parseInt(S.parameters.apt,10)};y&&m&&(N.rtx={ssrc:m}),i.push(N),u&&(N=JSON.parse(JSON.stringify(N)),N.fec={ssrc:y,mechanism:d?"red+ulpfec":"red"},i.push(N))}}),i.length===0&&y&&i.push({ssrc:y});let v=e.matchPrefix(n,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substring(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substring(5),10)*1e3*.95-50*40*8:v=void 0,i.forEach(S=>{S.maxBitrate=v})),i},e.parseRtcpParameters=function(n){const i={},a=e.matchPrefix(n,"a=ssrc:").map(g=>e.parseSsrcMedia(g)).filter(g=>g.attribute==="cname")[0];a&&(i.cname=a.value,i.ssrc=a.ssrc);const u=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=u.length>0,i.compound=u.length===0;const d=e.matchPrefix(n,"a=rtcp-mux");return i.mux=d.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const a=e.matchPrefix(n,"a=msid:");if(a.length===1)return i=a[0].substring(7).split(" "),{stream:i[0],track:i[1]};const u=e.matchPrefix(n,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(u.length>0)return i=u[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:");let u;a.length>0&&(u=parseInt(a[0].substring(19),10)),isNaN(u)&&(u=65536);const d=e.matchPrefix(n,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:i.fmt,maxMessageSize:u};const g=e.matchPrefix(n,"a=sctpmap:");if(g.length>0){const y=g[0].substring(10).split(" ");return{port:parseInt(y[0],10),protocol:y[1],maxMessageSize:u}}},e.writeSctpDescription=function(n,i){let a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&a.push("a=max-message-size:"+i.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,a){let u;const d=i!==void 0?i:2;return n?u=n:u=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+u+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const a=e.splitLines(n);for(let u=0;u<a.length;u++)switch(a[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[u].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const a=e.splitLines(n)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){const a=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let a=0;a<i.length;a++)if(i[a].length<2||i[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(xw);var Cw=xw.exports;const _s=ky(Cw),ub=y3({__proto__:null,default:_s},[Cw]);function Fa(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const a=new e(i),u=_s.parseCandidate(i.candidate);for(const d in u)d in a||Object.defineProperty(a,d,{value:u[d]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Hi(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Qh(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Hi(t,"icecandidate",e=>{if(e.candidate){const n=_s.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function ja(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(g){if(!g||!g.sdp)return!1;const y=_s.splitSections(g.sdp);return y.shift(),y.some(m=>{const C=_s.parseMLine(m);return C&&C.kind==="application"&&C.protocol.indexOf("SCTP")!==-1})},i=function(g){const y=g.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(y===null||y.length<2)return-1;const m=parseInt(y[1],10);return m!==m?-1:m},a=function(g){let y=65536;return e.browser==="firefox"&&(e.version<57?g===-1?y=16384:y=2147483637:e.version<60?y=e.version===57?65535:65536:y=2147483637),y},u=function(g,y){let m=65536;e.browser==="firefox"&&e.version===57&&(m=65535);const C=_s.matchPrefix(g.sdp,"a=max-message-size:");return C.length>0?m=parseInt(C[0].substring(19),10):e.browser==="firefox"&&y!==-1&&(m=2147483637),m},d=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:y}=this.getConfiguration();y==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const y=i(arguments[0]),m=a(y),C=u(arguments[0],y);let v;m===0&&C===0?v=Number.POSITIVE_INFINITY:m===0||C===0?v=Math.max(m,C):v=Math.min(m,C);const S={};Object.defineProperty(S,"maxMessageSize",{get(){return v}}),this._sctp=S}return d.apply(this,arguments)}}function Ua(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,a){const u=i.send;i.send=function(){const g=arguments[0],y=g.length||g.size||g.byteLength;if(i.readyState==="open"&&a.sctp&&y>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return u.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},Hi(t,"datachannel",i=>(e(i.channel,i.target),i))}function $h(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const u=a.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const d=new Event("connectionstatechange",a);u.dispatchEvent(d)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Jh(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const u=a.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:u}):a.sdp=u}return n.apply(this,arguments)}}function za(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ha(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return n.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?n.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>n.apply(this,[d]))})}const fb=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Jh,shimAddIceCandidateNullOrEmpty:za,shimConnectionState:$h,shimMaxMessageSize:ja,shimParameterlessSetLocalDescription:Ha,shimRTCIceCandidate:Fa,shimRTCIceCandidateRelayProtocol:Qh,shimSendThrowTypeError:Ua},Symbol.toStringTag,{value:"Module"}));function db({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Vv,i=lb(t),a={browserDetails:i,commonShim:fb,extractVersion:lo,disableLog:ob,disableWarnings:ab,sdp:ub};switch(i.browser){case"chrome":if(!_y||!Yh||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=_y,za(t,i),Ha(t),Gv(t,i),Wv(t),Yh(t,i),Kv(t),Qv(t,i),Xv(t),Yv(t),$v(t,i),Fa(t),Qh(t),$h(t),ja(t,i),Ua(t),Jh(t,i);break;case"firefox":if(!Ey||!Zh||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=Ey,za(t,i),Ha(t),Jv(t,i),Zh(t,i),ew(t),rw(t),tw(t),nw(t),iw(t),sw(t),ow(t),aw(t),lw(t),Fa(t),$h(t),ja(t,i),Ua(t);break;case"safari":if(!Ay||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=Ay,za(t,i),Ha(t),pw(t),mw(t),fw(t),cw(t),uw(t),gw(t),dw(t),yw(t),Fa(t),Qh(t),ja(t,i),Ua(t),Jh(t,i);break;default:n("Unsupported browser!");break}return a}const Sy=db({window:typeof window>"u"?void 0:window});function Vi(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}class vw{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],i=e.byteLength,a=Math.ceil(i/this.chunkedMTU);let u=0,d=0;for(;d<i;){const g=Math.min(i,d+this.chunkedMTU),y=e.slice(d,g),m={__peerData:this._dataCount,n:u,data:y,total:a};n.push(m),d=g,u++}return this._dataCount++,n}}}function hb(t){let e=0;for(const a of t)e+=a.byteLength;const n=new Uint8Array(e);let i=0;for(const a of t)n.set(a,i),i+=a.byteLength;return n}const Vd=Sy.default||Sy,$s=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Vd.browserDetails.browser}getVersion(){return Vd.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Vd.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},pb=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),ww=()=>Math.random().toString(36).slice(2),by={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class gb extends vw{noop(){}blobToArrayBuffer(e,n){const i=new FileReader;return i.onload=function(a){a.target&&n(a.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=by,this.browser=$s.getBrowser(),this.browserVersion=$s.getVersion(),this.pack=Uv,this.unpack=jv,this.supports=function(){const n={browser:$s.isBrowserSupported(),webRTC:$s.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let i;try{i=new RTCPeerConnection(by),n.audioVideo=!0;let a;try{a=i.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!a.ordered;try{a.binaryType="blob",n.binaryBlob=!$s.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{i&&i.close()}return n}(),this.validateId=pb,this.randomToken=ww}}const Nn=new gb,mb="PeerJS: ";class yb{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const i=[mb,...n];for(const a in i)i[a]instanceof Error&&(i[a]="("+i[a].name+") "+i[a].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var Se=new yb,A0={},xb=Object.prototype.hasOwnProperty,vn="~";function jo(){}Object.create&&(jo.prototype=Object.create(null),new jo().__proto__||(vn=!1));function Cb(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function _w(t,e,n,i,a){if(typeof n!="function")throw new TypeError("The listener must be a function");var u=new Cb(n,i||t,a),d=vn?vn+e:e;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],u]:t._events[d].push(u):(t._events[d]=u,t._eventsCount++),t}function Va(t,e){--t._eventsCount===0?t._events=new jo:delete t._events[e]}function gn(){this._events=new jo,this._eventsCount=0}gn.prototype.eventNames=function(){var e=[],n,i;if(this._eventsCount===0)return e;for(i in n=this._events)xb.call(n,i)&&e.push(vn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};gn.prototype.listeners=function(e){var n=vn?vn+e:e,i=this._events[n];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,u=i.length,d=new Array(u);a<u;a++)d[a]=i[a].fn;return d};gn.prototype.listenerCount=function(e){var n=vn?vn+e:e,i=this._events[n];return i?i.fn?1:i.length:0};gn.prototype.emit=function(e,n,i,a,u,d){var g=vn?vn+e:e;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,C,v;if(y.fn){switch(y.once&&this.removeListener(e,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,n),!0;case 3:return y.fn.call(y.context,n,i),!0;case 4:return y.fn.call(y.context,n,i,a),!0;case 5:return y.fn.call(y.context,n,i,a,u),!0;case 6:return y.fn.call(y.context,n,i,a,u,d),!0}for(v=1,C=new Array(m-1);v<m;v++)C[v-1]=arguments[v];y.fn.apply(y.context,C)}else{var S=y.length,N;for(v=0;v<S;v++)switch(y[v].once&&this.removeListener(e,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,n);break;case 3:y[v].fn.call(y[v].context,n,i);break;case 4:y[v].fn.call(y[v].context,n,i,a);break;default:if(!C)for(N=1,C=new Array(m-1);N<m;N++)C[N-1]=arguments[N];y[v].fn.apply(y[v].context,C)}}return!0};gn.prototype.on=function(e,n,i){return _w(this,e,n,i,!1)};gn.prototype.once=function(e,n,i){return _w(this,e,n,i,!0)};gn.prototype.removeListener=function(e,n,i,a){var u=vn?vn+e:e;if(!this._events[u])return this;if(!n)return Va(this,u),this;var d=this._events[u];if(d.fn)d.fn===n&&(!a||d.once)&&(!i||d.context===i)&&Va(this,u);else{for(var g=0,y=[],m=d.length;g<m;g++)(d[g].fn!==n||a&&!d[g].once||i&&d[g].context!==i)&&y.push(d[g]);y.length?this._events[u]=y.length===1?y[0]:y:Va(this,u)}return this};gn.prototype.removeAllListeners=function(e){var n;return e?(n=vn?vn+e:e,this._events[n]&&Va(this,n)):(this._events=new jo,this._eventsCount=0),this};gn.prototype.off=gn.prototype.removeListener;gn.prototype.addListener=gn.prototype.on;gn.prefixed=vn;gn.EventEmitter=gn;A0=gn;var qi={};Vi(qi,"ConnectionType",()=>ui);Vi(qi,"PeerErrorType",()=>Ut);Vi(qi,"BaseConnectionErrorType",()=>e1);Vi(qi,"DataConnectionErrorType",()=>S0);Vi(qi,"SerializationType",()=>Xl);Vi(qi,"SocketEventType",()=>ti);Vi(qi,"ServerMessageType",()=>dn);var ui=function(t){return t.Data="data",t.Media="media",t}({}),Ut=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),e1=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),S0=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),Xl=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),ti=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),dn=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const Ew="1.5.5";class vb extends A0.EventEmitter{constructor(e,n,i,a,u,d=5e3){super(),this.pingInterval=d,this._disconnected=!0,this._messagesQueue=[];const g=e?"wss://":"ws://";this._baseUrl=g+n+":"+i+a+"peerjs?key="+u}start(e,n){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Ew),this._disconnected=!1,this._socket.onmessage=a=>{let u;try{u=JSON.parse(a.data),Se.log("Server message received:",u)}catch{Se.log("Invalid server message",a.data);return}this.emit(ti.Message,u)},this._socket.onclose=a=>{this._disconnected||(Se.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ti.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Se.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Se.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:dn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ti.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Aw{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ui.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const i=this.connection,a={ordered:!!e.reliable},u=n.createDataChannel(i.label,a);i._initializeDataChannel(u),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Se.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,i=this.connection.connectionId,a=this.connection.type,u=this.connection.provider;Se.log("Listening for ICE candidates."),e.onicecandidate=d=>{!d.candidate||!d.candidate.candidate||(Se.log(`Received ICE candidates for ${n}:`,d.candidate),u.socket.send({type:dn.Candidate,payload:{candidate:d.candidate,type:a,connectionId:i},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Se.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(e1.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Se.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(e1.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Se.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Se.log("Listening for data channel"),e.ondatachannel=d=>{Se.log("Received data channel");const g=d.channel;u.getConnection(n,i)._initializeDataChannel(g)},Se.log("Listening for remote stream"),e.ontrack=d=>{Se.log("Received remote stream");const g=d.streams[0],y=u.getConnection(n,i);if(y.type===ui.Media){const m=y;this._addStreamToMediaConnection(g,m)}}}cleanup(){Se.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let i=!1;const a=this.connection.dataChannel;a&&(i=!!a.readyState&&a.readyState!=="closed"),(n||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);Se.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Se.log("Set localDescription:",i,`for:${this.connection.peer}`);let a={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ui.Data){const u=this.connection;a={...a,label:u.label,reliable:u.reliable,serialization:u.serialization}}n.socket.send({type:dn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Ut.WebRTC,a),Se.log("Failed to setLocalDescription, ",a))}}catch(i){n.emitError(Ut.WebRTC,i),Se.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const i=await e.createAnswer();Se.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Se.log("Set localDescription:",i,`for:${this.connection.peer}`),n.socket.send({type:dn.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){n.emitError(Ut.WebRTC,a),Se.log("Failed to setLocalDescription, ",a)}}catch(i){n.emitError(Ut.WebRTC,i),Se.log("Failed to create answer, ",i)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const i=this.connection.peerConnection,a=this.connection.provider;Se.log("Setting remote description",n);const u=this;try{await i.setRemoteDescription(n),Se.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await u._makeAnswer()}catch(d){a.emitError(Ut.WebRTC,d),Se.log("Failed to setRemoteDescription, ",d)}}async handleCandidate(e){Se.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Se.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Ut.WebRTC,n),Se.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(Se.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return Se.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{n.addTrack(i,e)})}_addStreamToMediaConnection(e,n){Se.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class Sw extends A0.EventEmitter{emitError(e,n){Se.error("Error:",n),this.emit("error",new wb(`${e}`,n))}}class wb extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class bw extends Sw{get open(){return this._open}constructor(e,n,i){super(),this.peer=e,this.provider=n,this.options=i,this._open=!1,this.metadata=i.metadata}}var l1;const vo=class vo extends bw{get type(){return ui.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,i){super(e,n,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||vo.ID_PREFIX+Nn.randomToken(),this._negotiator=new Aw(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Se.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,i=e.payload;switch(e.type){case dn.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case dn.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:Se.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){Se.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const a of i)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};l1=new WeakMap,Vs(vo,l1,vo.ID_PREFIX="mc_");let Sl=vo;class _b{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:i,port:a,path:u,key:d}=this._options,g=new URL(`${n}://${i}:${a}${u}${d}/${e}`);return g.searchParams.set("ts",`${Date.now()}${Math.random()}`),g.searchParams.set("version",Ew),fetch(g.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Se.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Nn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Nn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Se.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var c1,u1;const bi=class bi extends bw{get type(){return ui.Data}constructor(e,n,i){super(e,n,i),this.connectionId=this.options.connectionId||bi.ID_PREFIX+ww(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Aw(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Se.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(S0.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case dn.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case dn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Se.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};c1=new WeakMap,u1=new WeakMap,Vs(bi,c1,bi.ID_PREFIX="dc_"),Vs(bi,u1,bi.MAX_BUFFERED_AMOUNT=8388608);let bl=bi;class b0 extends bl{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>bl.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return Se.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class qd extends b0{close(e){super.close(e),this._chunkedData={}}constructor(e,n,i){super(e,n,i),this.chunker=new vw,this.serialization=Xl.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=jv(e),i=n.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];const a=hb(i.data);this._handleDataMessage({data:a})}}_send(e,n){const i=Uv(e);if(i instanceof Promise)return this._send_blob(i);if(!n&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);Se.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const i of n)this.send(i,!0)}}class Eb extends b0{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Xl.None}}class Ab extends b0{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),i=n.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=Nn.chunkedMTU){this.emitError(S0.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=Xl.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var f1;const wo=class wo extends Sw{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,i]of this._connections)e[n]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:Eb,json:Ab,binary:qd,"binary-utf8":qd,default:qd},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?n=e:e&&(i=e.toString()),n={debug:0,host:Nn.CLOUD_HOST,port:Nn.CLOUD_PORT,path:"/",key:wo.DEFAULT_KEY,token:Nn.randomToken(),config:Nn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Nn.CLOUD_HOST?this._options.secure=Nn.isSecure():this._options.host==Nn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Se.setLogFunction(this._options.logFunction),Se.logLevel=this._options.debug||0,this._api=new _b(n),this._socket=this._createServerConnection(),!Nn.supports.audioVideo&&!Nn.supports.data){this._delayedAbort(Ut.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!Nn.validateId(i)){this._delayedAbort(Ut.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(Ut.ServerError,a))}_createServerConnection(){const e=new vb(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ti.Message,n=>{this._handleMessage(n)}),e.on(ti.Error,n=>{this._abort(Ut.SocketError,n)}),e.on(ti.Disconnected,()=>{this.disconnected||(this.emitError(Ut.Network,"Lost connection to server."),this.disconnect())}),e.on(ti.Close,()=>{this.disconnected||this._abort(Ut.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,i=e.payload,a=e.src;switch(n){case dn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case dn.Error:this._abort(Ut.ServerError,i.msg);break;case dn.IdTaken:this._abort(Ut.UnavailableID,`ID "${this.id}" is taken`);break;case dn.InvalidKey:this._abort(Ut.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case dn.Leave:Se.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case dn.Expire:this.emitError(Ut.PeerUnavailable,`Could not connect to peer ${a}`);break;case dn.Offer:{const u=i.connectionId;let d=this.getConnection(a,u);if(d&&(d.close(),Se.warn(`Offer received for existing Connection ID:${u}`)),i.type===ui.Media){const y=new Sl(a,this,{connectionId:u,_payload:i,metadata:i.metadata});d=y,this._addConnection(a,d),this.emit("call",y)}else if(i.type===ui.Data){const y=new this._serializers[i.serialization](a,this,{connectionId:u,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});d=y,this._addConnection(a,d),this.emit("connection",y)}else{Se.warn(`Received malformed connection type:${i.type}`);return}const g=this._getMessages(u);for(const y of g)d.handleMessage(y);break}default:{if(!i){Se.warn(`You received a malformed message from ${a} of type ${n}`);return}const u=i.connectionId,d=this.getConnection(a,u);d&&d.peerConnection?d.handleMessage(e):u?this._storeMessage(u,e):Se.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ut.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,i),i}call(e,n,i={}){if(this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ut.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Se.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new Sl(e,this,{...i,_stream:n});return this._addConnection(e,a),a}_addConnection(e,n){Se.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const i=this._connections.get(e);if(!i)return null;for(const a of i)if(a.connectionId===n)return a;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){Se.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Se.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const i of n)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;Se.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Se.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Se.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(Ut.ServerError,n))}};f1=new WeakMap,Vs(wo,f1,wo.DEFAULT_KEY="peerjs");let t1=wo;var Sb=t1;const Sr=Object.create(null);Sr.open="0";Sr.close="1";Sr.ping="2";Sr.pong="3";Sr.message="4";Sr.upgrade="5";Sr.noop="6";const qa=Object.create(null);Object.keys(Sr).forEach(t=>{qa[Sr[t]]=t});const n1={type:"error",data:"parser error"},Tw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Iw=typeof ArrayBuffer=="function",Rw=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,T0=({type:t,data:e},n,i)=>Tw&&e instanceof Blob?n?i(e):Ty(e,i):Iw&&(e instanceof ArrayBuffer||Rw(e))?n?i(e):Ty(new Blob([e]),i):i(Sr[t]+(e||"")),Ty=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function Iy(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Gd;function bb(t,e){if(Tw&&t.data instanceof Blob)return t.data.arrayBuffer().then(Iy).then(e);if(Iw&&(t.data instanceof ArrayBuffer||Rw(t.data)))return e(Iy(t.data));T0(t,!1,n=>{Gd||(Gd=new TextEncoder),e(Gd.encode(n))})}const Ry="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",co=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ry.length;t++)co[Ry.charCodeAt(t)]=t;const Tb=t=>{let e=t.length*.75,n=t.length,i,a=0,u,d,g,y;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const m=new ArrayBuffer(e),C=new Uint8Array(m);for(i=0;i<n;i+=4)u=co[t.charCodeAt(i)],d=co[t.charCodeAt(i+1)],g=co[t.charCodeAt(i+2)],y=co[t.charCodeAt(i+3)],C[a++]=u<<2|d>>4,C[a++]=(d&15)<<4|g>>2,C[a++]=(g&3)<<6|y&63;return m},Ib=typeof ArrayBuffer=="function",I0=(t,e)=>{if(typeof t!="string")return{type:"message",data:Nw(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Rb(t.substring(1),e)}:qa[n]?t.length>1?{type:qa[n],data:t.substring(1)}:{type:qa[n]}:n1},Rb=(t,e)=>{if(Ib){const n=Tb(t);return Nw(n,e)}else return{base64:!0,data:t}},Nw=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ow="",Nb=(t,e)=>{const n=t.length,i=new Array(n);let a=0;t.forEach((u,d)=>{T0(u,!1,g=>{i[d]=g,++a===n&&e(i.join(Ow))})})},Ob=(t,e)=>{const n=t.split(Ow),i=[];for(let a=0;a<n.length;a++){const u=I0(n[a],e);if(i.push(u),u.type==="error")break}return i};function kb(){return new TransformStream({transform(t,e){bb(t,n=>{const i=n.length;let a;if(i<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,i);else if(i<65536){a=new Uint8Array(3);const u=new DataView(a.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{a=new Uint8Array(9);const u=new DataView(a.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})}let Wd;function _a(t){return t.reduce((e,n)=>e+n.length,0)}function Ea(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let i=0;for(let a=0;a<e;a++)n[a]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),n}function Pb(t,e){Wd||(Wd=new TextDecoder);const n=[];let i=0,a=-1,u=!1;return new TransformStream({transform(d,g){for(n.push(d);;){if(i===0){if(_a(n)<1)break;const y=Ea(n,1);u=(y[0]&128)===128,a=y[0]&127,a<126?i=3:a===126?i=1:i=2}else if(i===1){if(_a(n)<2)break;const y=Ea(n,2);a=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),i=3}else if(i===2){if(_a(n)<8)break;const y=Ea(n,8),m=new DataView(y.buffer,y.byteOffset,y.length),C=m.getUint32(0);if(C>Math.pow(2,21)-1){g.enqueue(n1);break}a=C*Math.pow(2,32)+m.getUint32(4),i=3}else{if(_a(n)<a)break;const y=Ea(n,a);g.enqueue(I0(u?y:Wd.decode(y),e)),i=0}if(a===0||a>t){g.enqueue(n1);break}}}})}const kw=4;function Ht(t){if(t)return Db(t)}function Db(t){for(var e in Ht.prototype)t[e]=Ht.prototype[e];return t}Ht.prototype.on=Ht.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ht.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ht.prototype.off=Ht.prototype.removeListener=Ht.prototype.removeAllListeners=Ht.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,a=0;a<n.length;a++)if(i=n[a],i===e||i.fn===e){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ht.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,a=n.length;i<a;++i)n[i].apply(this,e)}return this};Ht.prototype.emitReserved=Ht.prototype.emit;Ht.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ht.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yl=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Qn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Mb="arraybuffer";function Pw(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const Lb=Qn.setTimeout,Bb=Qn.clearTimeout;function Zl(t,e){e.useNativeTimers?(t.setTimeoutFn=Lb.bind(Qn),t.clearTimeoutFn=Bb.bind(Qn)):(t.setTimeoutFn=Qn.setTimeout.bind(Qn),t.clearTimeoutFn=Qn.clearTimeout.bind(Qn))}const Fb=1.33;function jb(t){return typeof t=="string"?Ub(t):Math.ceil((t.byteLength||t.size)*Fb)}function Ub(t){let e=0,n=0;for(let i=0,a=t.length;i<a;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}function Dw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zb(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Hb(t){let e={},n=t.split("&");for(let i=0,a=n.length;i<a;i++){let u=n[i].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class Vb extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class R0 extends Ht{constructor(e){super(),this.writable=!1,Zl(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,i){return super.emitReserved("error",new Vb(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=I0(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=zb(e);return n.length?"?"+n:""}}class qb extends R0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Ob(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Nb(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Dw()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Mw=!1;try{Mw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Gb=Mw;function Wb(){}class Kb extends qb{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(a,u)=>{this.onError("xhr post error",a,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}class Ar extends Ht{constructor(e,n,i){super(),this.createRequest=e,Zl(this,i),this._opts=i,this._method=i.method||"GET",this._uri=n,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const n=Pw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(n);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&i.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var a;i.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ar.requestsCount++,Ar.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Wb,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ar.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ar.requestsCount=0;Ar.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ny);else if(typeof addEventListener=="function"){const t="onpagehide"in Qn?"pagehide":"unload";addEventListener(t,Ny,!1)}}function Ny(){for(let t in Ar.requests)Ar.requests.hasOwnProperty(t)&&Ar.requests[t].abort()}const Xb=function(){const t=Lw({xdomain:!1});return t&&t.responseType!==null}();class Yb extends Kb{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Xb&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ar(Lw,this.uri(),e)}}function Lw(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Gb))return new XMLHttpRequest}catch{}if(!e)try{return new Qn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Bw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Zb extends R0{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,i=Bw?{}:Pw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,i)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],a=n===e.length-1;T0(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}a&&Yl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Dw()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Kd=Qn.WebSocket||Qn.MozWebSocket;class Qb extends Zb{createSocket(e,n,i){return Bw?new Kd(e,n,i):n?new Kd(e,n):new Kd(e)}doWrite(e,n){this.ws.send(n)}}class $b extends R0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Pb(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),a=kb();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const u=()=>{i.read().then(({done:g,value:y})=>{g||(this.onPacket(y),u())}).catch(g=>{})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],a=n===e.length-1;this._writer.write(i).then(()=>{a&&Yl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Jb={websocket:Qb,webtransport:$b,polling:Yb},e6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function r1(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let a=e6.exec(t||""),u={},d=14;for(;d--;)u[t6[d]]=a[d]||"";return n!=-1&&i!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=n6(u,u.path),u.queryKey=r6(u,u.query),u}function n6(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function r6(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,a,u){a&&(n[a]=u)}),n}const i1=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ga=[];i1&&addEventListener("offline",()=>{Ga.forEach(t=>t())},!1);class fi extends Ht{constructor(e,n){if(super(),this.binaryType=Mb,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const i=r1(e);n.hostname=i.host,n.secure=i.protocol==="https"||i.protocol==="wss",n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=r1(n.host).host);Zl(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(i=>{const a=i.prototype.name;this.transports.push(a),this._transportsByName[a]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Hb(this.opts.query)),i1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ga.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=kw,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&fi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",fi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const a=this.writeBuffer[i].data;if(a&&(n+=jb(a)),i>0&&n>this._maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Yl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,i){return this._sendPacket("message",e,n,i),this}send(e,n,i){return this._sendPacket("message",e,n,i),this}_sendPacket(e,n,i,a){if(typeof n=="function"&&(a=n,n=void 0),typeof i=="function"&&(a=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:e,data:n,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(fi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),i1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Ga.indexOf(this._offlineEventListener);i!==-1&&Ga.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}fi.protocol=kw;class i6 extends fi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),i=!1;fi.priorWebsocketSuccess=!1;const a=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",v=>{if(!i)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;fi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(C(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=n.name,this.emitReserved("upgradeError",S)}}))};function u(){i||(i=!0,C(),n.close(),n=null)}const d=v=>{const S=new Error("probe error: "+v);S.transport=n.name,u(),this.emitReserved("upgradeError",S)};function g(){d("transport closed")}function y(){d("socket closed")}function m(v){n&&v.name!==n.name&&u()}const C=()=>{n.removeListener("open",a),n.removeListener("error",d),n.removeListener("close",g),this.off("close",y),this.off("upgrading",m)};n.once("open",a),n.once("error",d),n.once("close",g),this.once("close",y),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}}let s6=class extends i6{constructor(e,n={}){const i=typeof e=="object"?e:n;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(a=>Jb[a]).filter(a=>!!a)),super(e,i)}};function o6(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=r1(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+e,i.href=i.protocol+"://"+u+(n&&n.port===i.port?"":":"+i.port),i}const a6=typeof ArrayBuffer=="function",l6=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Fw=Object.prototype.toString,c6=typeof Blob=="function"||typeof Blob<"u"&&Fw.call(Blob)==="[object BlobConstructor]",u6=typeof File=="function"||typeof File<"u"&&Fw.call(File)==="[object FileConstructor]";function N0(t){return a6&&(t instanceof ArrayBuffer||l6(t))||c6&&t instanceof Blob||u6&&t instanceof File}function Wa(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Wa(t[n]))return!0;return!1}if(N0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Wa(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Wa(t[n]))return!0;return!1}function f6(t){const e=[],n=t.data,i=t;return i.data=s1(n,e),i.attachments=e.length,{packet:i,buffers:e}}function s1(t,e){if(!t)return t;if(N0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=s1(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=s1(t[i],e));return n}return t}function d6(t,e){return t.data=o1(t.data,e),delete t.attachments,t}function o1(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=o1(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=o1(t[n],e));return t}const h6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var et;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class p6{constructor(e){this.replacer=e}encode(e){return(e.type===et.EVENT||e.type===et.ACK)&&Wa(e)?this.encodeAsBinary({type:e.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===et.BINARY_EVENT||e.type===et.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=f6(e),i=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(i),a}}class O0 extends Ht{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===et.BINARY_EVENT;i||n.type===et.BINARY_ACK?(n.type=i?et.EVENT:et.ACK,this.reconstructor=new g6(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(N0(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(et[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===et.BINARY_EVENT||i.type===et.BINARY_ACK){const u=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const d=e.substring(u,n);if(d!=Number(d)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(d)}if(e.charAt(n+1)==="/"){const u=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(u,n)}else i.nsp="/";const a=e.charAt(n+1);if(a!==""&&Number(a)==a){const u=n+1;for(;++n;){const d=e.charAt(n);if(d==null||Number(d)!=d){--n;break}if(n===e.length)break}i.id=Number(e.substring(u,n+1))}if(e.charAt(++n)){const u=this.tryParse(e.substr(n));if(O0.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case et.CONNECT:return Oy(n);case et.DISCONNECT:return n===void 0;case et.CONNECT_ERROR:return typeof n=="string"||Oy(n);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&h6.indexOf(n[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class g6{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=d6(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Oy(t){return Object.prototype.toString.call(t)==="[object Object]"}const m6=Object.freeze(Object.defineProperty({__proto__:null,Decoder:O0,Encoder:p6,get PacketType(){return et}},Symbol.toStringTag,{value:"Module"}));function ar(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const y6=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jw extends Ht{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ar(e,"open",this.onopen.bind(this)),ar(e,"packet",this.onpacket.bind(this)),ar(e,"error",this.onerror.bind(this)),ar(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var i,a,u;if(y6.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const d={type:et.EVENT,data:n};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const C=this.ids++,v=n.pop();this._registerAckCallback(C,v),d.id=C}const g=(a=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||a===void 0?void 0:a.writable,y=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!g||(y?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,n){var i;const a=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(a===void 0){this.acks[e]=n;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===e&&this.sendBuffer.splice(g,1);n.call(this,new Error("operation has timed out"))},a),d=(...g)=>{this.io.clearTimeoutFn(u),n.apply(this,g)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...n){return new Promise((i,a)=>{const u=(d,g)=>d?a(d):i(g);u.withError=!0,n.push(u),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...u)=>(this._queue[0],a!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case et.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(e);break;case et.ACK:case et.BINARY_ACK:this.onack(e);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...a){i||(i=!0,n.packet({type:et.ACK,id:e,data:a}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function Ds(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ds.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ds.prototype.reset=function(){this.attempts=0};Ds.prototype.setMin=function(t){this.ms=t};Ds.prototype.setMax=function(t){this.max=t};Ds.prototype.setJitter=function(t){this.jitter=t};class a1 extends Ht{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Zl(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Ds({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||m6;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new s6(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const a=ar(n,"open",function(){i.onopen(),e&&e()}),u=g=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",g),e?e(g):this.maybeReconnectOnOpen()},d=ar(n,"error",u);if(this._timeout!==!1){const g=this._timeout,y=this.setTimeoutFn(()=>{a(),u(new Error("timeout")),n.close()},g);this.opts.autoUnref&&y.unref(),this.subs.push(()=>{this.clearTimeoutFn(y)})}return this.subs.push(a),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ar(e,"ping",this.onping.bind(this)),ar(e,"data",this.ondata.bind(this)),ar(e,"error",this.onerror.bind(this)),ar(e,"close",this.onclose.bind(this)),ar(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Yl(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new jw(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Js={};function Ka(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=o6(t,e.path||"/socket.io"),i=n.source,a=n.id,u=n.path,d=Js[a]&&u in Js[a].nsps,g=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let y;return g?y=new a1(i,e):(Js[a]||(Js[a]=new a1(i,e)),y=Js[a]),n.query&&!e.query&&(e.query=n.queryKey),y.socket(n.path,e)}Object.assign(Ka,{Manager:a1,Socket:jw,io:Ka,connect:Ka});function x6(t){return typeof t!="object"||t===null||!("type"in t)?!1:["PLAY","PAUSE","SKIP","SEEK","SET_VOLUME","TOGGLE_MUTE","ADD_SONG","REMOVE_SONG","REORDER_QUEUE","MOVE_SONG_UP","MOVE_SONG_DOWN","SET_DISPLAY_NAME","PING","CREATE_COLLECTION","DELETE_COLLECTION","RENAME_COLLECTION","SET_COLLECTION_VISIBILITY","PLAYLIST_ADD","PLAYLIST_REMOVE","PLAYLIST_TO_QUEUE","IMPORT_COLLECTION"].includes(t.type)}async function C6(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("")}function v6(){const[t,e]=re.useState(null),[n,i]=re.useState(new Map),a=re.useRef(new Map),[u,d]=re.useState(""),[g,y]=re.useState(null);re.useEffect(()=>{a.current=n},[n]),re.useEffect(()=>{const S=hv("room_state_updated",N=>{const M={type:"STATE_UPDATE",state:{...N.payload,playlists:(N.payload.playlists||[]).filter(z=>z.visibility==="public")}};a.current.forEach(z=>{z.open&&z.send(M)})});return()=>{S.then(N=>N())}},[]),re.useEffect(()=>{const S=new Sb({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]}});return S.on("open",async N=>{console.log("[PeerHost] Peer ID:",N);const D=w6(),M=_6(),z=await C6(M),{invoke:I}=await xy(async()=>{const{invoke:P}=await Promise.resolve().then(()=>ny);return{invoke:P}},void 0),T=await I("get_server_port"),R=Ka(`http://localhost:${T}`);R.emit("CREATE_ROOM",{roomId:D,joinTokenHash:z,hostPeerId:N}),R.on("ROOM_CREATED",async()=>{console.log("[PeerHost] Room created on signaling server");try{const P=await I("get_qr_url");d(P);const X=`http://localhost:3000/room/${D}?t=${M}&s=${encodeURIComponent(`http://localhost:${T}`)}`;console.log("[PeerHost] Web client URL (dev):",X)}catch(P){console.error("Failed to get QR URL:",P),d(`${window.location.origin}/join?r=${D}&t=${M}`)}}),y(R)}),S.on("connection",N=>{console.log("[PeerHost] New peer connection:",N.peer),m(N)}),e(S),()=>{S.destroy(),g==null||g.disconnect()}},[]);const m=S=>{S.on("open",()=>{console.log("[PeerHost] DataChannel open:",S.peer),i(N=>new Map(N).set(S.peer,S)),C(S)}),S.on("data",async N=>{console.log("[PeerHost] Received data:",N);const D=N;if(D&&D.type==="SEARCH"&&typeof D.query=="string"){console.log("[PeerHost] Processing SEARCH:",D.query);try{const{invoke:M}=await xy(async()=>{const{invoke:I}=await Promise.resolve().then(()=>ny);return{invoke:I}},void 0),z=await M("search_youtube",{query:D.query,limit:D.limit||5});S.send({type:"SEARCH_RESULTS",results:z})}catch(M){console.error("[PeerHost] Search failed:",M),S.send({type:"ERROR",code:"SEARCH_FAILED",message:M instanceof Error?M.message:"Search failed"})}return}if(x6(N)){console.log("[PeerHost] Received command:",N);try{await iS(N)}catch(M){console.error("[PeerHost] Command processing failed:",M);const z={type:"ERROR",code:"COMMAND_FAILED",message:M instanceof Error?M.message:"Unknown error"};S.send(z)}}}),S.on("close",()=>{console.log("[PeerHost] Connection closed:",S.peer),i(N=>{const D=new Map(N);return D.delete(S.peer),D})})},C=async S=>{try{const N=await pv(),M={type:"STATE_UPDATE",state:{...N,playlists:(N.playlists||[]).filter(z=>z.visibility==="public")}};S.send(M)}catch(N){console.error("[PeerHost] Failed to send state update:",N)}},v=S=>{n.forEach(N=>{N.open&&N.send(S)})};return{peer:t,connectionUrl:u,connectedClients:n.size,broadcastToAll:v}}function w6(){return Math.random().toString(36).substring(2,15)}function _6(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}dr.init({debug:!1,visualDebug:!1});function E6({onBack:t}){const{roomState:e,loading:n,initializeRoom:i}=Av(),{connectionUrl:a,connectedClients:u}=v6(),[d,g]=re.useState(!1),[y,m]=re.useState([]),[C,v]=re.useState(!1),[S,N]=re.useState(!1),[D,M]=re.useState("player"),{ref:z,focusKey:I}=dr.useFocusable();re.useEffect(()=>{(async()=>{try{await sS()}catch(X){console.warn("[Host] startHostServer:",X)}i()})()},[]),re.useEffect(()=>{const X=()=>{const V=window.innerWidth<=768||"ontouchstart"in window;N(V),V&&window.innerHeight>window.innerWidth&&M("controls")};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]),re.useEffect(()=>{const X=V=>{(V.key==="Escape"||V.key==="GoBack")&&!d&&!S&&(g(!0),V.preventDefault())};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[d,S]);const T=async X=>{v(!0),m([]);try{const V=await Me("search_youtube",{query:X,limit:10});m(V)}catch(V){console.error("Search failed:",V)}finally{v(!1)}},R=async(X,V)=>{await Me("process_command",{command:{type:"PLAYLIST_ADD",youtubeUrl:X,collectionId:V,addedBy:"Host"}})},P=re.useCallback(X=>{M(X)},[]);return n?_.jsxs("div",{className:"app-loading",children:[_.jsx("div",{className:"app-loading-title",children:" KaraokeNatin"}),_.jsx("div",{className:"app-loading-spinner"}),_.jsx("div",{className:"app-loading-hint",children:"Starting host"})]}):_.jsx(dr.FocusContext.Provider,{value:I,children:_.jsxs("div",{ref:z,className:`app-container ${S?"mobile":"desktop"}`,children:[S&&_.jsxs("div",{className:"mobile-tab-bar",children:[_.jsxs("button",{className:`mobile-tab ${D==="player"?"active":""}`,onClick:()=>P("player"),children:[_.jsx(FS,{size:16})," Player"]}),_.jsxs("button",{className:`mobile-tab ${D==="controls"?"active":""}`,onClick:()=>P("controls"),children:[_.jsx(u4,{size:16})," Controls"]})]}),_.jsxs("div",{className:`main-area ${S&&D!=="player"?"hidden-mobile":""}`,children:[_.jsx(lS,{}),_.jsxs("footer",{className:"yt-footer-host",children:["Videos are played via YouTube embedding. All videos are subject to YouTube's"," ",_.jsx("a",{href:"https://www.youtube.com/t/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),"."]})]}),_.jsx("div",{className:`panel-wrapper ${S&&D!=="controls"?"hidden-mobile":""}`,children:_.jsx(b4,{connectionUrl:a,roomId:e==null?void 0:e.roomId,queue:(e==null?void 0:e.queue)||[],playlists:(e==null?void 0:e.playlists)||[],connectedClients:u,isCollapsed:S?!1:d,onToggle:()=>g(!d),onSearch:T,searchResults:y,searching:C,onAddToPlaylist:R,isPlaying:(e==null?void 0:e.player.status)==="playing",currentSong:(e==null?void 0:e.player.currentSong)||null,isMobile:S,onBack:t})})]})})}function A6({onBack:t}){const[e,n]=re.useState(null),[i,a]=re.useState(!1),[u,d]=re.useState(!0),g=re.useRef(null),y=re.useCallback(C=>{const v=new URL(C);v.searchParams.set("mode","inapp"),v.searchParams.set("t",Date.now().toString()),n(v.toString()),a(!1),d(!1)},[]),m=re.useCallback(()=>{n(null),a(!1),d(!0)},[]);return re.useEffect(()=>{const C=async v=>{var D,M,z,I,T;if(!g.current||v.source!==g.current.contentWindow)return;const{type:S,payload:N}=v.data;try{if(S==="REQUEST_LOCAL_PLAYLISTS"){const R=await Me("get_playlists");(D=g.current.contentWindow)==null||D.postMessage({type:"LOCAL_PLAYLISTS_UPDATED",playlists:R},"*")}else if(S==="CREATE_LOCAL_COLLECTION"){await Me("playlist_create_collection",{name:N.name,visibility:"personal"});const R=await Me("get_playlists");(M=g.current.contentWindow)==null||M.postMessage({type:"LOCAL_PLAYLISTS_UPDATED",playlists:R},"*")}else if(S==="ADD_TO_LOCAL_PLAYLIST"){await Me("playlist_add_song",{youtubeUrl:N.youtubeUrl,collectionId:N.collectionId,addedBy:"Guest"});const R=await Me("get_playlists");(z=g.current.contentWindow)==null||z.postMessage({type:"LOCAL_PLAYLISTS_UPDATED",playlists:R},"*"),(I=g.current.contentWindow)==null||I.postMessage({type:"TOAST",message:"Saved to library"},"*")}else if(S==="REMOVE_FROM_LOCAL_PLAYLIST"){await Me("playlist_remove_song",{collectionId:N.collectionId,songId:N.songId});const R=await Me("get_playlists");(T=g.current.contentWindow)==null||T.postMessage({type:"LOCAL_PLAYLISTS_UPDATED",playlists:R},"*")}}catch(R){console.error("[GuestView] Bridge error:",R)}};return window.addEventListener("message",C),()=>window.removeEventListener("message",C)},[]),_.jsx("div",{className:"guest-view",children:e?_.jsxs("div",{className:"guest-iframe-area",children:[_.jsxs("div",{className:"guest-banner",children:[_.jsx("span",{className:"guest-banner-label",children:i?"Connected to remote host":"Connecting..."}),_.jsxs("button",{className:"btn-sm btn-secondary guest-banner-btn",onClick:m,children:[_.jsx(x4,{size:14})," Disconnect"]})]}),!i&&_.jsxs("div",{className:"guest-iframe-loading",children:[_.jsx("div",{className:"spinner"}),_.jsx("p",{children:"Loading remote control..."})]}),_.jsx("iframe",{ref:g,src:e,className:"guest-inline-iframe",style:{opacity:i?1:0},onLoad:()=>a(!0),title:"Remote Control",allow:"microphone; camera"}),_.jsxs("footer",{className:"yt-footer-host",children:["Videos are played via YouTube embedding. All videos are subject to YouTube's"," ",_.jsx("a",{href:"https://www.youtube.com/t/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),"."]})]}):u?_.jsxs("div",{className:"guest-scan-wrapper",children:[_.jsxs("button",{className:"mode-back-btn",onClick:t,children:[_.jsx(w0,{size:16})," Back"]}),_.jsx(Q4,{onClose:t,onConnect:y})]}):null})}function S6(){const[t,e]=re.useState("select"),n=re.useCallback(()=>e("select"),[]);return t==="select"?_.jsx($4,{onSelectHost:()=>e("host"),onSelectGuest:()=>e("guest"),onSelectLibrary:()=>e("library")}):t==="host"?_.jsx(E6,{onBack:n}):t==="library"?_.jsx(J4,{onBack:n}):_.jsx(A6,{onBack:n})}class b6 extends re.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("[ErrorBoundary] Caught error:",e,n),this.setState({error:e,errorInfo:n})}render(){var e;return this.state.hasError?_.jsxs("div",{style:{padding:"40px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"100vh",color:"white",fontFamily:"monospace"},children:[_.jsx("h1",{children:" KaraokeNatin Error"}),_.jsx("p",{style:{marginTop:"20px",fontSize:"18px"},children:"Something went wrong loading the app."}),_.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"rgba(0,0,0,0.3)",borderRadius:"10px"},children:[_.jsx("h2",{children:"Error Details:"}),_.jsx("pre",{style:{marginTop:"10px",whiteSpace:"pre-wrap",overflow:"auto"},children:(e=this.state.error)==null?void 0:e.toString()}),this.state.errorInfo&&_.jsxs(_.Fragment,{children:[_.jsx("h3",{style:{marginTop:"20px"},children:"Stack Trace:"}),_.jsx("pre",{style:{marginTop:"10px",fontSize:"12px",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"300px"},children:this.state.errorInfo.componentStack})]})]}),_.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"30px",padding:"15px 30px",fontSize:"16px",background:"white",color:"#667eea",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Reload App"})]}):this.props.children}}Xd.createRoot(document.getElementById("root")).render(_.jsx(eo.StrictMode,{children:_.jsx(b6,{children:_.jsx(S6,{})})}));
